(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23fb400e"],{"457b":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"QR_dialog",attrs:{title:e.title,visible:e.dialogVisible,"before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":"",width:"fit-content"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogVisible?a("div",{staticClass:"QR_box",staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("el-row",{style:e.is_TAB?"padding-bottom: 60px":""},[e.is_TAB?a("div",{staticStyle:{"text-align":"center","margin-bottom":"56px"}},[a("el-radio-group",{on:{change:e.handle_QR_change},model:{value:e.QR_tab,callback:function(t){e.QR_tab=t},expression:"QR_tab"}},e._l(e.personTaxScan,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1):e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:"dyScan"===e.QR_tab,expression:"QR_tab === 'dyScan'"}]},[a("div",{staticClass:"tip QR_1_text"},[e._v(" 请扫描下方二维码，完成扫脸验证 ")]),a("div",{staticClass:"justifyCenter",staticStyle:{width:"211px",height:"204px",margin:"0 auto"}},[a("div",{staticStyle:{position:"absolute"},attrs:{id:"authorise_qrcode"}}),!0===e.expired?a("div",{staticClass:"cover",on:{click:e.refreshCode}},[a("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),a("span",{staticClass:"check"},[e._v("请点击"),a("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])]):e._e()]),a("div",{staticStyle:{"text-align":"center","margin-top":"40px"}},[a("i",{staticClass:"el-icon-circle-check",staticStyle:{"font-size":"16px"}}),e._v(" 我已阅读并同意 "),a("span",{staticStyle:{color:"#4285F4",cursor:"pointer"},on:{click:e.handleServiceAgreement}},[e._v("《人脸识别服务协议》")])]),a("div",{staticClass:"warm_prompt_box"},[a("div",{staticClass:"warm_prompt_title"},[e._v("温馨提示:")]),a("p",{staticClass:"warm_prompt_text"},[e._v("1.请使用微信“扫一扫”功能扫描此二维码进行实名验证；不支持支付宝“扫一扫”功能。")]),a("p",{staticClass:"warm_prompt_text"},[e._v("2.暂不支持外籍人士、港澳台同胞线上实名验证；如需办理，请至主管税务机关办税服务厅办理。")]),a("p",{staticClass:"warm_prompt_text"},[e._v("3.微信识别通过后，请在本界面点击“验证完成”按钮。")])]),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.CheckState_multisource(e.qrCode_id)}}},[e._v("验证完成")])],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"appScan"===e.QR_tab,expression:"QR_tab === 'appScan'"}]},[a("div",{staticClass:"tip QR_1_text"},[a("div",[e._v(" "+e._s(e.tip)+" ")])]),a("el-col",{staticClass:"justifyCenter"},[e.codeShow?a("img",{staticClass:"centerLogo",attrs:{src:i("7e9b")}}):e._e(),a("div",{staticStyle:{width:"211px",height:"204px"},attrs:{id:"authorise_qrcode1"}}),!0===e.expired?a("div",{staticClass:"cover",on:{click:e.refreshCode}},[a("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),a("span",{staticClass:"check"},[e._v("请点击"),a("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])]):e._e()])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"personTaxScan"===e.QR_tab,expression:"QR_tab === 'personTaxScan'"}]},[a("el-col",{staticClass:"justifyCenter",staticStyle:{height:"204px"}},[a("img",{attrs:{id:"qrcodeDiv2"}}),!0===e.expired?a("div",{staticClass:"cover",on:{click:e.refreshCode}},[a("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),a("span",{staticClass:"check"},[e._v("请点击"),a("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])]):e._e()]),e._l(e.personTaxScan,(function(t){return a("div",{key:t.value},["personTaxScan"==t.value?a("div",{domProps:{innerHTML:e._s(t.tips)}}):e._e()])}))],2)])],1):e._e()])},r=[],n=(i("c975"),i("96cf"),i("1da1")),o=i("510c"),s=i("1115"),c=i("0a4f"),l={name:"qrCode",data:function(){return{exit_variable:!0,userinfo:{},is_TAB:!0,QR_tab:"appScan",areaName:"",row2:"",tip:"",isForbid:!1,title:"",dialogVisible:!1,expired:!1,qrcode:"",qrCode_id:"",codeShow:!1,interval:null,timeout:null,personTaxScan:[],isRiskScan:!1,riskMessage:""}},mounted:function(){var e,t;if(localStorage.getItem("userinfo")){var i=JSON.parse(Object(s["a"])(localStorage.getItem("userinfo")));"3100"===i.areaPrefix&&(this.QR_tab="dyScan")}else"3100"===localStorage.getItem("areaPrefix")&&(this.QR_tab="dyScan");(null===(e=this.$store.state.settings.logConfig)||void 0===e?void 0:e.personTaxScan)&&(this.personTaxScan=null===(t=this.$store.state.settings.logConfig)||void 0===t?void 0:t.personTaxScan,1==this.personTaxScan.length&&(this.is_TAB=!1))},beforeDestroy:function(){this.exit_variable=!1,window.clearTimeout(this.interval),this.interval=null,window.clearTimeout(this.timeout),this.timeout=null},methods:{handleServiceAgreement:function(){this.$emit("handleServiceAgreement")},handle_QR_change:function(e){this.expired=!1,"dyScan"===this.QR_tab?this.exit_variable=!1:("appScan"===this.QR_tab||"personTaxScan"===this.QR_tab)&&(this.exit_variable=!0),window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.creatVerifyQRCode(1)},handleClose:function(){this.dialogVisible=!1,this.exit_variable=!1,this.$emit("handleClose"),window.clearTimeout(this.interval),this.interval=null,window.clearTimeout(this.timeout),this.timeout=null},handleClose2:function(){window.clearTimeout(this.interval),this.interval=null,window.clearTimeout(this.timeout),this.timeout=null},CheckState:function(e){var t=this,i=this;if(!i.expired){var a={qrcode_id:e};i.interval=window.setTimeout(Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:Object(o["A"])(a).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1e3!==r.code||!r.datagram){a.next=16;break}if("2"!==r.datagram.qrcode_status){a.next=13;break}return window.clearTimeout(i.interval),window.clearTimeout(i.timeout),a.next=6,Object(c["c"])(t.$cookie.get("token"));case 6:if(!t.isRiskScan){a.next=10;break}return t.dialogVisible=!1,t.$emit("riskOver",t.row2,e),a.abrupt("return");case 10:"确认授权"===i.title?t.$emit("submitA",t.row2):"申请企业授权"===i.title&&i.$parent.applyForAuth2("0"),a.next=14;break;case 13:"1"===r.datagram.qrcode_status?i.exit_variable&&i.CheckState(e):"3"===r.datagram.qrcode_status&&(window.clearTimeout(i.interval),window.clearTimeout(i.timeout),i.expired=!0);case 14:a.next=20;break;case 16:window.clearTimeout(i.interval),window.clearTimeout(i.timeout),i.expired=!0,r.msg&&i.$message({customClass:"el-icon-warning-color",message:r.msg,type:"warning"});case 20:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(i.interval),i.CheckState(e)):(window.clearTimeout(i.interval),window.clearTimeout(i.timeout),i.expired=!0)}));case 1:case"end":return r.stop()}}),r)}))),4e3)}},CheckITS_State:function(e){var t=this,i=this;if(!i.expired){var a={qrcode_id:e};i.interval=window.setTimeout(Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:Object(o["y"])(a).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1e3!==r.code||!r.datagram){a.next=15;break}if("2"!==r.datagram.qrcode_status){a.next=12;break}if(window.clearTimeout(i.interval),window.clearTimeout(i.timeout),Object(c["c"])(t.$cookie.get("token")),!t.isRiskScan){a.next=9;break}return t.dialogVisible=!1,t.$emit("riskOver",t.row2,e),a.abrupt("return");case 9:"确认授权"===i.title?t.$emit("submitA",t.row2):"申请企业授权"===i.title&&i.$parent.applyForAuth2("0"),a.next=13;break;case 12:"1"===r.datagram.qrcode_status?i.exit_variable&&i.CheckITS_State(e):"3"===r.datagram.qrcode_status&&(window.clearTimeout(i.interval),window.clearTimeout(i.timeout),i.expired=!0);case 13:a.next=19;break;case 15:window.clearTimeout(i.interval),window.clearTimeout(i.timeout),i.expired=!0,r.msg&&i.$message({customClass:"el-icon-warning-color",message:r.msg,type:"warning"});case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(i.interval),i.CheckITS_State(e)):(window.clearTimeout(i.interval),window.clearTimeout(i.timeout),i.expired=!0)}));case 1:case"end":return r.stop()}}),r)}))),4e3)}},CheckState_multisource:function(e){var t=this,i=this;if(!i.expired){var a={qrcode_id:e};Object(o["z"])(a).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1e3!==r.code||!r.datagram){a.next=12;break}if("2"!==r.datagram.qrcode_status){a.next=10;break}if(Object(c["c"])(t.$cookie.get("token")),!t.isRiskScan){a.next=7;break}return t.dialogVisible=!1,t.$emit("riskOver",t.row2,e),a.abrupt("return");case 7:"确认授权"===i.title?t.$emit("submitA",t.row2):"申请企业授权"===i.title&&i.$parent.applyForAuth2("0"),a.next=10;break;case 10:a.next=14;break;case 12:i.expired=!0,r.msg&&i.$message({customClass:"el-icon-warning-color",message:r.msg,type:"warning"});case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){i.expired=!0}))}},creatVerifyQRCode:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.exit_variable=!0,t.codeShow=!1,i=t,"appScan"===t.QR_tab?Object(o["d"])({riskMessage:t.riskMessage,controlMeasures:t.controlMeasures,businessProcess:t.businessProcess}).then((function(e){i.qrcode=e.datagram.qrcode,i.qrCode_id=e.datagram.qrcode_id,i.showQRCode(e.datagram.qrcode),i.CheckState(e.datagram.qrcode_id),i.setQRCodeTimeout()})).catch((function(e){window.clearTimeout(i.interval),window.clearTimeout(i.timeout),i.expired=!0})):"personTaxScan"===t.QR_tab?Object(o["b"])({}).then((function(e){i.qrcode=e.datagram.qrcode,i.qrCode_id=e.datagram.qrcode_id,i.showITS_QRCode(e.datagram.qrcode),i.CheckITS_State(e.datagram.qrcode_id),i.setQRCodeTimeout()})).catch((function(e){window.clearTimeout(i.interval),window.clearTimeout(i.timeout),i.expired=!0})):"dyScan"===t.QR_tab&&Object(o["c"])({}).then((function(e){i.qrcode=e.datagram.qrcode,i.qrCode_id=e.datagram.qrcode_id,i.showMultisourceQRCode(e.datagram.qrcode),i.setQRCodeTimeout()})).catch((function(e){i.expired=!0}));case 4:case"end":return e.stop()}}),e)})))()},showQRCode:function(e){var t=document.getElementById("authorise_qrcode1");t.innerHTML="";var i=new QRCode(t,{text:e,width:211,height:204});i._el.title="",this.codeShow=!0},showMultisourceQRCode:function(e){var t=document.getElementById("authorise_qrcode");t.innerHTML="";var i=new QRCode(t,{text:e,width:211,height:204});i._el.title=""},showITS_QRCode:function(e){var t=document.getElementById("qrcodeDiv2");t.src="data:image/png;base64,"+e},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),window.clearTimeout(e.interval),e.expired=!0}),6e5)},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.creatVerifyQRCode(1)}}},d=l,u=(i("512cf"),i("2877")),m=Object(u["a"])(d,a,r,!1,null,"42a42e95",null);t["a"]=m.exports},"512cf":function(e,t,i){"use strict";var a=i("b067"),r=i.n(a);r.a},b067:function(e,t,i){}}]);
