(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62a6e19d","chunk-2d441c3b","chunk-533d9532","chunk-3f34fee4","chunk-039fddf0","chunk-2d441c3b","chunk-5ab88692","chunk-94758b62","chunk-2d2295d8"],{"0177":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return o})),r.d(t,"e",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"f",(function(){return l}));var a=r("b775");function i(e){return Object(a["a"])({url:"/idm/internal/natural/resetPasswordForFirstLogin",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/idm/internal/company/updatePassword",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/auth/user/account/getSmsCode",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/idm/internal/company/updatePasswordByMessage",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/idm/internal/company/updatePasswordByIA",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/idm/internal/company/updatePasswordByQrcode",method:"post",data:e})}},"028ba":function(e,t,r){},"0456":function(e,t,r){"use strict";var a=r("64a1"),i=r.n(a);i.a},"07dd":function(e,t,r){},"087d":function(e,t,r){},"0ed9":function(e,t,r){"use strict";var a=r("afd7"),i=r.n(a);i.a},"0f3e":function(e,t,r){},"12b5":function(e,t,r){"use strict";var a=r("a51e"),i=r.n(a);i.a},"15c8":function(e,t,r){"use strict";var a=r("b06d"),i=r.n(a);i.a},1722:function(e,t,r){"use strict";var a=r("fffc"),i=r.n(a);i.a},"172b":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r("b775");function i(e){return Object(a["a"])({url:"/idm/internal/natural/questionnaireCollect",method:"post",data:e})}},"17af":function(e,t,r){"use strict";var a=r("3be6"),i=r.n(a);i.a},"17c5":function(e,t,r){"use strict";var a=r("3f84"),i=r.n(a);i.a},"17c9":function(e,t,r){"use strict";r.d(t,"C",(function(){return i})),r.d(t,"x",(function(){return n})),r.d(t,"q",(function(){return o})),r.d(t,"B",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return u})),r.d(t,"k",(function(){return d})),r.d(t,"l",(function(){return m})),r.d(t,"m",(function(){return f})),r.d(t,"s",(function(){return g})),r.d(t,"y",(function(){return p})),r.d(t,"f",(function(){return h})),r.d(t,"t",(function(){return v})),r.d(t,"g",(function(){return b})),r.d(t,"z",(function(){return w})),r.d(t,"G",(function(){return _})),r.d(t,"w",(function(){return y})),r.d(t,"r",(function(){return x})),r.d(t,"A",(function(){return C})),r.d(t,"u",(function(){return T})),r.d(t,"d",(function(){return k})),r.d(t,"n",(function(){return S})),r.d(t,"e",(function(){return R})),r.d(t,"o",(function(){return $})),r.d(t,"p",(function(){return I})),r.d(t,"h",(function(){return j})),r.d(t,"D",(function(){return O})),r.d(t,"i",(function(){return q})),r.d(t,"E",(function(){return L})),r.d(t,"F",(function(){return A})),r.d(t,"j",(function(){return D})),r.d(t,"v",(function(){return P}));var a=r("b775");function i(e){return Object(a["a"])({url:"/auth/enterprise/sendSmsCode",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/auth/enterprise/passwordLogin",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/auth/enterprise/user/login",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/auth/enterprise/quick/quickLogin",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/auth/enterprise/quick/accountLogin",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/auth/enterprise/quick/accountSendSmsCode",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/auth/enterprise/quick/SmsMessageLogin",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/auth/enterprise/quick/factorAccountLogin",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/auth/enterprise/quick/factorAccountSendSmsCode",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/auth/enterprise/quick/factorAccountVerifySmsCode",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/auth/enterprise/mulQrcodeLogin",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/auth/enterprise/qrcodeLogin",method:"post",data:e})}function h(e){return Object(a["a"])({url:"/auth/enterprise/cert/createMulQRcode",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/auth/enterprise/cert/mulQrcodeLogin",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/auth/enterprise/cert/createQRcode",method:"post",data:e})}function w(e){return Object(a["a"])({url:"/auth/enterprise/cert/qrcodeLogin",method:"post",data:e})}function _(e){return Object(a["a"])({url:"/auth/enterprise/quick/zrrLogin",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/auth/enterprise/passwordLoginForUser",method:"post",data:e})}function x(e){return Object(a["a"])({url:"/auth/enterprise/user/loginForUser",method:"post",data:e})}function C(e){return Object(a["a"])({url:"/auth/enterprise/cert/qrcodeLoginForUser",method:"post",data:e})}function T(e){return Object(a["a"])({url:"/auth/enterprise/cert/mulQrcodeLoginForUser",method:"post",data:e})}function k(e){return Object(a["a"])({url:"/auth/qrcodeAuth/second/createItsQRcode",method:"post",data:e})}function S(e){return Object(a["a"])({url:"/auth/enterprise/itsQrcodeLogin",method:"post",data:e})}function R(e){return Object(a["a"])({url:"/auth/enterprise/cert/createItsQRcode",method:"post",data:e})}function $(e){return Object(a["a"])({url:"/auth/enterprise/cert/itsQrcodeLogin",method:"post",data:e})}function I(e){return Object(a["a"])({url:"/auth/enterprise/cert/itsQrcodeLoginForUser",method:"post",data:e})}function j(e){return Object(a["a"])({url:"/auth/enterprise/quick/emailLogin",method:"post",data:e})}function O(e){return Object(a["a"])({url:"/auth/entrance/userLogin",method:"post",data:e})}function q(e){return Object(a["a"])({url:"/auth/entrance/loginForUser",method:"post",data:e})}function L(e){return Object(a["a"])({url:"/auth/entrance/userSendSmsCode",method:"post",data:e})}function A(e){return Object(a["a"])({url:"/auth/entrance/userSmsCodeLogin",method:"post",data:e})}function D(e){return Object(a["a"])({url:"/auth/entrance/quickLogin",method:"post",data:e})}function P(e){return Object(a["a"])({url:"/auth/enterprise/newEtaxToken",method:"post",data:e})}},"18af":function(e,t,r){"use strict";var a=r("1b68"),i=r.n(a);i.a},1996:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAAXNSR0IArs4c6QAAAC1QTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwaAoPgAAAA50Uk5TABAgQFBgf4CPkL/P3+8fkEwtAAAA8ElEQVRIx+2WPQrCQBCF1z8iSsTK2sbeEwRPIOI9AvEmuUDACwiewCNIuohFELTTvDNYBPHNZrZREZF8xQyBDzL7BrIxpkYQHmTX6AIRdxUfSLmrDIATd5vRBhWuS+m0cijcZkKaQ+XMTnOvS8WQpA4ccBJ9l7SWZz8bYzwgNs8eyLgewSRZ+Vx2Ky49vb+SQuBguCpSFwAirorkA0DK9VXJA4CYqzZ4AmSGa514nfg3d+eSeGtOiRfynsRbcw/Ou/uBMH3rhigJpNRzfey3JHkuaUFSI9ed29h6vcZFzNhW77JiKk8y2VWd46r+Cfo8dyDpvIi+ueZMAAAAAElFTkSuQmCC"},"19c5":function(e,t,r){},"1b68":function(e,t,r){},"1cb3":function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"p",(function(){return n})),r.d(t,"w",(function(){return o})),r.d(t,"u",(function(){return s})),r.d(t,"v",(function(){return c})),r.d(t,"e",(function(){return l})),r.d(t,"t",(function(){return u})),r.d(t,"A",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"z",(function(){return f})),r.d(t,"r",(function(){return g})),r.d(t,"o",(function(){return p})),r.d(t,"s",(function(){return h})),r.d(t,"b",(function(){return v})),r.d(t,"B",(function(){return b})),r.d(t,"q",(function(){return w})),r.d(t,"x",(function(){return _})),r.d(t,"c",(function(){return y})),r.d(t,"y",(function(){return x})),r.d(t,"f",(function(){return C})),r.d(t,"m",(function(){return T})),r.d(t,"n",(function(){return k})),r.d(t,"h",(function(){return S})),r.d(t,"k",(function(){return R})),r.d(t,"i",(function(){return $})),r.d(t,"l",(function(){return I})),r.d(t,"g",(function(){return j})),r.d(t,"j",(function(){return O}));var a=r("b775");function i(e,t){return Object(a["a"])({url:t,method:"post",data:e})}function n(e,t){return Object(a["a"])({url:t,method:"post",data:e})}function o(e,t){return Object(a["a"])({url:t,method:"post",data:e})}function s(e){return Object(a["a"])({url:"/auth/user/second/sendSmsCodeByUuid",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/auth/user/second/smsCodeLogin",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/auth/qrcodeLogin/second/createQRcode",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/auth/agency/qrcodeLogin",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/auth/qrcodeLogin/second/verifyQRCode",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/auth/qrcodeAuth/second/createMulQRcode",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/auth/qrcodeAuth/second/verifyQRCode",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/auth/agency/mulQrcodeLogin",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/auth/qrCodeAuthApp/getQrCode",method:"post",data:e})}function h(e){return Object(a["a"])({url:"/auth/qrCodeAuthApp/qrCodeAuthAppLoginByEwmEA",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/auth/user/single/accountSendSmsCode",method:"post",data:e})}function b(e,t){return Object(a["a"])({url:t,method:"post",data:e})}function w(e){return Object(a["a"])({url:"/auth/user/first/idCardSmsCodeLogin",method:"post",data:e})}function _(e){return Object(a["a"])({url:"/auth/user/first/userNameSmsCodeLogin",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/auth/qrcodeLogin/second/createItsQRcode",method:"post",data:e})}function x(e){return Object(a["a"])({url:"/auth/qrcodeLogin/verifyItsQRCode",method:"post",data:e})}function C(e,t){return Object(a["a"])({url:t,method:"post",data:e})}function T(e,t){return Object(a["a"])({url:"/auth/entrance/second/sendSmsCode",method:"post",data:e})}function k(e,t){return Object(a["a"])({url:"/auth/entrance/second/smsCodeLogin",method:"post",data:e})}function S(e,t){return Object(a["a"])({url:"/auth/entrance/second/createMulQRcode",method:"post",data:e})}function R(e,t){return Object(a["a"])({url:"/auth/entrance/mulQrcodeLogin",method:"post",data:e})}function $(e,t){return Object(a["a"])({url:"/auth/entrance/second/createQRcode",method:"post",data:e})}function I(e,t){return Object(a["a"])({url:"/auth/entrance/qrcodeLogin",method:"post",data:e})}function j(e,t){return Object(a["a"])({url:"/auth/entrance/second/createItsQRcode",method:"post",data:e})}function O(e,t){return Object(a["a"])({url:"/auth/entrance/ItsQrcodeLogin",method:"post",data:e})}},2017:function(e,t,r){"use strict";var a=r("c961"),i=r.n(a);i.a},2107:function(e,t,r){"use strict";var a=r("97f6"),i=r.n(a);i.a},2580:function(e,t,r){},2594:function(e,t,r){"use strict";var a=r("99fc"),i=r.n(a);i.a},"2a11":function(e){e.exports=JSON.parse('{"1100":{"http:":"https://10.104.106.24:8089","baseUrl":"https://127.0.0.1:21061","downUrl":"https://bjtax.bjca.org.cn/bjtax/index.html"},"3100":{"http:":"http://127.0.0.1:18455/sheca","baseUrl":"https://xk.sheca.com:18456/sheca","downUrl":"http://xkapp.sheca.com/pages/download.html"},"3300":{"http:":"http://115.238.48.66:28010/auth","baseUrl":"https://127.0.0.1:9819","downUrl":"https://zsfwpt.icinfo.cn/app/download.html"},"3302":{"http:":"https://auth-ukey.itrus.com.cn:8092","baseUrl":"https://localhost.itrus.com.cn:18132","downUrl":"https://www.nbca.com.cn/wt/ixin/"},"4100":{"http:":"https://hnswysc.henan.chinatax.gov.cn","baseUrl":"https://127.0.0.1:28588/api","downUrl":"https://etax.henan.chinatax.gov.cn/web/dzswj/downloads/CA.rar?v=20230926"},"4400":{"http:":"http://127.0.0.1:18455/sheca","baseUrl":"https://xk.sheca.com:18456/sheca","downUrl":"http://xkapp.sheca.com/pages/download.html"}}')},"2b0f":function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"e",(function(){return d})),r.d(t,"d",(function(){return m})),r.d(t,"i",(function(){return f})),r.d(t,"c",(function(){return g})),r.d(t,"h",(function(){return p})),r.d(t,"b",(function(){return h})),r.d(t,"g",(function(){return v})),r.d(t,"f",(function(){return b}));r("d3b7"),r("53ca"),r("c975");var a=r("bc3a"),i=r.n(a),n=r("5c96"),o=r("2a11"),s=i.a.create({baseURL:"",timeout:1e5});s.interceptors.request.use((function(e){return e.headers["Content-Type"]="application/json",e.baseURL=o[localStorage.getItem("areaPrefix")].baseUrl,e}),(function(e){return Promise.reject(e)})),s.interceptors.response.use((function(e){var t=e.data;return 0!=t.code?(Object(n["Message"])({customClass:"el-icon-warning-color",message:t.msg||"Error",type:"warning",duration:5e3}),Promise.reject(new Error(t.msg||"Error"))):t}),(function(e){var t=!0;if(e&&e.response)if(500==e.response.status&&-1==e.response.data.code){if(e.message=e.response.data.msg,-1!=e.response.config.url.indexOf("checkKey"))return t=!1,Promise.resolve({code:-1,msg:e.message})}else{if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录";break;case 403:e.message="拒绝访问";break;case 404:e.message="请求地址出错: ".concat(e.response.config.url);break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持";break;default:break}else e&&e.stack&&e.stack.indexOf("handleTimeout")>=0?e.message="认证超时，请稍后重试":e.message="证书应用客户端未安装或未启动";e&&e.config}else e.message="证书应用客户端未安装或未启动";return t&&Object(n["Message"])({customClass:"el-icon-warning-color",message:e.message||"Error",type:"warning",duration:5e3}),Promise.reject({error:e,message:e.message})}));var c=s,l=r("b775");function u(e){return c({url:"/checkKey",method:"post",data:e})}function d(e){return c({url:"/getVersion",method:"post",data:e})}function m(){return c({url:"/getKeyList",method:"post"})}function f(e){return c({url:"/verifyPin",method:"post",data:e})}function g(e){return c({url:"/clientHello",method:"post",data:e})}function p(e){return Object(l["a"])({url:"/auth/cert/serverHelloCA",method:"post",data:e})}function h(e){return c({url:"/clientAuth",method:"post",data:e})}function v(e){return Object(l["a"])({url:"/auth/cert/serverAuthCA",method:"post",data:e})}function b(e){return c({url:"/readCertInfo",method:"post",data:e})}},"2f8b":function(e,t,r){},3019:function(e,t,r){},3245:function(e,t,r){"use strict";var a=r("e8bf"),i=r.n(a);i.a},"33e5":function(e,t,r){"use strict";var a=r("c788"),i=r.n(a);i.a},"340c":function(e,t,r){},"355e":function(e,t,r){},"35cc":function(e,t,r){},"35e2":function(e,t,r){"use strict";var a=r("3b7f"),i=r.n(a);i.a},"37b6":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.dialogVisible?r("div",[r("el-dialog",{attrs:{title:"用户协议","append-to-body":"",visible:e.dialogVisible,"close-on-press-escape":!1,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handle_close}},[r("div",[e.list.length?r("div",{staticClass:"user_agreement"},[r("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),e._v(" 我已同意并阅读 "),e._l(e.list,(function(t,a){return r("span",{key:t.agreementText,staticStyle:{color:"#4285F4"}},[r("span",{staticStyle:{cursor:"pointer"},on:{click:function(r){return e.handle_details(t)}}},[e._v("《"+e._s(t.agreementName)+"》")]),r("span",{staticStyle:{color:"#000"}},[e._v(e._s(a===e.list.length-1?"。":"、"))]),0===a?r("br"):e._e()])}))],2):e._e()]),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handle_confirm}},[e._v("确认")])],1)]),r("el-dialog",{attrs:{title:e.details?e.details.agreementName:"",visible:e.dialogAgreement,"close-on-click-modal":!1,"append-to-body":"",width:"813px"},on:{"update:visible":function(t){e.dialogAgreement=t}}},[r("div",{domProps:{innerHTML:e._s(e.details?e.details.agreementText:"")}}),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement=!1}}},[e._v("确 定")])],1)])],1):e._e(),r("updatepwdword",{ref:"updatepwdword",attrs:{showUpdatePwd:e.showUpdatePwd},on:{xiugaimima:e.xiugaimima}})],1)},i=[],n=(r("4160"),r("c975"),r("d81d"),r("159b"),r("96cf"),r("1da1")),o=r("1115"),s=r("35e0"),c=r("fc4b"),l=r("0a4f"),u=r("3352"),d=r("a023"),m={name:"signedAgreement",components:{updatepwdword:d["default"]},data:function(){return{details:null,list:[],checked:!0,dialogVisible:!1,dialogAgreement:!1,pageUserInfo:null,pagePath:"",loading:!1,curParams:Object(c["e"])(),clientId:Object(c["b"])(),cliState:Object(c["l"])(),showUpdatePwd:!1}},computed:{redirectURI:function(){var e=Object(c["j"])();return e}},methods:{xiugaimima:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e,t.next=3,Object(l["b"])();case 3:a=t.sent,i="en_US"===sessionStorage.getItem("lang")?"&lang=en_US":"",a?(n=a.indexOf("?")>=0?"&code=":"?code=",window.location.href=a+n+e.pageRes.datagram.code+(r.cliState?"&state="+r.cliState:"")+i):r.redirectURI?e.checkUrl():e.noRedirectUrl();case 6:case"end":return t.stop()}}),t)})))()},checkUrl:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e,a="en_US"===sessionStorage.getItem("lang")?"&lang=en_US":"",t.prev=2,t.next=5,Object(s["a"])({redirect_uri:e.redirectURI});case 5:if(i=t.sent,!i||"0"!==i.datagram.yxbz){t.next=9;break}return e.noRedirectUrl(),t.abrupt("return");case 9:t.next=15;break;case 11:return t.prev=11,t.t0=t["catch"](2),e.noRedirectUrl(),t.abrupt("return");case 15:n=r.redirectURI.indexOf("?")>=0?"&code=":"?code=",window.location.href=r.redirectURI+n+e.pageRes.datagram.code+(r.cliState?"&state="+r.cliState:"")+a;case 17:case"end":return t.stop()}}),t,null,[[2,11]])})))()},noRedirectUrl:function(){var e=this;if("twoPath"===this.pagePath){var t=localStorage.getItem("userType");1==t?e.$router.push("/userCenter/baseInfoP"):2==t&&e.$router.push("/userCenter/baseInfoEE")}else e.$router.push(this.pagePath)},handle_close:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:localStorage.removeItem("token"),e.$cookie.remove("token"),location.reload();case 3:case"end":return t.stop()}}),t)})))()},handle_confirm:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e,e.checked){t.next=4;break}return e.$message.warning("请阅读并同意勾选".concat(e.list.map((function(e){return"《"+e.agreementName+"》"})),"后完成登录")),t.abrupt("return",!1);case 4:e.loading=!0,e.list.forEach(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r,a){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=!1,t.prev=1,t.next=4,Object(u["k"])({uid:e.pageUserInfo.user_id,agreementCode:r.agreementCode,agreementVersion:r.agreementVersion});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),i=!0;case 9:if(!i){t.next=11;break}return t.abrupt("return",!1);case 11:if(!e.pageRes.datagram.changeFlag){t.next=14;break}return e.$emit("handleChangeFlag"),t.abrupt("return");case 14:if(e.list.length-1!=a){t.next=20;break}if(setTimeout((function(){e.loading=!1}),8e3),"0"!=e.pageUserInfo.isHavePsw){t.next=19;break}return e.showUpdatePwd=!0,t.abrupt("return",!1);case 19:e.xiugaimima();case 20:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,r){return t.apply(this,arguments)}}());case 6:case"end":return t.stop()}}),t)})))()},handle_details:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(u["e"])({agreementCode:e.agreementCode,agreementVersion:e.agreementVersion});case 2:a=r.sent,"1000"==a.code&&(t.details={agreementText:a.datagram.agreementText,agreementName:a.datagram.agreementName},t.dialogAgreement=!0);case 4:case"end":return r.stop()}}),r)})))()},handle_jump_before:function(e,t,r){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var n,s,c,l;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a.$store.dispatch("app/stopCallingQR",!0),a.list=[],a.pageUserInfo=t,a.pagePath=r,a.pageRes=e,a,t||(t=JSON.parse(Object(o["a"])(localStorage.getItem("userinfo"))),a.pageUserInfo=t),localStorage.setItem("token",e.datagram.access_token),a.$cookie.set("token",e.datagram.access_token),localStorage.setItem("code",e.datagram.code),n={uid:t.user_id},"1"==t.overseas&&(n={agreementCode:"02",uid:t.user_id}),i.next=14,Object(u["f"])(n);case 14:if(s=i.sent,c=!1,"1000"!=s.code){i.next=46;break}if(!s.datagram.length){i.next=44;break}l=0;case 19:if(!(l<=s.datagram.length)){i.next=42;break}if(!s.datagram[l]){i.next=26;break}if("0"!=s.datagram[l].signingStatus){i.next=26;break}if("1500"!=t.areaPrefix||"01"!=s.datagram[l].agreementCode){i.next=24;break}return i.abrupt("continue",39);case 24:c=!0,a.list.push({agreementName:s.datagram[l].agreementName,agreementCode:s.datagram[l].agreementCode,agreementVersion:s.datagram[l].agreementVersion});case 26:if(s.datagram.length-1!=l){i.next=39;break}if(setTimeout((function(){a.$store.dispatch("app/getIdentityLoad",!1)}),8e3),!c){i.next=32;break}a.dialogVisible=!0,i.next=39;break;case 32:if(!a.pageRes.datagram.changeFlag){i.next=35;break}return a.$emit("handleChangeFlag"),i.abrupt("return");case 35:if("0"!=a.pageUserInfo.isHavePsw){i.next=38;break}return a.showUpdatePwd=!0,i.abrupt("return",!1);case 38:a.xiugaimima();case 39:l++,i.next=19;break;case 42:i.next=46;break;case 44:setTimeout((function(){a.$store.dispatch("app/getIdentityLoad",!1)}),8e3),a.xiugaimima();case 46:case"end":return i.stop()}}),i)})))()}}},f=m,g=(r("8e1b"),r("2877")),p=Object(g["a"])(f,a,i,!1,null,"08dea600",null);t["default"]=p.exports},"37e9":function(e,t,r){},3899:function(e,t,r){},"3a15":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[r("div",{staticClass:"form"},["isActiveSmsCodeLogin"==e.activeLoginType?r("special-login",{attrs:{logConfig:e.logConfig}}):e._e()],1)])},i=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{prop:"byhSelect"}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-select",{staticClass:"zjTypeSelect",staticStyle:{width:"100%"},attrs:{placeholder:"请选择特定主体类型"},on:{change:e.changeSelect},model:{value:e.form.byhSelect,callback:function(t){e.$set(e.form,"byhSelect",t)},expression:"form.byhSelect"}},e._l(e.byhList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),a("el-form-item",{attrs:{prop:"creditCode"}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-autocomplete",{staticClass:"socialInp",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"统一社会信用代码/纳税人识别号"},model:{value:e.form.creditCode,callback:function(t){e.$set(e.form,"creditCode","string"===typeof t?t.trim():t)},expression:"form.creditCode"}})],1)],1),a("el-form-item",{attrs:{prop:"account"}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-input",{staticClass:"mobileInp",staticStyle:{width:"100%"},attrs:{placeholder:"居民身份证号码/手机号码/用户名"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account","string"===typeof t?t.trim():t)},expression:"form.account"}})],1)],1),e.logConfig.firstStep.length>1?a("div",{staticClass:"justifyCenter"},[a("el-radio-group",{staticStyle:{"margin-bottom":"20px"},model:{value:e.loginType,callback:function(t){e.loginType=t},expression:"loginType"}},e._l(e.logConfig.firstStep,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1):e._e(),0==e.loginType?a("div",[a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"password"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLock,expression:"showCapsLock"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-row",{staticStyle:{width:"100%"}},[a("el-input",{staticClass:"pwdInp",staticStyle:{width:"100%"},attrs:{"auto-complete":"new-password",type:e.eyesFlag?"text":"password",maxlength:"20",placeholder:e.placeHolderPwd},on:{focus:function(t){e.showTemptip=!0},blur:e.capsBlur},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}},[e.eyesFlag?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"})])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTemptip,expression:"showTemptip"}],staticClass:"form-temp-tip"},[e._v("请输入"),a("span",[e._v("个人")]),e._v("用户密码")])],1):e._e(),1==e.loginType?a("div",[a("el-form-item",{attrs:{prop:"smsCode"}},[a("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[a("el-input",{staticClass:"smsInp",attrs:{maxlength:"6","auto-complete":"new-password",placeholder:"请输入短信验证码"},model:{value:e.form.smsCode,callback:function(t){e.$set(e.form,"smsCode","string"===typeof t?t.trim():t)},expression:"form.smsCode"}}),a("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1)],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.slideType,expression:"slideType"}]},[a("el-row",{staticStyle:{width:"100%"}},[a("el-col",[a("sliderValidate",{ref:"sliderValidate",attrs:{status:e.validate_status},on:{"update:status":function(t){e.validate_status=t}}})],1)],1)],1),a("el-row",{staticStyle:{width:"100%"}},[a("el-col",[a("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1),e.visibleApply?a("apply-for-inspection-login",{ref:"applyForInspectionLogin",attrs:{visibleApply:e.visibleApply,initData:e.initData},on:{"update:visibleApply":function(t){e.visibleApply=t},"update:visible-apply":function(t){e.visibleApply=t},getLoginNext:e.getLoginNext}}):e._e(),e.visibleRegister?a("tax-fund-register",{ref:"taxFundRegister",attrs:{visibleRegister:e.visibleRegister,initData:e.initData},on:{"update:visibleRegister":function(t){e.visibleRegister=t},"update:visible-register":function(t){e.visibleRegister=t},getLoginNext:e.getLoginNext}}):e._e()],1)],1),a("el-dialog",{attrs:{title:e.agreementName,visible:e.dialogAgreement,"append-to-body":"","close-on-click-modal":!1,width:"813px"},on:{"update:visible":function(t){e.dialogAgreement=t}}},[a("div",{domProps:{innerHTML:e._s(e.agreementText)}}),a("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement=!1}}},[e._v("确 定")])],1)]),a("IDTypeShoose",{ref:"IDTypeShoose",on:{tempRelatedType:e.tempRelatedType}}),a("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),a("signedagreement",{ref:"signedagreement"}),a("qr-code",{ref:"qrCode",on:{handleServiceAgreement:e.handleServiceAgreement,submitA:e.submitA,handleClose:e.handleClose}}),e.slideType?e._e():a("slideVerify",{ref:"slideVerify",on:{handleStatus:e.handle_validate_status}})],1)},o=[],s=(r("4de4"),r("c975"),r("45fc"),r("5530")),c=(r("96cf"),r("1da1")),l=r("a78e"),u=r.n(l),d=r("ed08"),m=r("986e"),f=r("fc4b"),g=r("bfa8"),p=r("3352"),h=(r("1115"),r("0a4f")),v=r("cf45"),b=r("abd2"),w=r("56d6"),_=r("549d"),y=r("cb61"),x=r("37b6"),C=r("457b"),T=r("05ec"),k=r("c7e3"),S=r("eb3b"),R=r("8eaa"),$=r("17dc"),I=r("e014"),j={mixins:[$["a"]],props:["logConfig"],components:{QrCode:C["a"],slideVerify:w["a"],IDTypeShoose:_["a"],fillForm:y["default"],signedagreement:x["default"],ApplyForInspectionLogin:S["a"],sliderValidate:I["a"],TaxFundRegister:R["a"]},data:function(){var e=function(e,t,r){Object(d["c"])(t)?r():r(new Error("您输入的统一社会信用代码或纳税人识别号有误，请重新输入"))};return{initData:{},visibleApply:!1,visibleRegister:!1,uuid:"",relatedType:"",showRelatedType:[],relationTypes:[],agreementText:"",agreementName:"",dialogAgreement:!1,checkTrustedLevel_:null,areaPrefix:"",is_TAB:!1,areaInfoData:[],areaName:"",showTemptip:!1,eyesFlag:!1,oldPwd:"",list:[],asddd:function(){},dialogVisible:!1,checked:!0,relatedTypes:b["e"],validate_status:!1,form:{byhSelect:"",creditCode:"",account:"",password:"",smsCode:""},loginType:null,clientId:Object(f["b"])(),redirectURI:Object(f["j"])(),cliState:Object(f["l"])(),smscode_id:"",smsUuid:"",loginLoading:!1,value:!1,rules:{smsCode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}],byhSelect:[{required:!0,message:"请选择登录主体类型",trigger:"change"}],creditCode:[{required:!0,message:"请输入统一社会信用代码/纳税人识别号"},{min:0,max:20,message:"社会信用代码/纳税人识别号长度不超过20位",trigger:"blur"},{validator:e}],account:[{required:!0,message:"请输入居民身份证号码/手机号码/用户名",trigger:"blur"}],password:[{required:!0,message:"请输入个人用户密码",trigger:"blur"}]},buttonName:"获取验证码",getCodeDisabled:!1,time:119,interval:"",restaurants:[]}},watch:{logConfig:{handler:function(e){e&&(this.loginType=e.firstStep[0].value)},deep:!0,immediate:!0},time:{handler:function(e){e<0&&(this.buttonName="重新发送",this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0},loginType:function(e){this.$refs.form.clearValidate(["smsCode","password"])}},beforeDestroy:function(){clearInterval(this.interval),this.interval=null},methods:{handle_validate_status:function(e){this.validate_status=e,this.login()},handleClose:function(){localStorage.removeItem("token"),this.$cookie.remove("token"),location.reload()},querySearch:function(e,t){var r=this.restaurants,a=e?r.filter(this.createFilter(e)):r;t(a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},closeFillForm:function(){location.reload()},changeSelect:function(e){this.smscode_id="",this.smsUuid="",this.form.smsCode="",clearInterval(this.interval),this.interval=null,this.time=119,this.getCodeDisabled=!1,this.buttonName="获取验证码"},getNewStatus:function(e){this.validate_status=e},getValidCode:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,r.form.creditCode){t.next=4;break}return e.$message.warning("请先填写正确的统一社会信用代码/纳税人识别号"),t.abrupt("return");case 4:if(r.form.account){t.next=7;break}return e.$message.warning("请先填写正确的手机号码/居民身份证号码/用户名"),t.abrupt("return");case 7:if(!r.getCodeDisabled){t.next=10;break}return e.$message.warning("请勿重复发送验证码！"),t.abrupt("return");case 10:a="09",e.$store.state.settings.logConfig&&e.$store.state.settings.logConfig.enterpriseStatusList&&(a=""),i={account:r.form.account,creditCode:r.form.creditCode,client_id:r.clientId,redirect_uri:r.redirectURI,type:r.form.byhSelect,enterpriseStatus:a},r.getCodeDisabled=!0,r.time=119,r.buttonName="120s",r.interval=window.setInterval((function(){r.buttonName=r.time+"s",--r.time}),1e3),1==e.logConfig.isStepTwo?e.getSmsCodeTwrice(i):e.getSmsCodeSinger(i);case 18:case"end":return t.stop()}}),t)})))()},getSmsCodeTwrice:function(e){var t=this,r=this;Object(g["i"])(e).then((function(e){1e3===e.code?(r.smscode_id=e.datagram.smscode_id,r.smsUuid=e.datagram.uuid,t.$message.success("短信验证码成功发送到"+e.datagram.mobile)):(clearInterval(r.interval),r.getCodeDisabled=!1,r.buttonName="获取验证码")})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"}))},getSmsCodeSinger:function(e){var t=this,r=this;Object(g["d"])(e).then((function(e){1e3===e.code?(r.smscode_id=e.datagram.smscode_id,r.smsUuid=e.datagram.uuid,t.$message.success("短信验证码成功发送到"+e.datagram.mobile)):(clearInterval(r.interval),r.getCodeDisabled=!1,r.buttonName="获取验证码")})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"}))},submitA:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={uid:e.checkTrustedLevel_.uid,fid:e.checkTrustedLevel_.fid,relatedType:e.relatedType,reg_number:e.checkTrustedLevel_.reg_number,qrCode_id:e.$refs.qrCode.qrCode_id},t.next=3,Object(k["e"])(r);case 3:return t.next=5,e.push_login();case 5:case"end":return t.stop()}}),t)})))()},handleServiceAgreement:function(){this.dialogAgreement=!0},handle_authorize:function(){var e=this,t=this;if(!this.is_TAB)return t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(this.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,void t.$refs.qrCode.creatVerifyQRCode("1");Object(p["f"])({uid:this.checkTrustedLevel_.uid,agreementCode:"03"}).then((function(r){"1000"==r.code&&(Object(p["e"])({agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(t){"1000"==t.code&&(e.agreementText=t.datagram.agreementText,e.agreementName=t.datagram.agreementName)})),"0"==r.datagram[0].signingStatus?(e.$alert('<p>您尚未签订<span style="color:#4285F4;cursor:pointer;" id="service_agreement">《'.concat(r.datagram[0].agreementName,"》</span>，请先阅读协议并确认是否同意签订。如果您不同意，您可持有效身份证件前往线下办税服务场所办理业务。</p>"),"提示",{dangerouslyUseHTMLString:!0,showCancelButton:!0,showConfirmButton:!0,cancelButtonText:"不同意",confirmButtonText:"同意",cancelButtonClass:"my_cancelButtonClass",confirmButtonClass:"my_confirmButtonClass"}).then((function(){Object(p["k"])({uid:e.checkTrustedLevel_.uid,agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(r){"1000"==r.code&&(t.$refs.qrCode.row2=t.form,t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(e.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,t.$refs.qrCode.creatVerifyQRCode("1"))}))})).catch((function(){t.$refs.qrCode.dialogVisible=!1})),e.$nextTick((function(){var t=document.querySelector("#service_agreement");t.onclick=e.handleServiceAgreement}))):"1"==r.datagram[0].signingStatus&&(t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(e.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,t.$refs.qrCode.creatVerifyQRCode("1")))}))},tempRelatedType:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.relatedType=e.relatedType,t,"00"!=e.qrzt?t.$confirm("是否确认成为该企业的"+e.relatedTypeName+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(c["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={relatedType:e.relatedType,client_id:t.clientId,redirect_uri:t.redirectURI,uuid:t.uuid},Object(g["t"])(a).then(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:setTimeout((function(){t.$store.dispatch("app/getIdentityLoad",!1)}),8e3),"N"===r.datagram.sfsl?(localStorage.setItem("token",r.datagram.access_token),t.$cookie.set("token",r.datagram.access_token),t.checkTrustedLevel_=r.datagram,t.handle_authorize()):t.push_login();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})))).catch(Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:setTimeout((function(){t.$store.dispatch("app/getIdentityLoad",!1)}),8e3);case 1:case"end":return e.stop()}}),e)})))):t.push_login();case 3:case"end":return r.stop()}}),r)})))()},push_login:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(v["a"])(1);case 6:r=e,Object(g["a"])({client_id:r.clientId,redirect_uri:r.redirectURI,relatedType:e.relatedType,uuid:e.uuid}).then(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var a,i,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1e3!==t.code){e.next=15;break}return e.next=3,Object(h["a"])(t.datagram.access_token);case 3:if(a=e.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){e.next=12;break}return r.handle_jump_before(t,o),e.abrupt("return");case 12:return r.$refs.fillformDialog.fillForm=i,r.$refs.fillformDialog.fillFormVisible=!0,e.abrupt("return");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t)})))()},login:function(){var e=this,t=this;t.loginLoading||(localStorage.removeItem("token"),this.$cookie.remove("token"),t.$refs.form.validate(function(){var r=Object(c["a"])(regeneratorRuntime.mark((function r(a){var i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=20;break}if(1!=e.loginType||e.smscode_id){r.next=4;break}return e.$message.warning("请先获取验证码！"),r.abrupt("return");case 4:if(e.validate_status||e.slideType){r.next=9;break}return e.$refs.slideVerify.visible=!0,r.abrupt("return");case 9:if(e.validate_status||!e.slideType){r.next=12;break}return e.$message.warning("请先进行滑块验证！"),r.abrupt("return");case 12:t.loginLoading=!0,localStorage.setItem("clientId",t.clientId),i="09",e.$store.state.settings.logConfig&&e.$store.state.settings.logConfig.enterpriseStatusList&&(i=""),n={client_id:t.clientId,redirect_uri:t.redirectURI,type:t.form.byhSelect,creditCode:t.form.creditCode,account:t.form.account,password:t.form.password,enterpriseStatus:i},o={client_id:t.clientId,smsCode:t.form.smsCode,smscode_id:t.smscode_id,uuid:t.smsUuid,redirect_uri:t.redirectURI},e.loginLoading=!0,1==e.logConfig.isStepTwo?0==e.loginType?e.twinPwd(n):e.twinSms(o):0==e.loginType?e.singlePwd(n):e.singleSms(o);case 20:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()))},handle_jump_before:function(e,t){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.setCreditCodeList(),r.$refs.signedagreement.handle_jump_before(e,t,"/userCenter/baseInfoEE");case 2:case"end":return a.stop()}}),a)})))()},init:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(T["h"])({}).then((function(t){e.relationTypes=t.datagram})).catch((function(){}));case 2:case"end":return t.stop()}}),t)})))()},showRelatedTypeName:function(e){for(var t=0;t<this.relationTypes.length;t++)if(this.relationTypes[t].relationTypeCode===e)return this.relationTypes[t].relationTypeName},getLoginNext:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.bz="0"===e.datagram.bz,r.next=3,Object(h["a"])(e.datagram.access_token);case 3:if(a=r.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){r.next=12;break}return t.handle_jump_before(e,o),r.abrupt("return");case 12:return t.$refs.fillformDialog.fillForm=i,t.$refs.fillformDialog.fillFormVisible=!0,r.abrupt("return");case 15:case"end":return r.stop()}}),r)})))()},singleHandleRes:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,i,n,o,s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1e3!==e.code){r.next=40;break}if(e.datagram.access_token){r.next=25;break}if(t.uuid=e.datagram.uuid,!(e.datagram.relationPoList&&e.datagram.relationPoList.length>0)){r.next=22;break}if(1!==e.datagram.relationPoList.length){r.next=11;break}return r.next=7,t.init();case 7:return r.next=9,t.tempRelatedType({qrzt:e.datagram.relationPoList[0].qrzt,relatedType:e.datagram.relationPoList[0].zrrlx,relatedTypeName:t.showRelatedTypeName(e.datagram.relationPoList[0].zrrlx)});case 9:r.next=20;break;case 11:for(a=[],i=0;i<e.datagram.relationPoList.length;i++)a.push(e.datagram.relationPoList[i].zrrlx);return t.$refs.IDTypeShoose.showRelatedType=a,t.$refs.IDTypeShoose.relationPoList=e.datagram.relationPoList,t.$refs.IDTypeShoose.uuid=t.uuid,t.$refs.IDTypeShoose.relatedType=a[0],r.next=19,t.$refs.IDTypeShoose.init();case 19:t.$refs.IDTypeShoose.IDTypeVisible=!0;case 20:r.next=23;break;case 22:"1"==t.form.byhSelect?(t.initData=e.datagram,t.visibleApply=!0):"2"==t.form.byhSelect&&(t.initData=e.datagram,t.visibleRegister=!0);case 23:r.next=40;break;case 25:return t.bz="0"===e.datagram.bz,r.next=28,Object(h["a"])(e.datagram.access_token);case 28:if(n=r.sent,o=n.userformInfo,s=n.pass,c=n.userInfo,!s){r.next=37;break}return t.handle_jump_before(e,c),r.abrupt("return");case 37:return t.$refs.fillformDialog.fillForm=o,t.$refs.fillformDialog.fillFormVisible=!0,r.abrupt("return");case 40:case"end":return r.stop()}}),r)})))()},twinSms:function(e){var t=this;Object(g["j"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),t.loginLoading=!1,t.validate_status=!1}),8e3);var r=null;t.logConfig.firstStep.some((function(a){if(a.value==t.loginType)return r=a.secondStep,r=Object(s["a"])(Object(s["a"])({},r),{},{uuid:e.datagram.uuid,mobile:e.datagram.mobile,byhSelect:t.form.byhSelect}),!0})),t.setCreditCodeList(),""==e.datagram.mobile&&t.$message({duration:5e3,message:"您的手机号码为空，请您通过“找回手机号码”功能修改成正确的手机号码；或通过扫码验证方式登录系统，并在账户中心的手机号码修改菜单中添加默认手机号码。",type:"warning"}),m["a"].$emit("toStepTwo","1",r)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),window.setTimeout((function(){t.loginLoading=!1,t.validate_status=!1}),100)}))},twinPwd:function(e){var t=this;Object(g["h"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),t.loginLoading=!1,t.validate_status=!1}),8e3);var r=null;t.logConfig.firstStep.some((function(a){if(a.value==t.loginType)return r=a.secondStep,r=Object(s["a"])(Object(s["a"])({},r),{},{uuid:e.datagram.uuid,mobile:e.datagram.mobile,byhSelect:t.form.byhSelect}),!0})),t.setCreditCodeList(),""==e.datagram.mobile&&t.$message({duration:5e3,message:"您的手机号码为空，请您通过“找回手机号码”功能修改成正确的手机号码；或通过扫码验证方式登录系统，并在账户中心的手机号码修改菜单中添加默认手机号码。",type:"warning"}),m["a"].$emit("toStepTwo","1",r)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),window.setTimeout((function(){t.loginLoading=!1,t.validate_status=!1}),100)}))},singlePwd:function(e){var t=this;Object(g["b"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),t.loginLoading=!1,t.validate_status=!1}),8e3),t.singleHandleRes(e)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),window.setTimeout((function(){t.loginLoading=!1,t.validate_status=!1}),100)}))},singleSms:function(e){var t=this;Object(g["c"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),t.loginLoading=!1,t.validate_status=!1}),8e3),t.singleHandleRes(e)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),window.setTimeout((function(){t.loginLoading=!1,t.validate_status=!1}),100)}))},setCreditCodeList:function(){var e=this,t=this.restaurants.some((function(t){if(t.value==e.form.creditCode)return!0}));t||(this.restaurants.push({value:this.form.creditCode}),u.a.set("E-SPECIAL-CCLIST",JSON.stringify(this.restaurants)))}},computed:{byhList:function(){var e,t=[];return(null===(e=this.$store.state.settings.logConfig)||void 0===e?void 0:e.specialLoginList)&&(t=this.$store.state.settings.logConfig.specialLoginList),t},slideType:function(){var e=!1;return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].sliderValidateOld&&(e=this.$store.state.settings.logConfig.switch[0].sliderValidateOld),e},placeHolderPwd:function(){var e={5100:!0,3702:!0,1200:!0,1400:!0,4500:!0,2102:!0};return e[this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix]?"个人用户密码(初始密码为证件号码后六位)":"个人用户密码"}},mounted:function(){"3100"===localStorage.getItem("areaPrefix")&&(this.is_TAB=!0),this.restaurants=u.a.get("E-SPECIAL-CCLIST")?JSON.parse(u.a.get("E-SPECIAL-CCLIST")):[]}},O=j,q=(r("9019"),r("2877")),L=Object(q["a"])(O,n,o,!1,null,"81026d92",null),A=L.exports,D={components:{specialLogin:A},props:["logConfig"],data:function(){return{activeLoginType:"isActiveSmsCodeLogin"}},mounted:function(){},methods:{toSpecialLogin:function(){this.$emit("toSpecialLogin")}}},P=D,N=(r("8f80"),Object(q["a"])(P,a,i,!1,null,"c019e7a4",null));t["default"]=N.exports},"3b7f":function(e,t,r){},"3be6":function(e,t,r){},"3c38":function(e,t,r){"use strict";var a=r("e9c7"),i=r.n(a);i.a},"3cb3":function(e,t,r){},"3cb7":function(e,t,r){"use strict";r.d(t,"q",(function(){return i})),r.d(t,"t",(function(){return n})),r.d(t,"n",(function(){return o})),r.d(t,"h",(function(){return s})),r.d(t,"a",(function(){return c})),r.d(t,"p",(function(){return l})),r.d(t,"i",(function(){return u})),r.d(t,"b",(function(){return d})),r.d(t,"c",(function(){return m})),r.d(t,"k",(function(){return f})),r.d(t,"g",(function(){return g})),r.d(t,"r",(function(){return p})),r.d(t,"f",(function(){return h})),r.d(t,"o",(function(){return v})),r.d(t,"j",(function(){return b})),r.d(t,"d",(function(){return w})),r.d(t,"l",(function(){return _})),r.d(t,"e",(function(){return y})),r.d(t,"m",(function(){return x})),r.d(t,"s",(function(){return C}));var a=r("b775");function i(e){return Object(a["a"])({url:"/auth/agency/quick/passwordLoginTwo",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/auth/agency/sendSmsCode",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/auth/agency/user/login",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/auth/agency/enterpriseList",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/auth/agency/quick/accountLogin",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/auth/agency/passwordLogin",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/auth/agency/quick/factorAccountLogin",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/auth/agency/SmsMessageLogin",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/auth/agency/quick/accountSendSmsCode",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/auth/agency/quick/factorAccountVerifySmsCode",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/auth/agency/cert/createQRcode",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/auth/agency/cert/qrcodeLogin",method:"post",data:e})}function h(e){return Object(a["a"])({url:"/auth/agency/cert/createMulQRcode",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/auth/agency/cert/mulQrcodeLogin",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/auth/agency/quick/factorAccountSendSmsCode",method:"post",data:e})}function w(e){return Object(a["a"])({url:"/auth/qrcodeAuth/second/createItsQRcode",method:"post",data:e})}function _(e){return Object(a["a"])({url:"/auth/agency/itsQrcodeLogin",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/auth/agency/cert/createItsQRcode",method:"post",data:e})}function x(e){return Object(a["a"])({url:"/auth/agency/cert/itsQrcodeLogin",method:"post",data:e})}function C(e){return Object(a["a"])({url:"/auth/agency/quick/login",method:"post",data:e})}},"3e6f":function(e,t,r){},"3eb0":function(e,t,r){"use strict";var a=r("51c1"),i=r.n(a);i.a},"3f41":function(e,t,r){"use strict";var a=r("7da6"),i=r.n(a);i.a},"3f84":function(e,t,r){},4295:function(e,t,r){"use strict";var a=r("3cb3"),i=r.n(a);i.a},4570:function(e,t,r){"use strict";var a=r("b757"),i=r.n(a);i.a},4869:function(e,t,r){},"48ad":function(e,t,r){},"497e":function(e,t,r){"use strict";var a=r("e0b7"),i=r.n(a);i.a},"4d03":function(e,t,r){"use strict";var a=r("e4a3"),i=r.n(a);i.a},"4e37":function(e,t,r){"use strict";var a=r("ac66"),i=r.n(a);i.a},"509b":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"left"}},[a("el-dialog",{staticClass:"choosedCls",attrs:{visible:e.dialogVisible,fullscreen:!0,showClose:!1,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[a("div",{staticStyle:{"font-size":"1.125rem","margin-bottom":"1.25rem","font-weight":"bold"}},[e._v(" 选择被代理企业 ")]),a("el-row",[a("el-form",{attrs:{model:e.form,inline:!0}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"mr36"},[a("el-form-item",{attrs:{label:"统一社会信用代码"}},[a("el-input",{staticStyle:{width:"15.625rem"},attrs:{clearable:!0,autocomplete:"off",placeholder:"请输入统一社会信用代码"},model:{value:e.form.creditCode,callback:function(t){e.$set(e.form,"creditCode",t)},expression:"form.creditCode"}})],1)],1),a("div",{staticClass:"mr36"},[a("el-form-item",{attrs:{label:"纳税人名称"}},[a("el-input",{attrs:{autocomplete:"off",clearable:!0,placeholder:"请输入纳税人名称"},model:{value:e.form.enterpriseName,callback:function(t){e.$set(e.form,"enterpriseName",t)},expression:"form.enterpriseName"}})],1)],1),a("div",{staticClass:"mr36"},[a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.flag,callback:function(t){e.$set(e.form,"flag",t)},expression:"form.flag"}},[a("el-option",{key:1,attrs:{label:"有效",value:!0}}),a("el-option",{key:2,attrs:{label:"无效",value:!1}})],1)],1)],1),a("div",{staticClass:"mr36"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmitQuery}},[e._v("查询")]),a("el-button",{staticClass:"greyButton",on:{click:e.handleClose}},[e._v("返回")])],1)],1)]),a("div",[e.taxIntermediaryPlatform?a("div",[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handle_tax_related_platform}},[e._v("涉税中介机构平台")])],1)],1):e._e()])])])],1),a("el-table",{ref:"multipleTable",staticClass:"tableContent",staticStyle:{width:"100%"},attrs:{data:e.gridData,align:"center"}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[a("img",{attrs:{src:r("275d")}}),a("div",{staticStyle:{color:"rgba(0,0,0,0.65)","font-size":"16px","font-weight":"Medium"}},[e._v("暂无数据")])]),a("el-table-column",{attrs:{type:"index",width:"80",align:"center",label:"序号",index:e.getIndex()}}),a("el-table-column",{attrs:{property:"uniqueIdentity",align:"center",label:"统一社会信用代码/纳税人识别号"}}),a("el-table-column",{attrs:{property:"enterpriseName",align:"center",label:"纳税人名称"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.yxbz?"有效":"无效"))])]}}])}),a("el-table-column",{attrs:{align:"center",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"cz-box"},[t.row.yxbz?a("el-button",{attrs:{type:"text",loading:e.loadingDl},on:{click:function(r){return e.handleAgentLogin(t.row)}}},[e._v("进入")]):e._e()],1)]}}])})],1),a("el-row",{staticClass:"page-bar",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticStyle:{display:"flex","justify-content":"flex-end",padding:"10px 0"}},[a("el-pagination",{attrs:{"current-page":e.pagenum,"page-sizes":[10,20,30,40,50],"page-size":e.pagesize,background:"",layout:"total,sizes, prev, pager, next,jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),a("IDTypeShoose",{ref:"IDTypeShoose",on:{tempRelatedType:e.tempRelatedType}})],1)},i=[],n=(r("4de4"),r("4160"),r("c975"),r("ac1f"),r("1276"),r("159b"),r("96cf"),r("1da1")),o=r("3cb7"),s=r("abd2"),c=r("549d"),l=r("fc4b"),u={components:{IDTypeShoose:c["a"]},props:{visible:Boolean,agentListData:{required:!0},pageSize:{required:!0},pageNum:{required:!0},uuid:{type:String,default:""}},data:function(){return{areaPrefix:"",taxIntermediaryPlatform:"",clientId:Object(l["b"])(),redirectURI:Object(l["j"])(),currentItem:{},loadingDl:!1,gridData:[],dialogVisible:this.visible,checkList:[],pagenum:this.pageNum,pagesize:this.pageSize,lastUuid:this.uuid,total:0,form:{creditCode:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:"",flag:!0},relatedTypes:s["e"],gridDataClone:[],tempRelatedTypeValue:""}},mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=window.location.href.split("?")[1],t&&t.split("&").forEach((function(e){if("client_type=client"===e){var t=new Image,r="http://127.0.0.1:18604";t.src=r+"?form_height=625&form_width=1366&newGet="+Math.floor(1e5*Math.random())}})),this.init();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{handle_tax_related_platform:function(){var e=this;Object(o["s"])({client_id:this.clientId,redirect_uri:this.redirectURI,uuid:this.uuid}).then((function(t){1e3===t.code&&window.open(e.taxIntermediaryPlatform+t.datagram.code,"_blank")}))},handle_cancel:function(){location.reload()},handleClose:function(){var e=window.location.href.split("?")[1];e&&e.split("&").forEach((function(e){if("client_type=client"===e){var t=new Image,r="http://127.0.0.1:18604";t.src=r+"?form_height=556&form_width=674&newGet="+Math.floor(1e5*Math.random())}})),this.$emit("update:visible",!1)},relatedTypeFormat:function(e){var t="";return e&&this.relatedTypes.forEach((function(r){e===r.value&&(t=r.label)})),t},onSubmit:function(){var e=this,t=this,r={code:this.lastUuid,pageSize:this.pagesize,pageNum:this.pagenum,nsrmc:t.form.enterpriseName,shxydm:t.form.creditCode,flag:t.form.flag};Object(o["h"])(r).then((function(t){1e3===t.code&&(e.gridDataClone=JSON.parse(JSON.stringify(t.datagram.items)),e.gridData=e.objHeavy(t.datagram.items),e.total=t.datagram.total)})).catch((function(){e.gridData=[],e.gridDataClone=[],e.total=0,e.pagenum=1,e.pagesize=10}))},objHeavy:function(e){var t=[],r=[];for(var a in e)-1==t.indexOf(e[a].uniqueIdentity)&&(t.push(e[a].uniqueIdentity),r.push(e[a]));return r},onSubmitQuery:function(){var e=this,t=this;this.pagenum=1;var r={code:this.lastUuid,pageSize:this.pagesize,pageNum:this.pagenum,nsrmc:t.form.enterpriseName,shxydm:t.form.creditCode,flag:t.form.flag};Object(o["h"])(r).then((function(t){1e3===t.code&&(e.gridDataClone=JSON.parse(JSON.stringify(t.datagram.items)),e.gridData=e.objHeavy(t.datagram.items),e.total=t.datagram.total)})).catch((function(){e.gridData=[],e.gridDataClone=[],e.total=0,e.pagenum=1,e.pagesize=10}))},init:function(){var e=this;this.$store.state.settings.logConfig.areaInfoData.length&&(this.areaPrefix=this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix),this.$store.state.settings.logConfig.taxIntermediaryPlatform&&(this.taxIntermediaryPlatform=this.$store.state.settings.logConfig.taxIntermediaryPlatform[0].value),e.gridDataClone=JSON.parse(JSON.stringify(e.agentListData.items)),this.gridData=this.objHeavy(e.agentListData.items),e.total=e.agentListData.total},handleSizeChange:function(e){this.pagesize=e,this.getIndex(),this.onSubmit()},handleCurrentChange:function(e){this.pagenum=e,this.getIndex(),this.onSubmit()},prev:function(){this.pagenum--,this.getIndex(),this.onSubmit()},next:function(){this.pagenum++,this.getIndex(),this.onSubmit()},tempRelatedType:function(e){var t={uniqueIdentity:this.currentItem.uniqueIdentity,relatedType:e.relatedType};this.$emit("agentQuick",t)},handleAgentLogin:function(e){this.currentItem=e;var t=this.gridDataClone.filter((function(t){return t.uniqueIdentity===e.uniqueIdentity}))[0];if(t.relatedTypeList.length>1){for(var r=[],a=0;a<t.relatedTypeList.length;a++)r.push(t.relatedTypeList[a]);return this.$refs.IDTypeShoose.IDTypeVisible=!0,this.$refs.IDTypeShoose.showRelatedType=r,this.$refs.IDTypeShoose.relatedType=r[0],this.$refs.IDTypeShoose.init(),!1}var i={uniqueIdentity:e.uniqueIdentity,relatedType:e.relatedTypeList[0].relatedType};this.loadingDl=!0,this.$emit("agentQuick",i)},getIndex:function(){return(this.pagenum-1)*this.pagesize+1}}},d=u,m=(r("12b5"),r("2877")),f=Object(m["a"])(d,a,i,!1,null,"6a7fcbbc",null);t["a"]=f.exports},"51c1":function(e,t,r){},"53f8":function(e,t,r){},"549d":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"身份类型选择",visible:e.IDTypeVisible,"append-to-body":"","close-on-click-modal":!1,width:"29.375rem"},on:{close:e.close}},[r("el-row",{staticStyle:{width:"100%"}},[r("el-row",{staticClass:"boxFlex"},[r("el-radio-group",{staticStyle:{width:"100%"},model:{value:e.relatedType,callback:function(t){e.relatedType=t},expression:"relatedType"}},e._l(e.showRelatedType,(function(t,a){return r("el-radio",{key:a,staticClass:"el-radio-width",attrs:{label:t}},[e._v(e._s(e.showRelatedTypeName(t)))])})),1)],1)],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.$store.state.app.identityLoad},on:{click:e.submit}},[e._v("确认")])],1)],1)},i=[],n=(r("4160"),r("159b"),r("96cf"),r("1da1")),o=r("05ec"),s={data:function(){return{IDTypeVisible:!1,loginLoading:!1,relatedType:"",showRelatedType:[],relationTypes:[],relationPoList:[]}},mounted:function(){},methods:{init:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["h"])({}).then((function(t){e.relationTypes=t.datagram})).catch((function(){}));case 2:case"end":return t.stop()}}),t)})))()},showRelatedTypeName:function(e){for(var t=0;t<this.relationTypes.length;t++)if(this.relationTypes[t].relationTypeCode===e)return this.relationTypes[t].relationTypeName},submit:function(){this.$store.dispatch("app/getIdentityLoad",!0),this.getRelatedType()},getRelatedType:function(){var e=this,t="";this.relationPoList.forEach((function(r){r.zrrlx==e.relatedType&&(t=r.qrzt)})),this.$emit("tempRelatedType",{relatedType:this.relatedType,qrzt:t,relatedTypeName:this.showRelatedTypeName(this.relatedType)})},getRelatedTypeValue:function(){return this.relatedType},close:function(){location.reload()}}},c=s,l=(r("94a8"),r("2877")),u=Object(l["a"])(c,a,i,!1,null,"59270dda",null);t["a"]=u.exports},"561d":function(e,t,r){e.exports=r.p+"static/img/Q9.4911104f.png"},"601f":function(e,t,r){},6451:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.noLoginLink.length>0?r("div",{staticClass:"noNeedLogin_box"},[r("div",{staticClass:"noNeedLogin_icon"},[r("div",{directives:[{name:"show",rawName:"v-show",value:2===e.show,expression:"show===2"}],staticStyle:{position:"absolute",left:"-20px",cursor:"pointer"},on:{click:function(t){return e.handle_click(1)}}},[r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"85",viewBox:"0 0 20 85",fill:"none"}},[r("g",{attrs:{id:"asdasdqw1"}},[r("path",{attrs:{id:"Union",d:"M20 5V90C20 84.6957 17.8929 79.6086 14.1422 75.8578C13.2613 74.977 12.3068 74.1869 11.2931 73.4933C5.82321 69.7512 0 64.6274 0 58V37C0 30.3726 5.82322 25.2488 11.2931 21.5067C12.3068 20.8131 13.2613 20.023 14.1422 19.1421C17.8929 15.3914 20 10.3043 20 5Z",fill:"url(#paint0_linear_102_11)"}}),r("path",{attrs:{id:"Polygon 4",d:"M6.5 48.4199C5.83333 48.035 5.83333 47.0727 6.5 46.6878L12.5 43.2237C13.1667 42.8388 14 43.3199 14 44.0897L14 51.0179C14 51.7877 13.1667 52.2689 12.5 51.884L6.5 48.4199Z",fill:"#D0D0D0"}})]),r("defs",[r("linearGradient",{attrs:{id:"paint0_linear_102_11",x1:"8.375",y1:"47.5",x2:"28.375",y2:"47.5",gradientUnits:"userSpaceOnUse"}},[r("stop",{attrs:{offset:"0.177083","stop-color":"white"}}),r("stop",{attrs:{offset:"1","stop-color":"#F0F3F4"}})],1)],1)])]),r("div",{directives:[{name:"show",rawName:"v-show",value:1===e.show,expression:"show===1"}],staticStyle:{position:"absolute",left:"-20px",cursor:"pointer"},on:{click:function(t){return e.handle_click(2)}}},[r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"85",viewBox:"0 0 20 85",fill:"none"}},[r("g",{attrs:{id:"asdasdqw1"}},[r("path",{attrs:{id:"Union",d:"M20 0V85C20 79.6957 17.8929 74.6086 14.1422 70.8578C13.2613 69.977 12.3068 69.1869 11.2931 68.4933C5.82321 64.7512 0 59.6274 0 53V32C0 25.3726 5.82322 20.2488 11.2931 16.5067C12.3068 15.8131 13.2613 15.023 14.1422 14.1421C17.8929 10.3914 20 5.30434 20 0Z",fill:"url(#paint0_linear_404_23)"}}),r("path",{attrs:{id:"Polygon 4",d:"M12.5 41.6878C13.1667 42.0727 13.1667 43.0349 12.5 43.4198L6.5 46.8839C5.83333 47.2688 5 46.7877 5 46.0179L5 39.0897C5 38.3199 5.83333 37.8388 6.5 38.2237L12.5 41.6878Z",fill:"#D0D0D0"}})]),r("defs",[r("linearGradient",{attrs:{id:"paint0_linear_404_23",x1:"8.375",y1:"42.5",x2:"28.375",y2:"42.5",gradientUnits:"userSpaceOnUse"}},[r("stop",{attrs:{offset:"0.177083","stop-color":"white"}}),r("stop",{attrs:{offset:"1","stop-color":"#F0F3F4"}})],1)],1)])])]),e._m(0),e.noLoginLink.length>0?r("div",{staticClass:"contentBox"},[e._l(e.noLoginLink,(function(t,a){return r("a",{key:a,staticClass:"pointer",attrs:{target:"_blank",rel:"nofollow noopener noreferrer",href:t.linkUrl}},[r("i",{class:"my_icon "+(t.icon?t.icon:"el-icon-thumb")}),r("p",{staticClass:"my_p"},[e._v(e._s(t.linkName))])])})),e.moreLinkUrl.length>0?r("a",{staticClass:"more",attrs:{target:"_blank",rel:"nofollow noopener noreferrer",href:e.moreLinkUrl[0].url}},[e._v("更多")]):e._e()],2):e._e()]):e._e()},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"titleBox"},[r("p",[e._v("其他功能")])])}],n={name:"noNeedLogin",data:function(){return{show:1,areaPrefix:""}},mounted:function(){var e,t,r;(null===(e=this.$store.state.settings.logConfig)||void 0===e||null===(t=e.areaInfoData)||void 0===t?void 0:t.length)&&(this.areaInfoData=null===(r=this.$store.state.settings.logConfig)||void 0===r?void 0:r.areaInfoData,this.areaPrefix=this.areaInfoData[0].areaPrefix)},methods:{handle_click:function(e){this.show=e;var t=document.querySelector(".noNeedLogin_box");this.animate(t,{right:2===e?-80:0},(function(){}))},animate:function(e,t,r){var a=this;clearInterval(e.timeId),e.timeId=setInterval((function(){var i=!0;for(var n in t){if("zIndex"==n)e.style[n]=t[n];else if("backgroundColor"==n)e.style[n]=t[n],e.style.transition="background-color 2s";else if("opacity"==n){var o=100*a.getStyle(e,n),s=100*t[n],c=(s-o)/10;c=c>0?Math.ceil(c):Math.floor(c),o+=c,e.style[n]=o/100}else{o=parseInt(a.getStyle(e,n)),s=t[n],c=(s-o)/10;c=c>0?Math.ceil(c):Math.floor(c),o+=c,e.style[n]=o+"px"}o!=s&&(i=!1)}i&&(clearInterval(e.timeId),r&&r())}),10)},getStyle:function(e,t){return window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]},imgUrl:function(e){return r(0==e?"1996":1==e?"70e0":"791d")},jumpLink:function(e){window.open(e)}},computed:{noLoginLink:function(){var e,t=[];return(null===(e=this.$store.state.settings.logConfig)||void 0===e?void 0:e.noLoginLink)&&(t=this.$store.state.settings.logConfig.noLoginLink),t},moreLinkUrl:function(){var e,t=[];return(null===(e=this.$store.state.settings.logConfig)||void 0===e?void 0:e.moreLinkUrl)&&(t=this.$store.state.settings.logConfig.moreLinkUrl),t}}},o=n,s=(r("b47d"),r("2877")),c=Object(s["a"])(o,a,i,!1,null,"5c8f1d9c",null);t["default"]=c.exports},"64a1":function(e,t,r){},6649:function(e,t,r){},"6afb":function(e,t,r){"use strict";var a=r("e931"),i=r.n(a);i.a},"6fdf":function(e,t,r){"use strict";var a=r("bdc1"),i=r.n(a);i.a},7018:function(e,t,r){e.exports=r.p+"static/img/Q8.f4ecd150.png"},7055:function(e,t,r){e.exports=r.p+"static/img/Q12.3e8c1a56.png"},"70e0":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAAXNSR0IArs4c6QAAADBQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWj8cCwAAAA90Uk5TABAgMGBvcH+Aj5C/z9/vTKjJYgAAAMFJREFUSMdjYBgFVAfi+/5jgD9OqGqY7//HAv4aoCiy+48VPEZRdB+7or8CSGpY/uMACUiKuHEp2oCkiO///2+YPvb///8BEpf///8PmIrQREeAojrUcHyJTREnemg3YFHEh67oAbmKONAVLcDm8HWoal6MwLijQSp4iVsRUipowKkIKYIfUKYIKRUswO3wdYj4H43gkagImJa+YCqKRy3siao22HApckBSxIirKiO9UiSqemVQOY+p5nXjaAOG+gAARnau0qzUN9wAAAAASUVORK5CYII="},7265:function(e,t,r){},"74b2":function(e,t,r){"use strict";var a=r("0f3e"),i=r.n(a);i.a},7520:function(e,t,r){e.exports=r.p+"static/img/Q11.fc0aebfa.png"},"754a":function(e,t,r){},7553:function(e,t,r){"use strict";var a=r("2f8b"),i=r.n(a);i.a},"770f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{style:{height:"346px"}},[0==e.loginType?r("div",[r("div",{staticClass:"form"},["isActiveSms"==e.pwdLoginType?r("smsLogin",{key:4,attrs:{redirectURI:e.redirectURI,logConfig:e.pwdlogConfig,verifyType:"zhangMi"}}):e._e()],1)]):1==e.loginType?r("div",[r("div",{staticClass:"form"},["isActiveSms"==e.smsLoginType?r("smsLogin",{key:1,attrs:{redirectURI:e.redirectURI,logConfig:e.smslogConfig,verifyType:"verification"}}):e._e()],1)]):e._e(),2==e.loginType?r("div",[r("div",{staticClass:"form"},["isActiveNonResident"==e.NonLoginType?r("non-resident-person-login",{key:8,attrs:{redirectURI:e.redirectURI,logConfig:e.NonlogConfig,verifyType:"zhangMi"}}):e._e()],1)]):e._e(),r("div",{staticClass:"bottom"},[e.showRegist?r("span",{staticClass:"regist",style:2==e.loginType?"width: 100px":"",on:{click:e.regist}},[e._v(e._s(2==e.loginType?e.$i18n.t("language_variable100"):e.$i18n.t("language_variable33")))]):e._e(),"en_US"!==e.sessionStorage.getItem("lang")?r("span",{staticClass:"forget",on:{click:e.findPhone}},[e._v("找回手机号码")]):e._e(),"en_US"!==e.sessionStorage.getItem("lang")?r("span",{staticClass:"forget",attrs:{type:"text"},on:{click:e.forgetBtn}},[e._v("忘记密码")]):e._e()])]),e.personTabList.length>1?r("el-divider",[e._v("其他登录")]):e._e(),e.personTabList.length>1?r("div",{staticClass:"card"},e._l(e.personTabList,(function(t){return r("div",{directives:[{name:"show",rawName:"v-show",value:t.value!=e.loginType,expression:"item.value != loginType"}],key:t.name,staticClass:"elseLogin",on:{click:function(r){return e.tabChange(t.value,t)}}},[r("loginsvg",{attrs:{type:t.name}}),e._v(e._s(t.name)+" ")],1)})),0):e._e(),r("signedagreement",{ref:"signedagreement"}),r("el-dialog",{attrs:{title:"协议签订","append-to-body":"",visible:e.dialogVisible,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{height:"150px","overflow-y":"auto","margin-bottom":"10px"},domProps:{innerHTML:e._s(t.agreementText)}})})),0):e._e(),e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{display:"inline-block","margin-right":"40px"}},[r("el-checkbox",{model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}}),e._v(" 我已同意并阅读 "),r("span",{staticStyle:{color:"#4285F4"}},[e._v("《"+e._s(t.agreementName)+"》")])],1)})),0):e._e(),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.asddd}},[e._v("同 意")])],1)])],1)},i=[],n=(r("4de4"),r("4160"),r("b0c0"),r("ac1f"),r("1276"),r("159b"),r("96cf"),r("1da1")),o=r("fc4b"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("el-row",[a("el-col",[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("div",{staticClass:"sms"},[a("el-form-item",{attrs:{prop:"account"}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-input",{staticClass:"mobileInp",staticStyle:{width:"100%"},attrs:{placeholder:"居民身份证号码/手机号码/用户名"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account","string"===typeof t?t.trim():t)},expression:"form.account"}})],1)],1),"zhangMi"===e.verifyType?a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"password"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLock,expression:"showCapsLock"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-row",{staticStyle:{width:"100%"}},[a("el-input",{staticClass:"pwdInp",staticStyle:{width:"100%"},attrs:{type:e.eyesFlag?"text":"password","auto-complete":"new-password",placeholder:e.placeHolderPwd,maxlength:"20"},on:{blur:e.capsBlurMixins},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}},[e.eyesFlag?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"})])],1)],1):e._e(),"verification"===e.verifyType?a("el-form-item",{attrs:{prop:"smscode"}},[a("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[a("el-input",{staticClass:"smsInp",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},model:{value:e.form.smscode,callback:function(t){e.$set(e.form,"smscode","string"===typeof t?t.trim():t)},expression:"form.smscode"}}),a("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1):e._e()],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.slideType,expression:"slideType"}]},[a("el-row",{staticStyle:{width:"100%"}},[a("el-col",[a("sliderValidate",{ref:"sliderValidate",attrs:{status:e.validate_status},on:{"update:status":function(t){e.validate_status=t}}})],1)],1)],1),a("el-row",{staticStyle:{width:"100%"}},[a("el-col",[a("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1)],1),a("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),e.slideType?e._e():a("slideVerify",{ref:"slideVerify",on:{handleStatus:e.handle_validate_status}})],1)},c=[],l=r("5530"),u=r("986e"),d=r("1cb3"),m=r("56d6"),f=r("0a4f"),g=r("cb61"),p=r("17dc"),h=r("e014"),v={mixins:[p["a"]],components:{slideVerify:m["a"],sliderValidate:h["a"],fillForm:g["default"]},props:["redirectURI","logConfig","verifyType"],data:function(){return{form:{account:"",smscode:"",password:""},eyesFlag:!1,validate_status:!1,cliState:Object(o["l"])(),clientId:Object(o["b"])(),buttonName:"获取验证码",time:119,smscode_id:"",loginLoading:!1,getCodeDisabled:!1,interval:"",rules:{account:[{required:!0,message:"请输入居民身份证号码/手机号码/用户名",trigger:"blur"}],password:[{required:!0,message:"请输入个人用户密码",trigger:"blur"}],smscode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}]}}},watch:{time:{handler:function(e){e<0&&(this.buttonName="重新发送",this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0}},computed:{slideType:function(){var e=!1;return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].sliderValidateOld&&(e=this.$store.state.settings.logConfig.switch[0].sliderValidateOld),e},placeHolderPwd:function(){var e={5100:!0,3702:!0,1200:!0,1400:!0,4500:!0,2102:!0};return e[this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix]?"个人用户密码(初始密码为证件号码后六位)":"个人用户密码"}},beforeDestroy:function(){clearInterval(this.interval),this.interval=null},methods:{handle_validate_status:function(e){this.validate_status=e,this.login()},closeFillForm:function(){location.reload()},getNewStatus:function(e){this.validate_status=e},checkTel:function(e){var t=/^(1)\d{10}$/;return t.test(e)},verifySMSCode:function(){var e=this;this.loginLoading=!0;var t={smscode_id:this.smscode_id,smsCode:this.form.smscode},r=1==this.logConfig.isStepTwo?"/auth/user/first/verifySMSCode":"/auth/user/single/verifySMSCode";Object(d["B"])(t,r).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(setTimeout((function(){e.slideType&&e.$refs.sliderValidate.reset(),e.loginLoading=!1,e.validate_status=!1}),8e3),1e3!==r.code){t.next=22;break}if(!r.datagram.access_token){t.next=19;break}return t.next=5,Object(f["a"])(r.datagram.access_token);case 5:if(a=t.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){t.next=14;break}return e.$parent.handle_jump_before(r,o),t.abrupt("return");case 14:return e.$refs.fillformDialog.fillForm=i,e.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 17:t.next=22;break;case 19:r.datagram.redirectURI=e.redirectURI,r.datagram.secondStep=e.logConfig.secondStep,u["a"].$emit("toStepTwo","2",Object(l["a"])(Object(l["a"])({},r.datagram),{},{type:"verifySMSCode"}));case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e.slideType&&e.$refs.sliderValidate.reset(),window.setTimeout((function(){e.loginLoading=!1,e.validate_status=!1}),100)}))},login:function(){var e=this,t=this;t.loginLoading||(localStorage.removeItem("token"),this.$cookie.remove("token"),t.$refs.form.validate(function(){var r=Object(n["a"])(regeneratorRuntime.mark((function r(a){var i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=10;break}if(e.validate_status||e.slideType){r.next=6;break}return e.$refs.slideVerify.visible=!0,r.abrupt("return");case 6:if(e.validate_status||!e.slideType){r.next=9;break}return e.$message.warning("请先进行滑块验证！"),r.abrupt("return");case 9:if("verification"===e.verifyType)e.verifySMSCode();else try{t.loginLoading=!0,localStorage.setItem("clientId",t.clientId),i={client_id:t.clientId,redirect_uri:t.redirectURI,account:t.form.account,password:t.form.password},o=1==t.logConfig.isStepTwo?"/auth/user/first/accountLogin":"/auth/user/single/accountLogin",Object(d["a"])(i,o).then(function(){var r=Object(n["a"])(regeneratorRuntime.mark((function r(a){var i,n,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(setTimeout((function(){e.slideType&&e.$refs.sliderValidate.reset(),e.loginLoading=!1,e.validate_status=!1}),8e3),1e3!==a.code){r.next=23;break}if(!a.datagram.access_token){r.next=19;break}return r.next=5,Object(f["a"])(a.datagram.access_token);case 5:if(i=r.sent,n=i.userformInfo,o=i.pass,s=i.userInfo,!o){r.next=14;break}return e.$parent.handle_jump_before(a,s),r.abrupt("return");case 14:return e.$refs.fillformDialog.fillForm=n,e.$refs.fillformDialog.fillFormVisible=!0,r.abrupt("return");case 17:r.next=22;break;case 19:a.datagram.redirectURI=e.redirectURI,a.datagram.secondStep=t.logConfig.secondStep,u["a"].$emit("toStepTwo","2",a.datagram);case 22:""==a.datagram.mobile&&e.$message({duration:5e3,message:"您的手机号码为空，请您通过“找回手机号码”功能修改成正确的手机号码；或通过扫码验证方式登录系统，并在账户中心的手机号码修改菜单中添加默认手机号码。",type:"warning"});case 23:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),window.setTimeout((function(){t.loginLoading=!1,e.validate_status=!1}),100)}))}catch(s){t.slideType&&t.$refs.sliderValidate.reset(),t.loginLoading=!1,e.validate_status=!1}case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()))},getValidCode:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,!r.getCodeDisabled){t.next=4;break}return e.$message.warning("请勿重复发送验证码！"),t.abrupt("return");case 4:a={client_id:r.clientId,redirect_uri:r.redirectURI,account:r.form.account},r.getCodeDisabled=!0,r.time=119,r.buttonName="120s",r.interval=window.setInterval((function(){r.buttonName=r.time+"s",--r.time}),1e3),Object(d["b"])(a).then((function(t){if(1e3===t.code){var a=e;a.smscode_id=t.datagram.smscode_id,e.$message.success("短信验证码成功发送到"+t.datagram.mobile)}else clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"})).catch((function(){r.slideType&&r.$refs.sliderValidate.reset(),clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"}));case 10:case"end":return t.stop()}}),t)})))()}}},b=v,w=(r("b15e"),r("2877")),_=Object(w["a"])(b,s,c,!1,null,"b6794f42",null),y=_.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("el-row",{staticStyle:{"padding-top":"20px"}},[a("el-col",[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{prop:"user_name"}},[a("el-row",[a("el-input",{staticClass:"userInp",staticStyle:{width:"100%"},attrs:{maxlength:"20",placeholder:"用户名"},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name","string"===typeof t?t.trim():t)},expression:"form.user_name"}})],1)],1),"zhangMi"===e.verifyType?a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"password"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLock,expression:"showCapsLock"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-row",[a("el-input",{staticClass:"pwdInp",staticStyle:{width:"100%"},attrs:{"auto-complete":"new-password",maxlength:"20",type:e.eyesFlag?"text":"password",placeholder:e.placeHolderPwd},on:{blur:e.capsBlurMixins},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}},[e.eyesFlag?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"})])],1)],1):e._e(),"verification"===e.verifyType?a("el-form-item",{attrs:{prop:"smscode"}},[a("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[a("el-input",{staticClass:"smsInp",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},model:{value:e.form.smscode,callback:function(t){e.$set(e.form,"smscode","string"===typeof t?t.trim():t)},expression:"form.smscode"}}),a("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1):e._e(),a("el-row",[a("el-col",[a("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1)],1),a("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),e.slideType?e._e():a("slideVerify",{ref:"slideVerify",on:{handleStatus:e.handle_validate_status}})],1)},C=[],T=r("ade3"),k={mixins:[p["a"]],components:{slideVerify:m["a"],fillForm:g["default"]},props:["redirectURI","logConfig","verifyType"],data:function(){var e;return e={eyesFlag:!1,validate_status:!1,form:{user_name:"",password:"",smscode:""},clientId:Object(o["b"])(),relatedType:Object(o["k"])(),cliState:Object(o["l"])(),buttonName:"获取验证码",time:119,smscode_id:"",loginLoading:!1,getCodeDisabled:!1},Object(T["a"])(e,"loginLoading",!1),Object(T["a"])(e,"interval",""),Object(T["a"])(e,"rules",{user_name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入个人用户密码",trigger:"blur"}],smscode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}]}),e},watch:{time:{handler:function(e){e<0&&(this.buttonName="重新发送",this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0}},computed:{slideType:function(){var e=!1;return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].sliderValidateOld&&(e=this.$store.state.settings.logConfig.switch[0].sliderValidateOld),e},placeHolderPwd:function(){var e={5100:!0,3702:!0,1200:!0,1400:!0,4500:!0,2102:!0};return e[this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix]?"个人用户密码(初始密码为证件号码后六位)":"个人用户密码"}},beforeDestroy:function(){clearInterval(this.interval),this.interval=null},methods:{handle_validate_status:function(e){this.validate_status=e,this.login()},closeFillForm:function(){location.reload()},getNewStatus:function(e){this.validate_status=e},checkTel:function(e){var t=/^(1)\d{10}$/;return t.test(e)},verifySMSCode:function(){var e=this;this.loginLoading=!0;var t={smscode_id:this.smscode_id,smsCode:this.form.smscode},r=1==this.logConfig.isStepTwo?"/auth/user/first/verifySMSCode":"/auth/user/single/verifySMSCode";Object(d["B"])(t,r).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1e3!==r.code){t.next=22;break}if(setTimeout((function(){e.loginLoading=!1,e.validate_status=!1}),8e3),!r.datagram.access_token){t.next=19;break}return t.next=5,Object(f["a"])(r.datagram.access_token);case 5:if(a=t.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){t.next=14;break}return e.$parent.handle_jump_before(r,o),t.abrupt("return");case 14:return e.$refs.fillformDialog.fillForm=i,e.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 17:t.next=22;break;case 19:r.datagram.redirectURI=e.redirectURI,r.datagram.secondStep=e.logConfig.secondStep,u["a"].$emit("toStepTwo","2",Object(l["a"])(Object(l["a"])({},r.datagram),{},{type:"verifySMSCode"}));case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){window.setTimeout((function(){e.loginLoading=!1,e.validate_status=!1}),100)}))},login:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,!r.loginLoading){t.next=3;break}return t.abrupt("return");case 3:r.$refs.form.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}if(e.validate_status||e.slideType){t.next=6;break}return e.$refs.slideVerify.visible=!0,t.abrupt("return");case 6:if(e.validate_status||!e.slideType){t.next=9;break}return e.$message.warning("请先进行滑块验证！"),t.abrupt("return");case 9:"verification"===e.verifyType?e.verifySMSCode():(r.loginLoading=!0,localStorage.removeItem("token"),e.$cookie.remove("token"),localStorage.setItem("clientId",r.clientId),i={client_id:r.clientId,redirect_uri:r.redirectURI,user_name:r.form.user_name,password:r.form.password},o=1==r.logConfig.isStepTwo?"/auth/user/first/userNamePswLogin":"/auth/user/single/userNamePswLogin",Object(d["w"])(i,o).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1e3!==r.code){t.next=23;break}if(setTimeout((function(){e.loginLoading=!1,e.validate_status=!1}),8e3),!r.datagram.access_token){t.next=19;break}return t.next=5,Object(f["a"])(r.datagram.access_token);case 5:if(a=t.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){t.next=14;break}return e.$parent.handle_jump_before(r,o),t.abrupt("return");case 14:return e.$refs.fillformDialog.fillForm=i,e.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 17:t.next=22;break;case 19:r.datagram.redirectURI=e.redirectURI,r.datagram.secondStep=e.logConfig.secondStep,u["a"].$emit("toStepTwo","2",r.datagram);case 22:""==r.datagram.mobile&&e.$message({duration:5e3,message:"您的手机号码为空，请您通过“找回手机号码”功能修改成正确的手机号码；或通过扫码验证方式登录系统，并在账户中心的手机号码修改菜单中添加默认手机号码。",type:"warning"});case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){window.setTimeout((function(){r.loginLoading=!1,e.validate_status=!1}),1e3)})));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})))()},getValidCode:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,!r.getCodeDisabled){t.next=4;break}return e.$message.warning("请勿重复发送验证码！"),t.abrupt("return");case 4:a={client_id:r.clientId,redirect_uri:r.redirectURI,user_name:r.form.user_name},r.getCodeDisabled=!0,r.time=119,r.buttonName="120s",r.interval=window.setInterval((function(){r.buttonName=r.time+"s",--r.time}),1e3),Object(d["x"])(a).then((function(t){if(1e3===t.code){var a=e;a.smscode_id=t.datagram.smscode_id,e.$message.success("短信验证码成功发送到"+t.datagram.mobile)}else clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"}));case 10:case"end":return t.stop()}}),t)})))()}}},S=k,R=(r("15c8"),Object(w["a"])(S,x,C,!1,null,"d755d478",null)),$=R.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{prop:"user_name"}},[a("el-row",[a("el-input",{staticClass:"userInp",staticStyle:{width:"100%"},attrs:{placeholder:e.$i18n.t("language_variable5")},model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name","string"===typeof t?t.trim():t)},expression:"form.user_name"}})],1)],1),"zhangMi"===e.verifyType?a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"password"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLock,expression:"showCapsLock"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-row",[a("el-input",{staticClass:"pwdInp",staticStyle:{width:"100%"},attrs:{"auto-complete":"new-password",maxlength:"20",type:e.eyesFlag?"text":"password",placeholder:e.placeHolderPwd},on:{blur:e.capsBlurMixins},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}},[e.eyesFlag?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"})])],1)],1):e._e(),"verification"===e.verifyType?a("el-form-item",{attrs:{prop:"smscode"}},[a("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[a("el-input",{staticClass:"smsInp",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},model:{value:e.form.smscode,callback:function(t){e.$set(e.form,"smscode","string"===typeof t?t.trim():t)},expression:"form.smscode"}}),a("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.slideType,expression:"slideType"}]},[a("el-row",[a("el-col",[a("sliderValidate",{ref:"sliderValidate",attrs:{status:e.validate_status},on:{"update:status":function(t){e.validate_status=t}}})],1)],1)],1),a("el-row",[a("el-col",[a("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v(e._s(e.$i18n.t("language_variable8")))])],1)],1)],1),a("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),e.slideType?e._e():a("slideVerify",{ref:"slideVerify",on:{handleStatus:e.handle_validate_status}})],1)},j=[],O={mixins:[p["a"]],components:{slideVerify:m["a"],sliderValidate:h["a"],fillForm:g["default"]},props:["redirectURI","logConfig","verifyType"],data:function(){var e;return e={eyesFlag:!1,validate_status:!1,form:{user_name:"",password:"",smscode:""},clientId:Object(o["b"])(),relatedType:Object(o["k"])(),cliState:Object(o["l"])(),buttonName:this.$i18n.t("language_variable83"),time:119,smscode_id:"",loginLoading:!1,getCodeDisabled:!1},Object(T["a"])(e,"loginLoading",!1),Object(T["a"])(e,"interval",""),Object(T["a"])(e,"rules",{user_name:[{required:!0,message:this.$i18n.t("language_variable13"),trigger:"blur"}],password:[{required:!0,message:this.$i18n.t("language_variable11"),trigger:"blur"}],smscode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}]}),e},watch:{time:{handler:function(e){e<0&&(this.buttonName=this.$i18n.t("language_variable82"),this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0}},computed:{slideType:function(){var e=!1;return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].sliderValidateOld&&(e=this.$store.state.settings.logConfig.switch[0].sliderValidateOld),e},placeHolderPwd:function(){var e={5100:!0,3702:!0,1200:!0,2102:!0};return e[this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix]?this.$i18n.t("language_variable7"):this.$i18n.t("language_variable6")}},beforeDestroy:function(){clearInterval(this.interval),this.interval=null},methods:{handle_validate_status:function(e){this.validate_status=e,this.login()},closeFillForm:function(){location.reload()},getNewStatus:function(e){this.validate_status=e},checkTel:function(e){var t=/^(1)\d{10}$/;return t.test(e)},verifySMSCode:function(){var e=this;this.loginLoading=!0;var t={smscode_id:this.smscode_id,smsCode:this.form.smscode},r=1==this.logConfig.isStepTwo?"/auth/user/first/verifySMSCode":"/auth/user/single/verifySMSCode";Object(d["B"])(t,r).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(setTimeout((function(){e.slideType&&e.$refs.sliderValidate.reset(),e.loginLoading=!1,e.validate_status=!1}),8e3),1e3!==r.code){t.next=22;break}if(!r.datagram.access_token){t.next=19;break}return t.next=5,Object(f["a"])(r.datagram.access_token);case 5:if(a=t.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){t.next=14;break}return e.$parent.handle_jump_before(r,o),t.abrupt("return");case 14:return e.$refs.fillformDialog.fillForm=i,e.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 17:t.next=22;break;case 19:r.datagram.redirectURI=e.redirectURI,r.datagram.secondStep=e.logConfig.secondStep,u["a"].$emit("toStepTwo","2",Object(l["a"])(Object(l["a"])({},r.datagram),{},{type:"verifySMSCode"}));case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e.slideType&&e.$refs.sliderValidate.reset(),window.setTimeout((function(){e.loginLoading=!1,e.validate_status=!1}),100)}))},login:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,!r.loginLoading){t.next=3;break}return t.abrupt("return");case 3:r.$refs.form.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=10;break}if(e.validate_status||e.slideType){t.next=6;break}return e.$refs.slideVerify.visible=!0,t.abrupt("return");case 6:if(e.validate_status||!e.slideType){t.next=9;break}return e.$message.warning("请先进行滑块验证！"),t.abrupt("return");case 9:"verification"===e.verifyType?e.verifySMSCode():(r.loginLoading=!0,localStorage.removeItem("token"),e.$cookie.remove("token"),localStorage.setItem("clientId",r.clientId),i={client_id:r.clientId,redirect_uri:r.redirectURI,email:r.form.user_name,password:r.form.password},o=1==r.logConfig.isStepTwo?"":"/auth/user/single/emailPswLogin",Object(d["f"])(i,o).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(setTimeout((function(){e.slideType&&e.$refs.sliderValidate.reset(),e.loginLoading=!1,e.validate_status=!1}),8e3),1e3!==r.code){t.next=17;break}if(!r.datagram.access_token){t.next=13;break}return t.next=5,Object(f["a"])(r.datagram.access_token);case 5:return a=t.sent,a.userformInfo,a.pass,i=a.userInfo,e.$parent.handle_jump_before(r,i),t.abrupt("return");case 13:r.datagram.redirectURI=e.redirectURI,r.datagram.secondStep=e.logConfig.secondStep,u["a"].$emit("toStepTwo","2",r.datagram);case 16:""==r.datagram.mobile&&e.$message({duration:5e3,message:"您的手机号码为空，请您通过“找回手机号码”功能修改成正确的手机号码；或通过扫码验证方式登录系统，并在账户中心的手机号码修改菜单中添加默认手机号码。",type:"warning"});case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){r.slideType&&r.$refs.sliderValidate.reset(),r.loginLoading=!1,r.validate_status=!1})));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})))()},getValidCode:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,!r.getCodeDisabled){t.next=4;break}return e.$message.warning(e.$i18n.t("language_variable80")),t.abrupt("return");case 4:a={client_id:r.clientId,redirect_uri:r.redirectURI,user_name:r.form.user_name},r.getCodeDisabled=!0,r.time=119,r.buttonName="120s",r.interval=window.setInterval((function(){r.buttonName=r.time+"s",--r.time}),1e3),Object(d["x"])(a).then((function(t){if(1e3===t.code){var a=e;a.smscode_id=t.datagram.smscode_id,e.$message.success("短信验证码成功发送到"+t.datagram.mobile)}else clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName=e.$i18n.t("language_variable83")})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName=e.$i18n.t("language_variable83")}));case 10:case"end":return t.stop()}}),t)})))()}}},q=O,L=(r("0ed9"),Object(w["a"])(q,I,j,!1,null,"315a94e5",null)),A=L.exports,D=(r("1115"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("el-row",{staticStyle:{"padding-top":"14px"}},[a("el-col",[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{prop:"card_type"}},[a("el-select",{staticClass:"zjTypeSelect",staticStyle:{width:"100%"},attrs:{placeholder:"请选择证件类型"},model:{value:e.form.card_type,callback:function(t){e.$set(e.form,"card_type",t)},expression:"form.card_type"}},e._l(e.IDType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{prop:"id_card"}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-input",{staticClass:"zjNoInp",staticStyle:{width:"100%"},attrs:{maxlength:"32",placeholder:"证件号码"},model:{value:e.form.id_card,callback:function(t){e.$set(e.form,"id_card","string"===typeof t?t.trim():t)},expression:"form.id_card"}})],1)],1),"zhangMi"===e.verifyType?a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"password"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLock,expression:"showCapsLock"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-input",{staticClass:"pwdInp",staticStyle:{width:"100%"},attrs:{type:e.eyesFlag?"text":"password","auto-complete":"new-password",placeholder:e.placeHolderPwd},on:{blur:e.capsBlurMixins},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}},[e.eyesFlag?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"})])],1):e._e(),"verification"===e.verifyType?a("el-form-item",{attrs:{prop:"smscode"}},[a("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[a("el-input",{staticClass:"smsInp",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},model:{value:e.form.smscode,callback:function(t){e.$set(e.form,"smscode","string"===typeof t?t.trim():t)},expression:"form.smscode"}}),a("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1):e._e(),a("el-row",[a("el-col",[a("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1)],1),a("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),e.slideType?e._e():a("slideVerify",{ref:"slideVerify",on:{handleStatus:e.handle_validate_status}})],1)}),P=[],N={mixins:[p["a"]],components:{slideVerify:m["a"],fillForm:g["default"]},props:["redirectURI","logConfig","verifyType"],data:function(){return{eyesFlag:!1,validate_status:!1,loginLoading:!1,getCodeDisabled:!1,form:{card_type:"",id_card:"",password:"",smscode:""},clientId:Object(o["b"])(),relatedType:Object(o["k"])(),cliState:Object(o["l"])(),buttonName:"获取验证码",time:119,smscode_id:"",interval:"",rules:{card_type:[{required:!0,message:"请选择证件类型",trigger:["blur","change"]}],id_card:[{required:!0,message:"请输入证件号码",trigger:"blur"}],password:[{required:!0,message:"请输入个人用户密码",trigger:"blur"}],smscode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}]}}},watch:{time:{handler:function(e){e<0&&(this.buttonName="重新发送",this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0}},computed:{IDType:function(){var e,t=[];return(null===(e=this.$store.state.settings.logConfig)||void 0===e?void 0:e.idTypeList)&&(t=this.$store.state.settings.logConfig.idTypeList,this.form.card_type=t[0].value),t},slideType:function(){var e=!1;return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].sliderValidateOld&&(e=this.$store.state.settings.logConfig.switch[0].sliderValidateOld),e},placeHolderPwd:function(){var e={5100:!0,3702:!0,1200:!0,1400:!0,4500:!0,2102:!0};return e[this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix]?"个人用户密码(初始密码为证件号码后六位)":"个人用户密码"}},beforeDestroy:function(){clearInterval(this.interval),this.interval=null},methods:{handle_validate_status:function(e){this.validate_status=e,this.login()},closeFillForm:function(){location.reload()},getNewStatus:function(e){this.validate_status=e},verifySMSCode:function(){var e=this;this.loginLoading=!0;var t={smscode_id:this.smscode_id,smsCode:this.form.smscode},r=1==this.logConfig.isStepTwo?"/auth/user/first/verifySMSCode":"/auth/user/single/verifySMSCode";Object(d["B"])(t,r).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1e3!==r.code){t.next=22;break}if(setTimeout((function(){e.loginLoading=!1,e.validate_status=!1}),8e3),!r.datagram.access_token){t.next=19;break}return t.next=5,Object(f["a"])(r.datagram.access_token);case 5:if(a=t.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){t.next=14;break}return e.$parent.handle_jump_before(r,o),t.abrupt("return");case 14:return e.$refs.fillformDialog.fillForm=i,e.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 17:t.next=22;break;case 19:r.datagram.redirectURI=e.redirectURI,r.datagram.secondStep=e.logConfig.secondStep,u["a"].$emit("toStepTwo","2",Object(l["a"])(Object(l["a"])({},r.datagram),{},{type:"verifySMSCode"}));case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){window.setTimeout((function(){e.loginLoading=!1,e.validate_status=!1}),100)}))},login:function(){var e=this,t=this;t.loginLoading||t.$refs.form.validate(function(){var r=Object(n["a"])(regeneratorRuntime.mark((function r(a){var i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=10;break}if(e.validate_status||e.slideType){r.next=6;break}return e.$refs.slideVerify.visible=!0,r.abrupt("return");case 6:if(e.validate_status||!e.slideType){r.next=9;break}return e.$message.warning("请先进行滑块验证！"),r.abrupt("return");case 9:"verification"===e.verifyType?e.verifySMSCode():(t.loginLoading=!0,localStorage.removeItem("token"),e.$cookie.remove("token"),localStorage.setItem("clientId",t.clientId),localStorage.setItem("clientId",t.clientId),i={client_id:t.clientId,redirect_uri:t.redirectURI,card_type:t.form.card_type,id_card:t.form.id_card,password:t.form.password},o=1==e.logConfig.isStepTwo?"/auth/user/first/idCardPswLogin":"/auth/user/single/idCardPswLogin",Object(d["p"])(i,o).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1e3!==r.code){t.next=23;break}if(setTimeout((function(){e.loginLoading=!1,e.validate_status=!1}),8e3),!r.datagram.access_token){t.next=19;break}return t.next=5,Object(f["a"])(r.datagram.access_token);case 5:if(a=t.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){t.next=14;break}return e.$parent.handle_jump_before(r,o),t.abrupt("return");case 14:return e.$refs.fillformDialog.fillForm=i,e.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 17:t.next=22;break;case 19:r.datagram.redirectURI=e.redirectURI,r.datagram.secondStep=e.logConfig.secondStep,u["a"].$emit("toStepTwo","2",r.datagram);case 22:""==r.datagram.mobile&&e.$message({duration:5e3,message:"您的手机号码为空，请您通过“找回手机号码”功能修改成正确的手机号码；或通过扫码验证方式登录系统，并在账户中心的手机号码修改菜单中添加默认手机号码。",type:"warning"});case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){window.setTimeout((function(){t.loginLoading=!1,e.validate_status=!1}),100)})));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},getValidCode:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,!r.getCodeDisabled){t.next=4;break}return e.$message.warning("请勿重复发送验证码！"),t.abrupt("return");case 4:a={client_id:r.clientId,redirect_uri:r.redirectURI,card_type:r.form.card_type,id_card:r.form.id_card},r.getCodeDisabled=!0,r.time=119,r.buttonName="120s",r.interval=window.setInterval((function(){r.buttonName=r.time+"s",--r.time}),1e3),Object(d["q"])(a).then((function(t){if(1e3===t.code){var a=e;a.smscode_id=t.datagram.smscode_id,e.$message.success("短信验证码成功发送到"+t.datagram.mobile)}else clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"}));case 10:case"end":return t.stop()}}),t)})))()}}},F=N,V=(r("74b2"),Object(w["a"])(F,D,P,!1,null,"5cc205e0",null)),Q=V.exports,U=r("37b6"),E=r("a99c"),B=(r("3352"),{components:{userLogin:$,smsLogin:y,certificateLogin:Q,signedagreement:U["default"],loginsvg:E["a"],NonResidentPersonLogin:A},props:{idSel:{type:String,default:function(){return""}}},data:function(){return{sessionStorage:sessionStorage,list:[],dialogVisible:!1,asddd:function(){},loginType:"",pwdLoginType:"",NonLoginType:"",curParams:Object(o["e"])(),clientId:Object(o["b"])(),pwdList:[],pwdlogConfig:void 0,NonList:[],NonlogConfig:void 0,smsList:[],smsLoginType:"",smslogConfig:void 0}},computed:{personTabList:function(){var e,t,r=this,a=[];(null===(e=this.$store.state.settings.logConfig)||void 0===e?void 0:e.personTabList)&&(a="client"===Object(o["f"])("client_type")&&(null===(t=this.$store.state.settings.logConfig)||void 0===t?void 0:t.personTabListClient)?this.$store.state.settings.logConfig.personTabListClient:this.$store.state.settings.logConfig.personTabList,this.clientId&&this.clientId===(this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.dpptData&&this.$store.state.settings.logConfig.dpptData[0].clientId)&&(a=a.filter((function(e){return e.firstStep&&"isActiveNonResident"!==e.firstStep[0].value}))),a.forEach((function(e){0==e.value?(r.pwdList=e.firstStep,r.pwdLoginType=e.firstStep[0].value,r.pwdlogConfig=e.firstStep[0]):1==e.value?(r.smsList=e.firstStep,r.smsLoginType=e.firstStep[0].value,r.smslogConfig=e.firstStep[0]):2==e.value&&(r.NonList=e.firstStep,r.NonLoginType=e.firstStep[0].value,r.NonlogConfig=e.firstStep[0])})),this.loginType=a[0].value);return a},redirectURI:function(){var e,t,r=Object(o["j"])();if((null===(e=this.$store.state.settings.logConfig)||void 0===e||null===(t=e.nmgNatureClientData)||void 0===t?void 0:t.length)>0){var a=this.$store.state.settings.logConfig.nmgNatureClientData[0].clientId;a===this.clientId&&(r=this.$store.state.settings.logConfig.nmgNatureClientData[0].redirect_uri)}return r},showRegist:function(){try{return"1000"!=this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix}catch(e){return!0}}},methods:{tabChange:function(e,t){"境外自然人登录"==t.name?this.$emit("changeTitle","境外自然人"):this.$emit("changeTitle","自然人业务"),this.loginType=e,this.pwdlogConfig=t.firstStep[0],this.NonlogConfig=t.firstStep[0],this.smslogConfig=t.firstStep[0]},handleTabChange:function(e){0==e.value?(this.pwdList=e.firstStep,this.pwdLoginType=e.firstStep[0].value,this.pwdlogConfig=e.firstStep[0]):1==e.value?(this.smsList=e.firstStep,this.smsLoginType=e.firstStep[0].value,this.smslogConfig=e.firstStep[0]):2==e.value&&(this.NonList=e.firstStep,this.NonLoginType=e.firstStep[0].value,this.NonlogConfig=e.firstStep[0])},regist:function(){var e=this,t=!1,r=window.location.href.split("?")[1];r&&r.split("&").forEach((function(r){if("client_type=client"===r){var a=e.$router.resolve({path:"/register",query:{client_id:e.clientId?e.clientId:"",client_type:"client"}});t=!0,window.open(a.href,"_blank")}})),t||(this.clientId?this.$router.push({path:"/register",query:{client_id:this.clientId,loginType:this.loginType}}):this.$router.push({path:"/register",query:{loginType:this.loginType}}))},forgetBtn:function(){var e=this,t=!1,r=window.location.href.split("?")[1];r&&r.split("&").forEach((function(r){if("client_type=client"===r){var a=e.$router.resolve({path:"/forget",query:{client_id:e.clientId?e.clientId:"",client_type:"client",identity:"person"}});t=!0,window.open(a.href,"_blank")}})),t||(this.clientId?this.$router.push({path:"/forget",query:{client_id:this.clientId,identity:"person"}}):this.$router.push({path:"/forget",query:{identity:"person"}}))},findPhone:function(){var e=this,t=!1,r=window.location.href.split("?")[1];r&&r.split("&").forEach((function(r){if("client_type=client"===r){var a=e.$router.resolve({path:"/findPhoneNo",query:{client_id:e.clientId?e.clientId:"",client_type:"client"}});t=!0,window.open(a.href,"_blank")}})),t||(this.clientId?this.$router.push({path:"/findPhoneNo",query:{client_id:this.clientId}}):this.$router.push({path:"/findPhoneNo"}))},handle_jump_before:function(e,t){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$refs.signedagreement.handle_jump_before(e,t,"/userCenter/baseInfoP");case 1:case"end":return a.stop()}}),a)})))()}}}),z=B,M=(r("2594"),Object(w["a"])(z,a,i,!1,null,"318552b8",null));t["default"]=M.exports},"791d":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAAXNSR0IArs4c6QAAAD9QTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsyWCLwAAABR0Uk5TABAgMEBQYHB/gI+Qn6CvsL/P3+/8gmRFAAAB20lEQVRYw+2XyZaEIAxFgwoOVFdbSf7/W3sBIpMMddy12Smca4ZHiACPPZaYUNsbiZlx3+TwNWXeObBdfYVZiBPDpZszIWcN+7wSG1/aJto5w4cLhs1ZH86wSKtRAIhR/mA36eTsk/9e7n0kcXBwipfksfRpydORZ53ZLPSR8TpH2a1rfnm1y1MVhEWOI2EtuMXGdb1DV74UOFT6ni0GiZYMSc9Fd+TIZngyj3MRZKSypzX0w0k2ZbSYOBS0AApcKsUmTYbgAsTBy1IfMBV5ZXQTgHStsjZ6GbApBZmS/FaLP2ZWAtCYZCC/XdRAwk99AZTTTwCKnoqgWD+dIHKhxfrJhMZNyY71Q35W6sl+O6XF+ll95cjqGfGUFutHE7nO8aoKUiV1zWYDU93GvSbpozmQiYyHrjaSAzW0EZhjlzIg61B5CBAUtdoUZFstVnr2Gt1blJyqra35H/fs4oN1es1g9V6zfdSRfP2cHG4Yk3RhDnJzk24ZIo7hCOX1GPfqHGsC1OTPpp0kxpc0g5baotm0l3RtTSQ3B2VM//SQQF2NxxNAHwnWDIpWAdBNAhX/QsyHtHpJMEi9IzMTvrXyBdpNurSH9JBO0noXieAm0g0gQ9I3gOJ75rH/a3/Kn1jYvwzi4wAAAABJRU5ErkJggg=="},7976:function(e,t,r){"use strict";var a=r("ee6d"),i=r.n(a);i.a},"79fa":function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return l})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return d}));var a=r("b775");function i(e){return Object(a["a"])({url:"/idmtax/internal/taxPerson/administrativeAreaSelect",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/idmtax/internal/taxPerson/administrativeAreaSelectWhite",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/idm/internal/company/gt3organizationLevelQuery",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/idm/internal/company/gt3organizationLevelQueryWhite",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/auth/specific/selectCrossInspectionListIsPage",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/auth/specific/selectCrossInspectionListNoPage",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/auth/specific/selectCrossTaxSourcelistIsPage",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/auth/specific/selectCrossTaxSourcelistNoPage",method:"post",data:e})}},"7b77":function(e,t,r){},"7b79":function(e,t,r){"use strict";var a=r("19c5"),i=r.n(a);i.a},"7d43":function(e,t,r){"use strict";var a=r("601f"),i=r.n(a);i.a},"7d4f":function(e,t,r){"use strict";var a=r("7265"),i=r.n(a);i.a},"7da6":function(e,t,r){},"7f77":function(e,t,r){},8013:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return n})),r.d(t,"f",(function(){return o})),r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return l}));var a=r("b775");function i(e){return Object(a["a"])({url:"/auth/qrcode/goveCreateQrcode",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/auth/qrcode/goveVerifyQrcode",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/auth/qrcodeAuth/licence/createQRCode",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/auth/qrcodeAuth/licence/QRCodeResult",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/idm/internal/natural/improveUserRealInfo",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/idm/internal/natural/improveUserRealInfoNew",method:"post",data:e})}},"82c9":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"主管部门",visible:e.dialogVisibleFunction,"append-to-body":"","close-on-click-modal":!1,width:"550px"},on:{"update:visible":function(t){e.dialogVisibleFunction=t}}},[r("div",{staticClass:"tree"},[r("el-tree",{attrs:{data:e.data,props:e.defaultProps,"highlight-current":""},on:{"node-click":e.handleNodeClick}})],1),r("div",[r("div",{staticClass:"re-button"},[r("el-button",{staticClass:"greyButton",on:{click:e.close}},[e._v("取消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.makeSure}},[e._v("确认")])],1)])])},i=[],n=r("79fa"),o=r("1115"),s={props:{manageOrganCode:{type:Array},areaPrefix:{type:String}},data:function(){return{data:[],currData:{},userInfo:JSON.parse(Object(o["a"])(localStorage.getItem("userinfo"))),dialogVisibleFunction:!1,defaultProps:{children:"childrens",label:"organName"}}},methods:{getorgtree:function(){var e=this;Object(n["c"])({parentOrganizationCode:this.areaPrefix.substring(0,4)}).then((function(t){1e3==t.code&&(e.data=t.datagram)}))},handleNodeClick:function(e,t){this.currData=e},makeSure:function(){this.currData.organCode?this.$emit("organizationData",this.currData.organCode,this.currData.organName):this.$emit("organizationData",this.manageOrganCode[0],this.manageOrganCode[1]),this.dialogVisibleFunction=!1,this.currData={}},close:function(){this.dialogVisibleFunction=!1,this.currData={}}}},c=s,l=(r("d4c3f"),r("2877")),u=Object(l["a"])(c,a,i,!1,null,"48662894",null);t["a"]=u.exports},8709:function(e,t,r){"use strict";var a=r("6649"),i=r.n(a);i.a},8760:function(e,t,r){e.exports=r.p+"static/img/Q10.04aa7db5.png"},"8bb6":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{style:{height:"346px"}},[r("div",{staticClass:"form"},["isActiveQuick"==e.activeLoginType||"isActiveQuick1"==e.activeLoginType?r("quickLogin",{attrs:{logConfig:e.logConfig}}):e._e(),"isActiveTaxC"==e.activeLoginType?r("taxCertificateLogin",{attrs:{logConfig:e.logConfig}}):e._e()],1),"isActiveTaxC"!=e.activeLoginType?r("div",{staticClass:"bottom"},[r("span",{staticClass:"forget",attrs:{type:"text"},on:{click:e.findPhone}},[e._v("找回手机号码")]),r("span",{staticClass:"forget",attrs:{type:"text"},on:{click:e.forgetBtn}},[e._v("忘记密码")])]):e._e(),"isActiveTaxC"==e.activeLoginType?r("div",{staticClass:"bottom"},[r("span",{staticClass:"forget",attrs:{type:"text"},on:{click:e.findPhone}},[e._v("找回手机号码")])]):e._e()]),e.agentTabList.length>1?r("el-divider",[e._v("其他登录")]):e._e(),e.agentTabList.length>1?r("div",{staticClass:"card"},e._l(e.agentTabList,(function(t){return r("div",{directives:[{name:"show",rawName:"v-show",value:t.value!=e.activeLoginType,expression:"item.value != activeLoginType"}],key:t.name,staticClass:"elseLogin",on:{click:function(r){return e.tabChange(t.value,t)}}},[r("loginsvg",{attrs:{type:t.name}}),e._v(e._s(t.name)+" ")],1)})),0):e._e()],1)},i=[],n=(r("4160"),r("ac1f"),r("1276"),r("159b"),r("d5c2")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{prop:"creditCode"}},[a("el-row",[a("el-autocomplete",{staticClass:"creditCode",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"统一社会信用代码/纳税人识别号"},model:{value:e.form.creditCode,callback:function(t){e.$set(e.form,"creditCode","string"===typeof t?t.trim():t)},expression:"form.creditCode"}})],1)],1),a("el-form-item",{attrs:{prop:"account"}},[a("el-row",[a("el-input",{staticClass:"mobileInp",staticStyle:{width:"100%"},attrs:{placeholder:"居民身份证号码/手机号码/用户名"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account","string"===typeof t?t.trim():t)},expression:"form.account"}})],1)],1),e.logConfig.firstStep.length>1?a("div",{staticClass:"justifyCenter"},[a("el-radio-group",{staticStyle:{"margin-bottom":"20px"},model:{value:e.loginType,callback:function(t){e.loginType=t},expression:"loginType"}},e._l(e.logConfig.firstStep,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name)+" ")])})),1)],1):e._e(),0==e.loginType?a("div",[a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"password"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLock,expression:"showCapsLock"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-row",{staticStyle:{width:"100%"}},[a("el-input",{staticClass:"pwdInp",staticStyle:{width:"100%"},attrs:{type:e.eyesFlag?"text":"password","auto-complete":"new-password",maxlength:"20",placeholder:e.placeHolderPwd},on:{focus:function(t){e.showTemptip=!0},blur:e.capsBlur},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}},[e.eyesFlag?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"})])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTemptip,expression:"showTemptip"}],staticClass:"form-temp-tip"},[e._v("请输入"),a("span",[e._v("个人")]),e._v("用户密码")])],1):e._e(),1==e.loginType?a("div",[a("el-form-item",{attrs:{prop:"smscode"}},[a("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[a("el-input",{staticClass:"smsInp",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},model:{value:e.form.smscode,callback:function(t){e.$set(e.form,"smscode","string"===typeof t?t.trim():t)},expression:"form.smscode"}}),a("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1)],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.slideType,expression:"slideType"}]},[a("el-row",[a("el-col",[a("sliderValidate",{ref:"sliderValidate",attrs:{status:e.validate_status},on:{"update:status":function(t){e.validate_status=t}}})],1)],1)],1),a("el-row",[a("el-col",[a("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1),e.visible?a("agentList",{ref:"agentList",attrs:{visible:e.visible,agentListData:e.agentListData,uuid:e.respUuid,pageSize:e.pageSize,pageNum:e.pageNum},on:{"update:visible":function(t){e.visible=t},agentQuick:e.agentQuickLogin}}):e._e()],1)],1),a("el-dialog",{attrs:{title:"协议签订",visible:e.dialogVisible,"show-close":!1,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.list.length?a("div",e._l(e.list,(function(t){return a("div",{key:t.agreementText,staticStyle:{height:"9.375rem","overflow-y":"auto","margin-bottom":"0.625rem"},domProps:{innerHTML:e._s(t.agreementText)}})})),0):e._e(),e.list.length?a("div",e._l(e.list,(function(t){return a("div",{key:t.agreementText,staticStyle:{display:"inline-block","margin-right":"2.5rem"}},[a("el-checkbox",{model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}}),e._v(" 我已同意并阅读 "),a("span",{staticStyle:{color:"#409EFF"}},[e._v("《"+e._s(t.agreementName)+"》")])],1)})),0):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.asddd}},[e._v("同 意")])],1)]),a("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),a("signedagreement",{ref:"signedagreement"}),e.slideType?e._e():a("slideVerify",{ref:"slideVerify",on:{handleStatus:e.handle_validate_status}})],1)},s=[],c=(r("4de4"),r("c975"),r("45fc"),r("5530")),l=(r("96cf"),r("1da1")),u=r("a78e"),d=r.n(u),m=r("ed08"),f=(r("cf45"),r("986e")),g=r("fc4b"),p=r("3cb7"),h=(r("3352"),r("1115"),r("0a4f")),v=r("56d6"),b=r("e014"),w=r("abd2"),_=r("509b"),y=r("cb61"),x=r("37b6"),C=r("17dc"),T={mixins:[C["a"]],props:["logConfig"],components:{slideVerify:v["a"],agentList:_["a"],fillForm:y["default"],sliderValidate:b["a"],signedagreement:x["default"]},data:function(){var e=function(e,t,r){Object(m["b"])(t)?r():r(new Error("您输入的统一社会信用代码或纳税人识别号有误，请重新输入"))};return{showTemptip:!1,eyesFlag:!1,bz:!1,uuid:"",list:[],asddd:function(){},dialogVisible:!1,checked:!0,relatedTypes:w["e"],validate_status:!1,form:{creditCode:Object(g["d"])(),account:"",password:"",smscode:""},smscode_id:"",clientId:Object(g["b"])(),redirectURI:Object(g["j"])(),cliState:Object(g["l"])(),loginLoading:!1,value:!1,visible:!1,agentListData:void 0,respUuid:"",pageSize:"",pageNum:"",rules:{account:[{required:!0,message:"请输入居民身份证号码/手机号码/用户名",trigger:"blur"}],smscode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}],creditCode:[{required:!0,message:"请输入统一社会信用代码/纳税人识别号"},{min:0,max:20,message:"社会信用代码/纳税人识别号长度不超过20位",trigger:"blur"},{validator:e}],password:[{required:!0,message:"请输入个人用户密码",trigger:"blur"}]},loginType:null,buttonName:"获取验证码",getCodeDisabled:!1,time:119,interval:"",restaurants:[]}},computed:{tips:function(){var e,t="";return(null===(e=this.$store.state.settings.logConfig)||void 0===e?void 0:e.loginTips)&&(t=this.$store.state.settings.logConfig.loginTips[0].agentQuickLogin.tips),t},slideType:function(){var e=!1;return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].sliderValidateOld&&(e=this.$store.state.settings.logConfig.switch[0].sliderValidateOld),e},placeHolderPwd:function(){var e={5100:!0,3702:!0,1200:!0,1400:!0,4500:!0,2102:!0};return e[this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix]?"个人用户密码(初始密码为证件号码后六位)":"个人用户密码"}},watch:{logConfig:{handler:function(e){e&&(this.loginType=e.firstStep[0].value)},deep:!0,immediate:!0},time:{handler:function(e){e<0&&(this.buttonName="重新发送",this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0},loginType:function(e){this.$refs.form.clearValidate(["smscode","password"])}},beforeDestroy:function(){clearInterval(this.interval),this.interval=null},methods:{handle_validate_status:function(e){this.validate_status=e,this.login()},querySearch:function(e,t){var r=this.restaurants,a=e?r.filter(this.createFilter(e)):r;t(a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},closeFillForm:function(){location.reload()},singleHandleRes:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1e3!==e.code){r.next=16;break}if(!e.datagram.access_token){r.next=10;break}return r.next=4,Object(h["a"])(e.datagram.access_token);case 4:return a=r.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,n?t.handle_jump_before(e,o):(t.$refs.fillformDialog.fillForm=i,t.$refs.fillformDialog.fillFormVisible=!0),r.abrupt("return",!1);case 10:t.respUuid=e.datagram.uuid,t.agentListData=e.datagram.pageInfo,t.pageSize=e.datagram.pageInfo.pageSize,t.pageNum=e.datagram.pageInfo.pageNum,t.visible=!0,setTimeout((function(){t.loginLoading=!1,t.validate_status=!1}),8e3);case 16:case"end":return r.stop()}}),r)})))()},twinHandleRes:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===e.code&&(a=null,t.logConfig.firstStep.some((function(e){if(e.value==t.loginType)return a=e.secondStep,!0})),t.setCreditCodeList(),t.loginLoading=!1,t.validate_status=!1,""==e.datagram.mobile&&t.$message({duration:5e3,message:"您的手机号码为空，请您通过“找回手机号码”功能修改成正确的手机号码；或通过扫码验证方式登录系统，并在账户中心的手机号码修改菜单中添加默认手机号码。",type:"warning"}),f["a"].$emit("toStepTwo","3",Object(c["a"])(Object(c["a"])({},a),e.datagram)));case 1:case"end":return r.stop()}}),r)})))()},singlePwd:function(e){var t=this;Object(p["a"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),t.loginLoading=!1,t.validate_status=!1}),8e3),t.singleHandleRes(e)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),window.setTimeout((function(){t.loginLoading=!1,t.validate_status=!1}),100)}))},twinPwd:function(e){var t=this;Object(p["i"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),t.loginLoading=!1,t.validate_status=!1}),8e3),t.twinHandleRes(e)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),window.setTimeout((function(){t.loginLoading=!1,t.validate_status=!1}),100)}))},singleSms:function(e){var t=this,r=this;localStorage.removeItem("token"),this.$cookie.remove("token"),r.smscode_id?(r.loginLoading=!0,Object(p["b"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),r.loginLoading=!1,t.validate_status=!1}),8e3),t.singleHandleRes(e)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),window.setTimeout((function(){r.loginLoading=!1,t.validate_status=!1}),100)}))):r.$message.warning("请先获取验证码!")},twinSms:function(e){var t=this,r=this;localStorage.removeItem("token"),this.$cookie.remove("token"),r.smscode_id?(r.loginLoading=!0,Object(p["k"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),r.loginLoading=!1,t.validate_status=!1}),8e3),t.twinHandleRes(e)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),window.setTimeout((function(){r.loginLoading=!1,t.validate_status=!1}),100)}))):r.$message.warning("请先获取验证码!")},login:function(){var e=this;this.loginLoading||(localStorage.removeItem("token"),this.$cookie.remove("token"),this.$refs.form.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(r){var a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=15;break}if(e.validate_status||e.slideType){t.next=6;break}return e.$refs.slideVerify.visible=!0,t.abrupt("return");case 6:if(e.validate_status||!e.slideType){t.next=9;break}return e.$message.warning("请先进行滑块验证！"),t.abrupt("return");case 9:localStorage.setItem("clientId",e.clientId),a={client_id:e.clientId,account:e.form.account,password:e.form.password,redirect_uri:e.redirectURI,creditCode:e.form.creditCode},i={smsCode:e.form.smscode,smscode_id:e.smscode_id},n={client_id:e.clientId,smsCode:e.form.smscode,smscode_id:e.smscode_id,redirect_uri:e.redirectURI,uuid:e.uuid},e.loginLoading=!0,1==e.logConfig.isStepTwo?0==e.loginType?e.twinPwd(a):e.twinSms(i):0==e.loginType?e.singlePwd(a):e.singleSms(n);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},getValidCode:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,r.form.account&&r.form.creditCode){t.next=4;break}return e.$message.warning("请先填写正确的手机号码/居民身份证号码/用户名和统一社会信用代码"),t.abrupt("return");case 4:if(!r.getCodeDisabled){t.next=7;break}return e.$message.warning("请勿重复发送验证码！"),t.abrupt("return");case 7:a={account:r.form.account,creditCode:r.form.creditCode,client_id:r.clientId,redirect_uri:e.redirectURI},r.getCodeDisabled=!0,r.time=119,r.buttonName="120s",r.interval=window.setInterval((function(){r.buttonName=r.time+"s",--r.time}),1e3),0==e.logConfig.isStepTwo?Object(p["c"])(a).then((function(t){1e3===t.code?(r.smscode_id=t.datagram.smscode_id,r.uuid=t.datagram.uuid,e.$message.success("短信验证码成功发送到"+t.datagram.mobile),e.bz="0"===t.datagram.bz):(clearInterval(r.interval),r.getCodeDisabled=!1,r.buttonName="获取验证码")})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"})):Object(p["j"])(a).then((function(t){1e3===t.code?(r.smscode_id=t.datagram.smscode_id,r.uuid=t.datagram.uuid,e.$message.success("短信验证码成功发送到"+t.datagram.mobile),e.bz="0"===t.datagram.bz):(clearInterval(r.interval),r.getCodeDisabled=!1,r.buttonName="获取验证码")})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"}));case 13:case"end":return t.stop()}}),t)})))()},agentQuickLogin:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var a,i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t,i=e.uniqueIdentity,n=e.relatedType,localStorage.setItem("clientId",a.clientId),o={client_id:a.clientId,redirect_uri:a.redirectURI,creditCode:i,relatedType:n,uuid:a.respUuid},Object(p["q"])(o).then(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(r){var a,i,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1e3!==r.code){e.next=16;break}return setTimeout((function(){t.loginLoading=!1,t.validate_status=!1,t.$refs.agentList.loadingDl=!1,t.$refs.agentList.$refs.IDTypeShoose.loginLoading=!1}),8e3),e.next=4,Object(h["a"])(r.datagram.access_token);case 4:if(a=e.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){e.next=13;break}return t.handle_jump_before(r,o),e.abrupt("return");case 13:return t.$refs.fillformDialog.fillForm=i,t.$refs.fillformDialog.fillFormVisible=!0,e.abrupt("return");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.$refs.agentList.loadingDl=!1,t.$refs.agentList.$refs.IDTypeShoose.loginLoading=!1,window.setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),a.loginLoading=!1,t.validate_status=!1}),1e3)}));case 6:case"end":return r.stop()}}),r)})))()},handle_jump_before:function(e,t){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.setCreditCodeList(),r.$refs.signedagreement.handle_jump_before(e,t,"/userCenter/baseInfoEE");case 2:case"end":return a.stop()}}),a)})))()},setCreditCodeList:function(){var e=this,t=this.restaurants.some((function(t){if(t.value==e.form.creditCode)return!0}));t||(this.restaurants.push({value:this.form.creditCode}),d.a.set("A-QUICK-CCLIST",JSON.stringify(this.restaurants)))}},mounted:function(){this.restaurants=d.a.get("A-QUICK-CCLIST")?JSON.parse(d.a.get("A-QUICK-CCLIST")):[]}},k=T,S=(r("fa0a"),r("2877")),R=Object(S["a"])(k,o,s,!1,null,"2f1e91ac",null),$=R.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{prop:"cetifyType"}},[a("el-select",{staticClass:"zjTypeSelect",staticStyle:{width:"100%"},attrs:{placeholder:"请选择证书类型"},model:{value:e.form.cetifyType,callback:function(t){e.$set(e.form,"cetifyType",t)},expression:"form.cetifyType"}},e._l(e.cetifyTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"certificatePwd"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLock,expression:"showCapsLock"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-input",{staticClass:"certificatePwd",staticStyle:{width:"100%"},attrs:{maxlength:"20",type:e.eyesFlag?"text":"password",placeholder:"请输入证书密码"},on:{blur:e.capsBlurMixins},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.form.certificatePwd,callback:function(t){e.$set(e.form,"certificatePwd","string"===typeof t?t.trim():t)},expression:"form.certificatePwd"}},[e.eyesFlag?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"})])],1),a("el-row",[a("el-col",[a("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1),"0"===e.form.cetifyType?a("div",{staticClass:"taxTips"},[a("span",{staticClass:"taxDownload"},[e._v("如未安装企业证书驱动，请先下载安装证书 ")]),a("el-button",{staticClass:"taxDriver",attrs:{type:"text"},on:{click:e.goToDrive}},[e._v("驱动")]),a("span",{staticClass:"taxDownload"},[e._v(" 并进行 ")]),a("el-button",{staticClass:"taxDriver",attrs:{type:"text",onclick:"window.open('/jiance/jiance.html', '_blank')"}},[e._v("环境检测 ")])],1):"1"===e.form.cetifyType?a("div",{staticClass:"taxTips"},[a("div",{domProps:{innerHTML:e._s(e.downUrlDizhi)}})]):e._e()],1)},j=[],O=r("2a11"),q=r("d7e0"),L=r("2b0f"),A={mixins:[C["a"]],props:["logConfig"],data:function(){return{areaCode:"",eyesFlag:!1,loginLoading:!1,form:{cetifyType:"",certificatePwd:""},rules:{cetifyType:[{required:!0,message:"请选择证书类型",trigger:"change"}],certificatePwd:[{required:!0,message:"请输入证书密码",trigger:"blur"}]},clientId:Object(g["b"])(),redirectURI:Object(g["j"])(),crosFlag:"1",authType:"1",strProvider:"",strContainer:"//SM2/SM2CONTAINER0002",strContainerSM2:"//SM2/SM2CONTAINER0002",strContainerRSA:"CTAS0002        ",dwProvType:"0x802",dwProvTypeSM2:"0x802",dwProvTypeRSA:"0x1",post_type:"0",user_type:"1",login_type:"1",cliVer:"",downUrlDizhi:""}},computed:{cetifyTypeList:function(){var e,t=[];return(null===(e=this.$store.state.settings.logConfig)||void 0===e?void 0:e.cetifyLoginTypeList)&&(t=this.$store.state.settings.logConfig.cetifyLoginTypeList),t&&1===t.length&&(this.form.cetifyType=t[0].value),t}},created:function(){this.areaCode=this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix,this.downUrlDizhi=this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.CcieDownUrl&&this.$store.state.settings.logConfig.CcieDownUrl[0]&&this.$store.state.settings.logConfig.CcieDownUrl[0].CcieUrlPath},methods:{goToDrive:function(){window.open("/#/driver")},goToCaDetect:function(){window.open("/#/caDetect")},downCaControl:function(){var e=localStorage.getItem("areaPrefix"),t=this.downUrlDizhi||O[e].downUrl;window.open(t,"_blank")},login:function(){var e=this;e.loginLoading||this.$refs.form.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r&&(e.loginLoading=!0,"0"==e.form.cetifyType?e.taxCetifyLogin():"1"==e.form.cetifyType&&e.taxCetifyCALogin());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},taxCetifyLogin:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a,i,n,o,s,l,u,d,m,g,p,h,v,b,w,_,y,x,C,T,k;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,"3100"!==r.areaCode&&"1500"!==r.areaCode){t.next=51;break}return t.prev=2,t.next=5,Object(q["i"])({crosFlag:r.crosFlag});case 5:return a=t.sent,r.cliVer=a.version,i={strProvider:r.strProvider,strContainer:r.strContainerSM2,dwProvType:r.dwProvTypeSM2,authType:r.authType,crosFlag:r.crosFlag},t.next=10,Object(q["d"])(Object(c["a"])({authType:r.authType},i));case 10:if(n=t.sent,r.loginLoading=!1,0==n.code){t.next=26;break}return i=Object.assign(i,{strContainer:r.strContainerRSA,dwProvType:r.dwProvTypeRSA}),t.next=16,Object(q["d"])(Object(c["a"])({},i));case 16:if(n=t.sent,0==n.code){t.next=26;break}return i=Object.assign(i,{strContainer:"",dwProvType:"1"}),t.next=21,Object(q["d"])(Object(c["a"])({},i));case 21:if(n=t.sent,0==n.code){t.next=26;break}return r.$message({customClass:"el-icon-warning-color",message:n.msg,type:"warning"}),r.loginLoading=!1,t.abrupt("return");case 26:return o=n.clientHello,t.next=29,Object(q["h"])({server_client_hello:o});case 29:return s=t.sent,l=s.datagram.uuid,u=s.datagram.serverHelloResult,t.next=34,Object(q["c"])(Object(c["a"])({serverHello:u,password:r.form.certificatePwd},i));case 34:return d=t.sent,m=d.clientAuth,t.next=38,Object(q["g"])({client_id:r.clientId,redirect_uri:r.redirectURI,uuid:l,str_client_auth:m,post_type:r.post_type,user_type:r.user_type,login_type:r.login_type});case 38:g=t.sent,localStorage.setItem("code",g.datagram.code),g.datagram.secondStep=r.logConfig.secondStep,e.$emit("toStepTwo"),f["a"].$emit("toStepTwo","3",g.datagram),r.loginLoading=!1,t.next=49;break;case 46:t.prev=46,t.t0=t["catch"](2),r.loginLoading=!1;case 49:t.next=100;break;case 51:return t.prev=51,t.next=54,Object(q["i"])({crosFlag:r.crosFlag});case 54:return p=t.sent,r.cliVer=p.version,h={strProvider:r.strProvider,strContainer:r.strContainerSM2,dwProvType:r.dwProvTypeSM2,crosFlag:r.crosFlag},t.next=59,Object(q["b"])(Object(c["a"])({},h));case 59:if(v=t.sent,0==v.code){t.next=74;break}return h=Object.assign(h,{strContainer:r.strContainerRSA,dwProvType:r.dwProvTypeRSA}),t.next=64,Object(q["b"])(Object(c["a"])({},h));case 64:if(v=t.sent,0==v.code){t.next=74;break}return h=Object.assign(h,{strContainer:"",dwProvType:"1"}),t.next=69,Object(q["b"])(Object(c["a"])({},h));case 69:if(v=t.sent,0==v.code){t.next=74;break}return r.$message({customClass:"el-icon-warning-color",message:v.msg,type:"warning"}),r.loginLoading=!1,t.abrupt("return");case 74:return t.next=76,Object(q["d"])(Object(c["a"])({authType:r.authType},h));case 76:return b=t.sent,w=b.clientHello,t.next=80,Object(q["h"])({server_client_hello:w});case 80:return _=t.sent,y=_.datagram.uuid,x=_.datagram.serverHelloResult,t.next=85,Object(q["c"])(Object(c["a"])({serverHello:x,password:r.form.certificatePwd},h));case 85:return C=t.sent,T=C.clientAuth,t.next=89,Object(q["g"])({client_id:r.clientId,redirect_uri:r.redirectURI,uuid:y,str_client_auth:T,post_type:r.post_type,user_type:r.user_type,login_type:r.login_type});case 89:k=t.sent,localStorage.setItem("code",k.datagram.code),k.datagram.secondStep=r.logConfig.secondStep,e.$emit("toStepTwo"),f["a"].$emit("toStepTwo","3",k.datagram),r.loginLoading=!1,t.next=100;break;case 97:t.prev=97,t.t1=t["catch"](51),r.loginLoading=!1;case 100:case"end":return t.stop()}}),t,null,[[2,46],[51,97]])})))()},taxCetifyCALogin:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a,i,n,o,s,l,u,d,m,g,p,h,v,b,w,_,y,x;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e,t.prev=1,n="0x802",t.next=5,Object(L["a"])({strContainer:"",strProvider:"",dwProvType:n,crosFlag:r.crosFlag});case 5:if(o=t.sent,-1!=o.code){t.next=15;break}return n="1",t.next=10,Object(L["a"])({strContainer:"",strProvider:"",dwProvType:n,crosFlag:r.crosFlag});case 10:if(s=t.sent,-1!=s.code){t.next=15;break}return r.$message({customClass:"el-icon-warning-color",message:s.msg,type:"warning"}),r.loginLoading=!1,t.abrupt("return");case 15:return t.next=17,Object(L["e"])({crosFlag:r.crosFlag});case 17:return t.sent,t.next=20,Object(L["d"])();case 20:return l=t.sent,u=null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a[0].strProvider,d=null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i[0].strContainer,m={strProvider:u,strContainer:d,dwProvType:n,crosFlag:r.crosFlag},t.next=26,Object(L["i"])(Object(c["a"])({password:r.form.certificatePwd},m));case 26:return t.sent,t.next=29,Object(L["c"])(Object(c["a"])({authType:"1"},m));case 29:return g=t.sent,p=g.clientHello,t.next=33,Object(L["h"])({server_client_hello:p});case 33:return h=t.sent,v=h.datagram.uuid,b=h.datagram.serverHelloResult,t.next=38,Object(L["b"])(Object(c["a"])({serverHello:b,password:r.form.certificatePwd},m));case 38:return w=t.sent,_=w.clientAuth,t.next=42,Object(L["g"])({client_id:r.clientId,redirect_uri:r.redirectURI,uuid:v,str_client_auth:_,post_type:r.post_type,user_type:r.user_type,login_type:r.login_type});case 42:return y=t.sent,t.next=45,Object(L["f"])(Object(c["a"])({dwCertNum:"2",dwFlag:"0x410000",cert:"",certInfoNo:"71"},m));case 45:x=t.sent,localStorage.setItem("code",y.datagram.code),y.datagram.secondStep=r.logConfig.secondStep,x?f["a"].$emit("toStepTwo","3",y.datagram,x.certInfo):f["a"].$emit("toStepTwo","3",y.datagram),t.next=54;break;case 51:t.prev=51,t.t0=t["catch"](1),r.loginLoading=!1;case 54:case"end":return t.stop()}}),t,null,[[1,51]])})))()}}},D=A,P=(r("1722"),Object(S["a"])(D,I,j,!1,null,"14cb83fb",null)),N=P.exports,F=r("a99c"),V={components:{quickLogin:$,taxCertificateLogin:N,loginsvg:F["a"],regist:n["default"]},props:{idSel:{type:String,default:function(){return""}}},data:function(){return{activeLoginType:"",logConfig:null,clientId:Object(g["b"])(),curParams:Object(g["e"])()}},computed:{agentTabList:function(){var e,t,r=[];(null===(e=this.$store.state.settings.logConfig)||void 0===e?void 0:e.agentTabList)&&(r="client"===Object(g["f"])("client_type")&&(null===(t=this.$store.state.settings.logConfig)||void 0===t?void 0:t.agentTabListClient)?this.$store.state.settings.logConfig.agentTabListClient:this.$store.state.settings.logConfig.agentTabList,this.activeLoginType=r[0].value,this.logConfig=r[0]);return r}},methods:{tabChange:function(e,t){"isActiveTaxC"==e?this.$emit("taxCLogin","isActiveTaxC"):"isActiveQuick"==e&&this.$emit("quickLogin","isActiveQuick"),this.logConfig=t,this.activeLoginType=e},regist:function(){var e=this,t=!1,r=window.location.href.split("?")[1];r&&r.split("&").forEach((function(r){if("client_type=client"===r){var a=e.$router.resolve({path:"/register",query:{client_id:e.clientId?e.clientId:"",client_type:"client"}});t=!0,window.open(a.href,"_blank")}})),t||(this.clientId?this.$router.push({path:"/register",query:{client_id:this.clientId}}):this.$router.push({path:"/register"}))},forgetBtn:function(){var e=this,t=!1,r=window.location.href.split("?")[1];r&&r.split("&").forEach((function(r){if("client_type=client"===r){var a=e.$router.resolve({path:"/forget",query:{client_id:e.clientId?e.clientId:"",client_type:"client",identity:"person"}});t=!0,window.open(a.href,"_blank")}})),t||(this.clientId?this.$router.push({path:"/forget",query:{client_id:this.clientId,identity:"person"}}):this.$router.push({path:"/forget",query:{identity:"person"}}))},findPhone:function(){var e=this,t=!1,r=window.location.href.split("?")[1];r&&r.split("&").forEach((function(r){if("client_type=client"===r){var a=e.$router.resolve({path:"/findPhoneNo",query:{client_id:e.clientId?e.clientId:"",client_type:"client"}});t=!0,window.open(a.href,"_blank")}})),t||(this.clientId?this.$router.push({path:"/findPhoneNo",query:{client_id:this.clientId}}):this.$router.push({path:"/findPhoneNo"}))}}},Q=V,U=(r("f1a6"),Object(S["a"])(Q,a,i,!1,null,"ffbff376",null));t["default"]=U.exports},"8e1b":function(e,t,r){"use strict";var a=r("e087"),i=r.n(a);i.a},"8e80":function(e,t,r){},"8eaa":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"left"}},[a("el-dialog",{staticClass:"choosedCls",attrs:{visible:e.dialogVisible,fullscreen:!0,showClose:!1,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(255, 255, 255, 0.6)"}},[a("div",{staticClass:"header"},[a("el-row",[a("el-form",{ref:"form",attrs:{model:e.formData}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"行政区划（省）","label-width":"7.1875rem"}},[a("el-select",{attrs:{disabled:""},model:{value:e.formData.administrativeAreaCode,callback:function(t){e.$set(e.formData,"administrativeAreaCode",t)},expression:"formData.administrativeAreaCode"}},e._l(e.administrativeAreaCodeProvinceList,(function(e){return a("el-option",{key:e.areaPrefix,attrs:{label:e.areaPreName,value:e.areaPrefix}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"（市）","label-width":"3.125rem"}},[a("el-select",{attrs:{clearable:"",disabled:e.singleCict},on:{change:e.selectCityList},model:{value:e.formData.administrativeAreaCityName,callback:function(t){e.$set(e.formData,"administrativeAreaCityName",t)},expression:"formData.administrativeAreaCityName"}},e._l(e.administrativeAreaCodeCityList,(function(e){return a("el-option",{key:e.administrativeAreaCode,attrs:{label:e.administrativeAreaName,value:e.administrativeAreaCode}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"（区）","label-width":"3.125rem"}},[a("el-select",{attrs:{clearable:"",disabled:e.disArea},on:{change:e.selectAreaList},model:{value:e.formData.administrativeAreaName,callback:function(t){e.$set(e.formData,"administrativeAreaName",t)},expression:"formData.administrativeAreaName"}},e._l(e.administrativeAreaCodeAreaList,(function(e){return a("el-option",{key:e.administrativeAreaCode,attrs:{label:e.administrativeAreaName,value:e.administrativeAreaCode}})})),1)],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"主管税务机关","label-width":"7.5rem"}},[a("el-select",{staticStyle:{"margin-left":"0.75rem"},attrs:{clearable:""},model:{value:e.formData.competentTaxAuthorityCode,callback:function(t){e.$set(e.formData,"competentTaxAuthorityCode",t)},expression:"formData.competentTaxAuthorityCode"}},e._l(e.competentTaxAuthorityList,(function(e){return a("el-option",{key:e.organizationCode,attrs:{label:e.organizationName,value:e.organizationCode}})})),1)],1)],1),a("el-col",{staticClass:"search-button",attrs:{span:1}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getTableList(1)}}},[e._v("查询")])],1),a("el-col",{staticClass:"search-button",attrs:{span:1}},[a("el-button",{staticClass:"greyButton",on:{click:e.handleClose}},[e._v("返回")])],1)],1)],1)],1),a("div",{staticClass:"footer"},[a("el-table",{staticClass:"tableContent",attrs:{data:e.tableData,align:"center"}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[a("img",{attrs:{src:r("275d")}}),a("div",{},[e._v("暂无数据")])]),a("el-table-column",{attrs:{type:"index",index:e.getIndex,label:"序号",width:"80",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"competentTaxOfficeName","min-width":"120",label:"主管税务机关",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"legalRepresentativeName","min-width":"90",label:"法定代表人姓名",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"productionAndOperationAddress","min-width":"100",align:"center",label:"生产经营地址","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"taxpayerStatus",label:"纳税人状态",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.taxpayerStatus.filter((function(e){return e.value===t.row.taxpayerStatus}))[0]&&e.taxpayerStatus.filter((function(e){return e.value===t.row.taxpayerStatus}))[0].label)+" ")]}}])}),a("el-table-column",{attrs:{align:"center",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"cz-box"},[a("el-button",{attrs:{type:"text",loading:e.loadingBtn},on:{click:function(r){return e.enterpriseSubmit(t.row)}}},[e._v("进入")])],1)]}}])})],1),e.hasMainReg?a("el-row",{staticClass:"page-bar",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticStyle:{display:"flex","justify-content":"flex-end",padding:"10px 0"}},[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,20,30,40],"page-size":e.pageSize,background:"",layout:"total,sizes, prev, pager, next,jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[a("span",{staticStyle:{"font-weight":"400"}},[e._v("每页显示")])])],1)],1):e._e()],1)])])],1)},i=[],n=(r("4160"),r("c975"),r("ac1f"),r("1276"),r("159b"),r("96cf"),r("1da1")),o=(r("1115"),r("79fa")),s=r("82c9"),c=r("f2e0"),l=(r("c533"),r("0a4f"),r("fc4b")),u=(r("35e0"),r("bfa8")),d=(r("4e48"),{name:"register",components:{Selectzgbm:s["a"]},props:{visibleRegister:Boolean,initData:{type:Object}},data:function(){return{disArea:!1,loadingBtn:!1,uuid:"",taxpayerStatus:c["a"],loading:!1,dialogVisible:this.visibleRegister,isShowTooltip:!1,administrativeAreaCodeAreaList:[],administrativeAreaCodeProvinceList:[],administrativeAreaCodeCityList:[],competentTaxAuthorityList:[],userinfo:{},queryScene:"100",administrativeAreaCodeSearch:"",administrativeAreaCodeCityStore:"",formData:{administrativeAreaCode:"",competentTaxAuthorityCode:"",competentTaxAuthorityName:"",administrativeAreaCityName:"",administrativeAreaName:"",fid:""},tableData:[],singleCict:!1,hasMainReg:!0,total:0,pageNum:1,pageSize:10,areaPrefix:"",manageArr:[],token:"",sqm:"",clientId:Object(l["b"])()}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=window.location.href.split("?")[1],r&&r.split("&").forEach((function(e){if("client_type=client"===e){var t=new Image,r="http://127.0.0.1:18604";t.src=r+"?form_height=625&form_width=1366&newGet="+Math.floor(1e5*Math.random())}})),e.$nextTick((function(){e.uuid=e.initData.uuid,e.tableData=e.initData.regNumberList,e.total=e.initData.total,void 0===e.total&&(e.hasMainReg=!1),"00"!=e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix.substring(2,4)?(e.areaPrefix=e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix.substring(0,2)+"0000",e.administrativeAreaCodeProvinceList.push({areaPreName:e.$store.state.settings.logConfig.areaInfoData[0].provincePreName,areaPrefix:e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix.substring(0,2)+"0000"}),e.formData.administrativeAreaCode=e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix.substring(0,2)+"0000",e.singleCict=!0,e.administrativeAreaCodeCityList.push({administrativeAreaName:e.$store.state.settings.logConfig.areaInfoData[0].areaPreName,administrativeAreaCode:e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix+"00"}),e.formData.administrativeAreaCityName=e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix+"00",e.selectCityList(e.formData.administrativeAreaCityName)):(e.areaPrefix=e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix+"00",e.administrativeAreaCodeProvinceList.push({areaPreName:e.$store.state.settings.logConfig.areaInfoData[0].areaPreName,areaPrefix:e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix+"00"}),e.formData.administrativeAreaCode=e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix+"00"),e.administrativeAreaCodeSearch=e.formData.administrativeAreaCode,Object(o["b"])({administrativeAreaCode:e.administrativeAreaCodeSearch}).then((function(t){1e3===t.code&&t.datagram.administrativeAreaCodeList&&(e.administrativeAreaCodeCityList=t.datagram.administrativeAreaCodeList)})),(!e.tableData||e.tableData&&0===e.tableData.length)&&e.getTableList(1)}));case 3:case"end":return t.stop()}}),t)})))()},methods:{handleClose:function(){var e=window.location.href.split("?")[1];e&&e.split("&").forEach((function(e){if("client_type=client"===e){var t=new Image,r="http://127.0.0.1:18604";t.src=r+"?form_height=556&form_width=674&newGet="+Math.floor(1e5*Math.random())}})),this.$emit("update:visibleRegister",!1)},enterpriseSubmit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.loadingBtn=!0,Object(u["r"])({reg_number:e.reg_number,uuid:t.uuid}).then((function(e){setTimeout((function(){t.loadingBtn=!1}),8e3),t.$emit("getLoginNext",e)})).catch((function(){t.loadingBtn=!1}));case 2:case"end":return r.stop()}}),r)})))()},onMouseOver:function(e){this.isShowTooltip=this.$refs[e].value.length<=13},selectAreaList:function(e){var t=this;if(e){this.administrativeAreaCodeSearch=e;var r=e;Object(o["d"])({administrativeAreaCode:r}).then((function(e){1e3===e.code&&(t.competentTaxAuthorityList=e.datagram.organizationName)})),this.formData.competentTaxAuthorityCode=""}else this.administrativeAreaCodeSearch=this.administrativeAreaCodeCityStore,this.competentTaxAuthorityList=[],this.formData.competentTaxAuthorityCode=""},selectCityList:function(e){var t=this;this.administrativeAreaCodeCityStore=e,this.formData.administrativeAreaName="",e?(this.administrativeAreaCodeSearch=e,Object(o["b"])({administrativeAreaCode:e}).then((function(r){1e3===r.code&&r.datagram.administrativeAreaCodeList&&r.datagram.administrativeAreaCodeList.length>0?(t.disArea=!1,t.administrativeAreaCodeAreaList=r.datagram.administrativeAreaCodeList,t.competentTaxAuthorityList=[],t.formData.competentTaxAuthorityCode=""):1e3===r.code&&0==r.datagram.administrativeAreaCodeList.length&&(t.disArea=!0,t.competentTaxAuthorityList=[],t.formData.competentTaxAuthorityCode="",t.selectAreaList(e))}))):(this.administrativeAreaCodeCityStore="",this.administrativeAreaCodeSearch=this.areaPrefix,this.administrativeAreaCodeAreaList=[],this.competentTaxAuthorityList=[],this.formData.competentTaxAuthorityCode="")},formatTime:function(e){return-1!=e.indexOf("-")?e:e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2)},getTableList:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e&&(t.pageNum=e),t.loading=!0,t.tableData=[],t.hasMainReg?Object(u["p"])({administrativeAreaCode:t.administrativeAreaCodeSearch,competentTaxAuthorityCode:t.formData.competentTaxAuthorityCode,pageNo:t.pageNum,pageSize:t.pageSize,uuid:t.uuid}).then((function(e){1e3===e.code&&e.datagram&&(t.tableData=e.datagram.regNumberList,t.total=e.datagram.total),t.loading=!1})).catch((function(e){t.loading=!1})):Object(u["q"])({administrativeAreaCode:t.administrativeAreaCodeSearch,competentTaxAuthorityCode:t.formData.competentTaxAuthorityCode,uuid:t.uuid}).then((function(e){1e3===e.code&&e.datagram&&(t.tableData=e.datagram.regNumberList,t.total=e.datagram.total),t.loading=!1})).catch((function(e){t.loading=!1}));case 4:case"end":return r.stop()}}),r)})))()},handleSizeChange:function(e){this.pageNum=1,this.pageSize=e,this.getTableList()},handleCurrentChange:function(e){this.pageNum=e,this.getTableList()},getIndex:function(e){return(this.pageNum-1)*this.pageSize+e+1}}}),m=d,f=(r("4295"),r("2877")),g=Object(f["a"])(m,a,i,!1,null,"58b5a94c",null);t["a"]=g.exports},"8f80":function(e,t,r){"use strict";var a=r("48ad"),i=r.n(a);i.a},9019:function(e,t,r){"use strict";var a=r("3019"),i=r.n(a);i.a},"939a":function(e,t,r){"use strict";var a=r("ff1e"),i=r.n(a);i.a},"94a8":function(e,t,r){"use strict";var a=r("3899"),i=r.n(a);i.a},"951a":function(e,t,r){},"95a1":function(e,t,r){},"97f6":function(e,t,r){},"986e":function(e,t,r){"use strict";var a=r("2b0e");t["a"]=new a["default"]},"99fc":function(e,t,r){},"9ed6":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-index-contain",staticStyle:{height:"100%"}},[e.isYCLogin?a("div",{staticClass:"loginCls"},[a("div",{staticClass:"headerCls"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.provinceNameShow,expression:"provinceNameShow"}],staticStyle:{display:"flex","align-items":"center"}},[a("span",{staticClass:"logoNameCls"},[e._v(e._s(e.provinceName))]),e.showDppt?a("span",{staticClass:"logoNameDp"},[e._v(e._s(e.dpptTitle))]):e._e(),a("span",{staticStyle:{"font-size":"16px",color:"#fff",margin:"0 12px 0 10px"}},[e._v(" | ")]),a("span",{staticClass:"logoNameClsRight"},[e._v(e._s(e.$i18n.t("language_variable30")))])]),a("div",{staticStyle:{display:"flex"}},[e.$store.state.settings.logConfig&&e.$store.state.settings.logConfig.newLogin?a("div",{staticClass:"login-back",staticStyle:{"margin-right":"20px"},on:{click:e.toNewLogin}},[e._v(e._s(e.$store.state.settings.logConfig.newLogin[0].name))]):e._e(),e.showLanguage?a("div",{staticStyle:{"margin-right":"20px"}},[a("ChannelSelected")],1):e._e(),"en_US"!==e.sessionStorage.getItem("lang")?a("div",{staticClass:"login-back old"},[e.showFunction?a("i",{staticClass:"el-icon-s-promotion login-back icon_"}):e._e(),e.showFunction?a("span",{on:{click:e.toOld}},[e._v("旧版登录")]):e._e()]):e._e(),e.$store.state.settings.logConfig&&e.$store.state.settings.logConfig.elseLink&&"en_US"!==e.sessionStorage.getItem("lang")?a("div",{staticClass:"login-back",staticStyle:{"margin-right":"20px"},on:{click:e.toElesLink}},[a("span",[e._v(e._s(e.$store.state.settings.logConfig.elseLink[0].linkName))])]):e._e(),a("div",{staticClass:"login-back",on:{click:e.backToDJ}},[a("span",[e._v(e._s(e.$i18n.t("language_variable31")))])])])]),a("div",{staticClass:"mainCls"},[a("div",{staticClass:"container"},[a("div",{staticClass:"bgImgL",style:{backgroundImage:"url("+e.getBgImg()+")"}},["np"==e.client_type||"en_US"===e.sessionStorage.getItem("lang")||e.showDppt?e._e():a("noNeedLogin")],1),e.isStepTwo?e._e():a("div",{staticClass:"login_box",style:{left:e.newBgLeft}},[e.showQrAdd?a("div",{staticClass:"qr_ddd"},[e.isLogConfig?a("div",{staticClass:"formContentP"},[a("scanQRCodes")],1):e._e()]):e._e(),e.showQrAdd?a("div",{staticClass:"fen_ge_xian"}):e._e(),a("div",{staticClass:"password_ddd"},[a("div",{staticClass:"tabsCls"},[a("el-row",{staticStyle:{height:"100%","padding-bottom":"0.75rem"}},[e.tabListData.includes("enterpriseBusiness")?a("el-col",{staticClass:"justifyCenterEnd",staticStyle:{height:"100%"},attrs:{span:e.tabWidth}},[a("span",{class:"enterpriseBusiness"==e.roleName?"activeCls":"normalCls",on:{click:e.enterpriseBusinessTab}},[e._v(e._s(e.enterpriseTitle))])]):e._e(),e.tabListData.includes("personalBusiness")?a("el-col",{staticClass:"justifyCenterEnd",staticStyle:{height:"100%"},attrs:{span:e.tabWidth}},[a("span",{class:"personalBusiness"==e.roleName?"activeCls":"normalCls",on:{click:e.personalBusinessTab}},[e._v(e._s(e.personalTitle))])]):e._e(),e.tabListData.includes("agentBusinessTab")?a("el-col",{staticClass:"justifyCenterEnd",staticStyle:{height:"100%"},attrs:{span:e.tabWidth}},[a("span",{class:"agentBusinessTab"==e.roleName?"activeCls":"normalCls",on:{click:e.agentBusinessTab}},[e._v("代理业务")])]):e._e()],1),a("el-row",{staticStyle:{height:"0.25rem"}},[e.tabListData.includes("enterpriseBusiness")?a("el-col",{class:"enterpriseBusiness"==e.roleName?"tabSelect":"tabUnSelect",attrs:{span:e.tabWidth}}):e._e(),e.tabListData.includes("personalBusiness")?a("el-col",{class:"personalBusiness"==e.roleName?"tabSelect":"tabUnSelect",attrs:{span:e.tabWidth}}):e._e(),e.tabListData.includes("agentBusinessTab")?a("el-col",{class:"agentBusinessTab"==e.roleName?"tabSelect":"tabUnSelect",attrs:{span:e.tabWidth}}):e._e()],1)],1),e.isLogConfig?a("div",{staticClass:"formContentE"},["enterpriseBusiness"==e.roleName?a("enterpriseBusiness",{attrs:{idSel:e.idSel},on:{normalLogin:e.normalLogin,quickLogin:e.quickLogin,taxCLogin:e.taxCLogin,changeTitle:e.changeEnterpriseTitle,toSpecialLogin:e.toSpecialLogin,backToFirst:e.backToFirst}}):e._e(),"personalBusiness"==e.roleName?a("personBusiness",{attrs:{idSel:e.idSel},on:{changeTitle:e.changePersonalTitle}}):e._e(),"agentBusinessTab"==e.roleName?a("agentBusiness",{on:{quickLogin:e.quickLogin,taxCLogin:e.taxCLogin}}):e._e()],1):e._e()])]),e.isStepTwo?a("div",[a("div",{staticClass:"formDivCls",style:{width:"isActiveTaxC"==e.activeLoginType?"787px":"674px",height:"isActiveTaxC"==e.activeLoginType?"670px":"556px",left:e.newBgLeft}},[a("div",{},[a("span",{staticClass:"forget",attrs:{type:"text"},on:{click:e.handle_enterprise_certificate}},[e._v(e._s("< 返回"))])]),a("div",{staticClass:"tabsCls1"},[a("el-row",{staticStyle:{"padding-bottom":"16px"}},[a("el-col",{staticClass:"justifyCenterEnd1",attrs:{span:24}},["1"===e.secondTabLogin?a("span",{staticClass:"activeCls"},[e._v("企业登录")]):"2"===e.secondTabLogin?a("span",{staticClass:"activeCls"},[e._v("自然人登录")]):"3"===e.secondTabLogin?a("span",{staticClass:"activeCls"},[e._v("代理机构登录")]):e._e()])],1)],1),a("div",{staticClass:"formContent"},["1"===e.secondTabLogin&&"isActiveQuick"==e.activeLoginType?a("normalTwiceE",{attrs:{oneValueToTwo:e.oneValueToTwo},on:{handleEnterpriseCertificate:e.handle_enterprise_certificate}}):e._e(),"1"===e.secondTabLogin&&"isActiveTaxC"==e.activeLoginType?a("certificateTwiceE",{attrs:{oneValueToTwo:e.oneValueToTwo,creditCodePwd:e.creditCodePwd},on:{backToFirst:e.backToFirst,handleEnterpriseCertificate:e.handle_enterprise_certificate}}):e._e(),"1"===e.secondTabLogin&&"isSpecialLogin"==e.activeLoginType?a("specialTwiceE",{attrs:{oneValueToTwo:e.oneValueToTwo},on:{handleEnterpriseCertificate:e.handle_enterprise_certificate}}):e._e(),"2"===e.secondTabLogin?a("loginTwiceP",{attrs:{oneValueToTwo:e.oneValueToTwo},on:{naturalPersonReturn:e.handle_natural_person}}):e._e(),"3"===e.secondTabLogin&&"isActiveTaxC"==e.activeLoginType?a("certificateTwiceA",{attrs:{oneValueToTwo:e.oneValueToTwo},on:{handleAgentCompany:e.handle_agent_company}}):e._e(),"3"===e.secondTabLogin&&"isActiveTaxC"!==e.activeLoginType?a("normalTwiceA",{attrs:{oneValueToTwo:e.oneValueToTwo},on:{modifUuid:e.modifUuid,handleAgentCompany:e.handle_agent_company}}):e._e()],1)])]):e._e()])]),a("div",{staticStyle:{width:"100%"}},[a("Footer")],1)]):a("div",{staticClass:"logout",staticStyle:{margin:"0 auto","min-height":"32.5rem"}},[a("img",{staticClass:"logout-img",attrs:{src:r("6b57")}}),a("div",{staticClass:"login-tip"},[e._v("正在登录跳转中...")])]),a("questionaire",{ref:"questionaireform"})],1)},i=[],n=(r("c740"),r("4160"),r("c975"),r("b0c0"),r("ac1f"),r("5319"),r("1276"),r("159b"),r("5530")),o=(r("96cf"),r("1da1")),s=(r("1115"),r("6451")),c=r("322c"),l=r("d392"),u=r("a994"),d=r("770f"),m=r("8bb6"),f=r("3a15"),g=r("fc4b"),p=r("986e"),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"100%"}},[e.secondStep.scanList.length>1?r("div",{staticClass:"tabsCls"},[r("div",{staticClass:"justifyCenterEnd",staticStyle:{height:"100%","padding-bottom":"0.75rem"}},e._l(e.secondStep.scanList,(function(t){return r("div",{key:t.value,staticStyle:{position:"relative",padding:"0 23px"}},[r("span",{class:e.QR_tab==t.value?"activeCls":"normalCls",on:{click:function(r){return e.handle_QR_change(t.value)}}},[e._v(e._s(t.name))]),r("div",{class:e.QR_tab==t.value?"tabSelect":"tabUnSelect"})])})),0)]):e._e(),r("div",["0"==e.QR_tab?r("div",{staticStyle:{margin:"70px 105px 0 105px"}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("div",{staticClass:"sms"},[r("el-form-item",[r("el-row",[r("el-input",{staticClass:"mobileInp",staticStyle:{width:"100%"},attrs:{readonly:"",placeholder:"请输入手机号码"},model:{value:e.oneValueToTwo.mobile,callback:function(t){e.$set(e.oneValueToTwo,"mobile","string"===typeof t?t.trim():t)},expression:"oneValueToTwo.mobile"}})],1)],1),r("el-form-item",{attrs:{prop:"smscode"}},[r("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[r("el-input",{staticClass:"smsInp",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},model:{value:e.form.smscode,callback:function(t){e.$set(e.form,"smscode","string"===typeof t?t.trim():t)},expression:"form.smscode"}}),r("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1)],1),r("el-row",[r("el-col",[r("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1):e._e(),"2"==e.QR_tab?r("div",[r("div",{staticClass:"QR_"},[r("div",{staticClass:"justifyCenter",staticStyle:{width:"13.1875rem",height:"12.75rem"}},[r("div",{staticStyle:{position:"absolute"},attrs:{id:"qrcodeDiv"}}),!0===e.expired?r("div",{staticClass:"cover",on:{click:e.refreshCode}},[r("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e()])]),r("div",{staticStyle:{"text-align":"center","align-items":"center","margin-top":"0.9375rem"}},[r("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),e._v(" 我已阅读并同意 "),r("span",{staticStyle:{color:"#4285F4",cursor:"pointer"},on:{click:e.handle_show_agreement}},[e._v("《人脸识别服务协议》")])],1),r("div",{staticClass:"_tips"},[r("el-button",{staticStyle:{width:"100%",margin:"0.625rem 0"},attrs:{type:"primary",disabled:!e.checked},on:{click:function(t){return e.CheckState(e.qrCode_id)}}},[e._v("验证完成")]),r("p",[e._v("温馨提示：")]),r("p",[e._v("1.请使用微信扫描此二维码进行实名验证")]),r("p",{staticStyle:{"margin-bottom":"0"}},[e._v("2.暂不支持外籍人士、港澳台同胞线上实名验证")])],1)]):e._e(),"1"==e.QR_tab?r("div",[r("p",{staticClass:"QR_1_text"},[e._v("请使用"+e._s(e.areaName)+"税务APP扫码进行人脸验证")]),r("div",{staticClass:"QR_"},[r("qrCode",{ref:"qrCode",attrs:{uuid:e.oneValueToTwo.uuid}})],1)]):e._e(),"3"==e.QR_tab?r("div",[r("p",{staticClass:"QR_1_text"},[e._v("请使用个人所得税APP扫码进行人脸验证")]),r("div",{staticClass:"QR_"},[r("qrCodeIts",{ref:"qrCodeIts",attrs:{uuid:e.oneValueToTwo.uuid,outTime:e.outTime}})],1)]):e._e()]),r("el-dialog",{attrs:{title:"协议签订",visible:e.dialogVisible,"show-close":!1,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{height:"9.375rem","overflow-y":"auto","margin-bottom":"0.625rem"},domProps:{innerHTML:e._s(t.agreementText)}})})),0):e._e(),e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{display:"inline-block","margin-right":"2.5rem"}},[r("el-checkbox",{model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}}),e._v(" 我已同意并阅读 "),r("span",{staticStyle:{color:"#4285F4"}},[e._v("《"+e._s(t.agreementName)+"》")])],1)})),0):e._e(),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.asddd}},[e._v("同 意")])],1)]),r("el-dialog",{attrs:{title:e.dialogTitle,"append-to-body":"",visible:e.dialogAgreement,"close-on-click-modal":!1,width:"776px"},on:{"update:visible":function(t){e.dialogAgreement=t}}},[r("div",{domProps:{innerHTML:e._s(e.serviceText)}}),r("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement=!1}}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:e.agreementName,visible:e.dialogAgreement1,"append-to-body":"","close-on-click-modal":!1,width:"813px"},on:{"update:visible":function(t){e.dialogAgreement1=t}}},[r("div",{domProps:{innerHTML:e._s(e.agreementText)}}),r("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement1=!1}}},[e._v("确 定")])],1)]),r("IDTypeShoose",{ref:"IDTypeShoose",on:{tempRelatedType:e.tempRelatedType}}),r("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),r("signedagreement",{ref:"signedagreement",on:{handleReturn:e.handle_return_,handleChangeFlag:e.handleChangeFlag}}),r("authorize-qr-code",{ref:"authorizeQrCode",on:{handleServiceAgreement:e.handleServiceAgreement,submitA:e.submitA,handleClose:e.handleClose}}),r("RiskQrCode",{ref:"riskQrcode",on:{riskOver:e.riskOver}})],1)},v=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"1.875rem","line-height":"1.4375rem"}}),e._v("刷新")])}],b=(r("a15b"),r("b85c")),w=r("ade3"),_=r("3352"),y=r("0a4f"),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"justifyCenter"},[e.codeShow?a("img",{staticClass:"centerLogo",attrs:{src:r("7e9b")}}):e._e(),a("div",{attrs:{id:"qrcodeDivE"}}),!0===e.expired?a("div",{staticClass:"cover",on:{click:e.refreshCode}},[a("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e()])},C=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])}],T=r("17c9"),k=r("1cb3"),S={name:"qrCode",props:{uuid:String},data:function(){return{exit_variable:!0,expired:!1,qrcode:"",qrCode_id:"",codeShow:!1,timeout:null,interval:null,client_id:Object(g["b"])(),redirect_uri:Object(g["j"])()}},methods:{createQRcode:function(){var e=this;this.expired=!1,Object(k["e"])({uuid:this.uuid}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.CheckState(t.datagram.qrcode_id),e.setQRCodeTimeout()})).catch((function(t){window.clearTimeout(e.timeout),e.expired=!0}))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),e.expired=!0}),6e5)},showQRCode:function(e){var t=document.getElementById("qrcodeDivE");t.innerHTML="";var r=new QRCode(t,{text:e,width:211,height:204});r._el.title="",this.codeShow=!0},CheckState:function(e){var t=this;t.expired||(t.interval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={uuid:t.uuid,qrcode_id:e,client_id:t.client_id,redirect_uri:t.redirect_uri},Object(T["y"])(a).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===a.code&&a.datagram?2==a.datagram.qrcode_status?(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.$parent.handle_jump(a)):1==a.datagram.qrcode_status?t.exit_variable&&t.CheckState(e):3==a.datagram.qrcode_status&&(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0):(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0,a.msg&&t.$message({customClass:"el-icon-warning-color",message:a.msg,type:"warning"}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(r){r&&r.stack&&r.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(t.interval),t.CheckState(e)):(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0)}));case 2:case"end":return r.stop()}}),r)}))),4e3))},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.createQRcode()},clearTimers:function(){clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},beforeDestroy:function(){this.exit_variable=!1,clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},R=S,$=(r("18af"),r("2877")),I=Object($["a"])(R,x,C,!1,null,"94f365aa",null),j=I.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"justifyCenter"},[r("img",{attrs:{id:"qrcodeDivE"}}),!0===e.expired?r("div",{staticClass:"cover",on:{click:e.refreshCode}},[r("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e()])},q=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])}],L={name:"qrCode",props:{uuid:String,outTime:Boolean},data:function(){return{exit_variable:!0,expired:!1,qrcode:"",qrCode_id:"",codeShow:!1,timeout:null,interval:null,client_id:Object(g["b"])(),redirect_uri:Object(g["j"])()}},methods:{createQRcode:function(){var e=this;this.expired=!1,Object(T["d"])({uuid:this.uuid}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.CheckState(t.datagram.qrcode_id),e.setQRCodeTimeout(),e.outTime&&(window.clearTimeout(e.timeout),e.expired=!0)})).catch((function(t){window.clearTimeout(e.timeout),e.expired=!0}))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),e.expired=!0}),6e5)},showQRCode:function(e){var t=document.getElementById("qrcodeDivE");t.src="data:image/jpg;base64,"+e,this.codeShow=!0},CheckState:function(e){var t=this;t.expired||(t.interval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={uuid:t.uuid,qrcode_id:e,client_id:t.client_id,redirect_uri:t.redirect_uri},Object(T["n"])(a).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===a.code&&a.datagram?2==a.datagram.qrcode_status?(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.$parent.handle_jump(a)):1==a.datagram.qrcode_status?t.exit_variable&&t.CheckState(e):3==a.datagram.qrcode_status&&(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0):(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0,a.msg&&t.$message({customClass:"el-icon-warning-color",message:a.msg,type:"warning"}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(r){r&&r.stack&&r.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(t.interval),t.CheckState(e)):(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0)}));case 2:case"end":return r.stop()}}),r)}))),4e3))},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.createQRcode()},clearTimers:function(){clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},beforeDestroy:function(){this.exit_variable=!1,clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},A=L,D=(r("b769"),Object($["a"])(A,O,q,!1,null,"38ab05f4",null)),P=D.exports,N=r("457b"),F=r("cf45"),V=r("549d"),Q=r("cb61"),U=r("37b6"),E=r("05ec"),B=r("c7e3"),z=r("ed08"),M=r("dcad"),H={name:"loginTwiceP",components:{authorizeQrCode:N["a"],qrCode:j,qrCodeIts:P,IDTypeShoose:V["a"],fillForm:Q["default"],signedagreement:U["default"],RiskQrCode:N["a"]},props:{oneValueToTwo:{type:Object,default:function(){return{}}}},data:function(){var e;return e={newEtaxUuid:"",newEtaxFlag:!1,outTime:!1,relatedType:"",showRelatedType:[],relationTypes:[],agreementText:"",agreementName:"",dialogAgreement1:!1,checkTrustedLevel_:null,areaPrefix:"",is_TAB:!1,areaInfoData:[],areaName:"",checked:!0,list:[],bz:!1,form:{smscode:""},dialogVisible:!1,asddd:function(){},validate_status:!1,cliState:Object(g["l"])(),clientId:Object(g["b"])(),redirectURI:Object(g["j"])(),loginLoading:!1,rules:{smscode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}]},buttonName:"获取验证码",getCodeDisabled:!1,time:119,interval:"",expired:!0,qrcode:"",qrCode_id:"",qrTimeout:null,qrInterval:null},Object(w["a"])(e,"agreementName",""),Object(w["a"])(e,"dialogAgreement",!1),Object(w["a"])(e,"agreementText",""),Object(w["a"])(e,"QR_tab",null),Object(w["a"])(e,"faceAgreement",{}),Object(w["a"])(e,"dialogTitle",""),Object(w["a"])(e,"serviceText",""),Object(w["a"])(e,"showChangeBtn",!1),Object(w["a"])(e,"areaName",""),Object(w["a"])(e,"secondStep",null),Object(w["a"])(e,"temploginCode",""),e},watch:{time:{handler:function(e){e<0&&(this.buttonName="重新发送",this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0},oneValueToTwo:{handler:function(e){var t=this;if(e){var r=e.secondStep;r.scanList.length>0&&(this.showChangeBtn=!0),r.scanList.length>0&&(this.QR_tab=r.scanList[0].value,this.$nextTick((function(){t.handle_QR_change(t.QR_tab)}))),this.secondStep=r}},deep:!0,immediate:!0}},beforeDestroy:function(){clearInterval(this.interval),clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.interval=null,this.qrTimeout=null,this.qrInterval=null},created:function(){var e=this.$store.state.settings.logConfig;if(e){var t,r=null===(t=this.$store.state.settings.logConfig)||void 0===t?void 0:t.areaInfoData,a=r[0].areaPrefix;this.areaName=r[0].areaName,"3100"===a&&this.getNewestAgreement()}this.init()},methods:{handle_return_:function(){this.$emit("handleAgentCompany")},handleClose:function(){localStorage.removeItem("token"),this.$cookie.remove("token"),location.reload()},closeFillForm:function(){location.reload()},submitA:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={uid:e.checkTrustedLevel_.uid,fid:e.checkTrustedLevel_.fid,reg_number:e.checkTrustedLevel_.reg_number,qrCode_id:e.$refs.authorizeQrCode.qrCode_id},!e.newEtaxFlag){t.next=8;break}return t.next=4,Object(M["d"])(r);case 4:return t.next=6,e.new_push_login();case 6:t.next=13;break;case 8:return r=Object(n["a"])(Object(n["a"])({},r),{},{relatedType:e.relatedType}),t.next=11,Object(B["e"])(r);case 11:return t.next=13,e.push_login();case 13:case"end":return t.stop()}}),t)})))()},handleServiceAgreement:function(){this.dialogAgreement1=!0},handle_authorize:function(){var e=this,t=this;if(!this.is_TAB)return t.$refs.authorizeQrCode.title="确认授权",t.$refs.authorizeQrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(this.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.authorizeQrCode.dialogVisible=!0,void t.$refs.authorizeQrCode.creatVerifyQRCode("1");Object(_["f"])({uid:this.checkTrustedLevel_.uid,agreementCode:"03"}).then((function(r){"1000"==r.code&&(Object(_["e"])({agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(t){"1000"==t.code&&(e.agreementText=t.datagram.agreementText,e.agreementName=t.datagram.agreementName)})),"0"==r.datagram[0].signingStatus?(e.$alert('<p>您尚未签订<span style="color:#4285F4;cursor:pointer;" id="service_agreement">《'.concat(r.datagram[0].agreementName,"》</span>，请先阅读协议并确认是否同意签订。如果您不同意，您可持有效身份证件前往线下办税服务场所办理业务。</p>"),"提示",{dangerouslyUseHTMLString:!0,showCancelButton:!0,showConfirmButton:!0,cancelButtonText:"不同意",confirmButtonText:"同意",cancelButtonClass:"my_cancelButtonClass",confirmButtonClass:"my_confirmButtonClass"}).then((function(){Object(_["k"])({uid:e.checkTrustedLevel_.uid,agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(r){"1000"==r.code&&(t.$refs.authorizeQrCode.title="确认授权",t.$refs.authorizeQrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(e.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.authorizeQrCode.dialogVisible=!0,t.$refs.authorizeQrCode.creatVerifyQRCode("1"))}))})).catch((function(){t.$refs.authorizeQrCode.dialogVisible=!1})),e.$nextTick((function(){var t=document.querySelector("#service_agreement");t.onclick=e.handleServiceAgreement}))):"1"==r.datagram[0].signingStatus&&(t.$refs.authorizeQrCode.title="确认授权",t.$refs.authorizeQrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(e.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.authorizeQrCode.dialogVisible=!0,t.$refs.authorizeQrCode.creatVerifyQRCode("1")))}))},checkRisk:function(e,t,r){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={uid:r,idCardType:"",idCard:"",scene:"04",fid:t,enterpriseName:"",relatedType:a.relatedType},n={},e.prev=2,e.next=5,Object(B["n"])(i);case 5:if(n=e.sent,1e3!==n.code||!n.datagram.businessMessage){e.next=9;break}return a.$confirm(n.datagram.businessMessage,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1");case 8:case"end":return e.stop()}}),e)})))).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["a"])(1);case 2:case"end":return e.stop()}}),e)})))),e.abrupt("return",!0);case 9:if(1e3!==n.code||"100"==n.datagram.controlMeasures){e.next=19;break}return a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1"),e.abrupt("return",!0);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e["catch"](2),e.next=25,Object(F["a"])(1);case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,null,[[2,21]])})))()},riskOver:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return localStorage.setItem("token",r.nextRes.datagram.access_token),r.$cookie.set("token",r.nextRes.datagram.access_token),a={uid:r.nextRes.datagram.uid,fid:r.nextRes.datagram.fid,reg_number:r.nextRes.datagram.reg_number,relatedType:r.relatedType,qrCode_id:t},e.next=5,Object(B["c"])(a);case 5:return e.next=7,r.push_login();case 7:case"end":return e.stop()}}),e)})))()},tempRelatedType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.relatedType=e.relatedType,t,"00"!=e.qrzt?t.$confirm("是否确认成为该企业的"+e.relatedTypeName+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={relatedType:e.relatedType,client_id:t.clientId,redirect_uri:t.redirectURI,uuid:t.uuid},Object(T["G"])(a).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return setTimeout((function(){t.$store.dispatch("app/getIdentityLoad",!1)}),8e3),localStorage.setItem("token",a.datagram.access_token),t.$cookie.set("token",a.datagram.access_token),t.nextRes=a,r.next=6,t.checkRisk(e.relatedTypeName,a.datagram.fid,a.datagram.uid);case 6:if(i=r.sent,!i){r.next=9;break}return r.abrupt("return");case 9:if("N"!==a.datagram.sfsl){r.next=26;break}if("四级"==a.datagram.trusted_level||"五级"==a.datagram.trusted_level||"4"==a.datagram.trusted_level||"5"==a.datagram.trusted_level||"1"==a.datagram.overseas){r.next=17;break}localStorage.setItem("token",a.datagram.access_token),t.$cookie.set("token",a.datagram.access_token),t.checkTrustedLevel_=a.datagram,t.handle_authorize(),r.next=24;break;case 17:return localStorage.setItem("token",a.datagram.access_token),t.$cookie.set("token",a.datagram.access_token),n={uid:a.datagram.uid,fid:a.datagram.fid,reg_number:a.datagram.reg_number,relatedType:t.relatedType},r.next=22,Object(B["c"])(n);case 22:return r.next=24,t.push_login();case 24:r.next=37;break;case 26:if("Y"!==a.datagram.sfsl){r.next=36;break}return localStorage.setItem("token",a.datagram.access_token),t.$cookie.set("token",a.datagram.access_token),o={uid:a.datagram.uid,fid:a.datagram.fid,reg_number:a.datagram.reg_number,relatedType:t.relatedType},r.next=32,Object(B["c"])(o);case 32:return r.next=34,t.push_login();case 34:r.next=37;break;case 36:t.push_login();case 37:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})))).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:setTimeout((function(){t.$store.dispatch("app/getIdentityLoad",!1)}),8e3);case 1:case"end":return e.stop()}}),e)})))):t.push_login();case 3:case"end":return r.stop()}}),r)})))()},new_push_login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(F["a"])(1);case 6:Object(T["v"])({client_id:e.clientId,redirect_uri:e.redirectURI,uuid:e.newEtaxUuid}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1e3!==r.code){t.next=15;break}return t.next=3,Object(y["a"])(r.datagram.access_token);case 3:if(a=t.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){t.next=12;break}return e.handle_jump_before(r,o),t.abrupt("return");case 12:return e.$refs.fillformDialog.fillForm=i,e.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t)})))()},push_login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(F["a"])(1);case 6:r=e,Object(T["B"])({client_id:r.clientId,redirect_uri:r.redirectURI,relatedType:e.relatedType,uuid:e.uuid}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var i,n,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(setTimeout((function(){e.$store.dispatch("app/getIdentityLoad",!1)}),8e3),1e3!==a.code){t.next=16;break}return t.next=4,Object(y["a"])(a.datagram.access_token);case 4:if(i=t.sent,n=i.userformInfo,o=i.pass,s=i.userInfo,!o){t.next=13;break}return r.handle_jump_before(a,s),t.abrupt("return");case 13:return r.$refs.fillformDialog.fillForm=n,r.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e.$store.dispatch("app/getIdentityLoad",!1)}));case 8:case"end":return t.stop()}}),t)})))()},getValidCode:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,!r.getCodeDisabled){t.next=4;break}return e.$message.warning("请勿重复发送验证码！"),t.abrupt("return");case 4:a={uuid:r.oneValueToTwo.uuid},r.getCodeDisabled=!0,r.time=119,r.buttonName="120s",r.interval=window.setInterval((function(){r.buttonName=r.time+"s",--r.time}),1e3),Object(k["u"])(a).then((function(t){if(1e3===t.code){var a=e;a.smscode_id=t.datagram.smscode_id,e.$message.success("短信验证码成功发送到"+t.datagram.mobile)}else clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"}));case 10:case"end":return t.stop()}}),t)})))()},handleChangeFlag:function(){this.showUpdatePwd=!0},handle_jump_before:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$refs.signedagreement.handle_jump_before(e,t,"/userCenter/baseInfoP");case 1:case"end":return a.stop()}}),a)})))()},login:function(){var e=this,t=this;t.loginLoading||t.$refs.form.validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=10;break}if(localStorage.removeItem("token"),e.$cookie.remove("token"),localStorage.setItem("clientId",t.clientId),t.smscode_id){r.next=7;break}return t.$message.warning("请先获取验证码!"),r.abrupt("return");case 7:t.loginLoading=!0,i={client_id:t.clientId,redirect_uri:t.redirectURI,smscode_id:t.smscode_id,smsCode:t.form.smscode,uuid:t.oneValueToTwo.uuid},Object(T["a"])(i).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===a.code&&(setTimeout((function(){t.loginLoading=!1}),8e3),e.handle_jump(a));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(){window.setTimeout((function(){t.loginLoading=!1}),100)}));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},init:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(E["h"])({}).then((function(t){e.relationTypes=t.datagram})).catch((function(){}));case 2:case"end":return t.stop()}}),t)})))()},showRelatedTypeName:function(e){for(var t=0;t<this.relationTypes.length;t++)if(this.relationTypes[t].relationTypeCode===e)return this.relationTypes[t].relationTypeName},NEWtempRelatedType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("N"!==e.datagram.sfsl){r.next=7;break}localStorage.setItem("token",e.datagram.access_token),t.$cookie.set("token",e.datagram.access_token),t.checkTrustedLevel_=e.datagram,t.handle_authorize(),r.next=15;break;case 7:if("Y"!==e.datagram.sfsl){r.next=15;break}return localStorage.setItem("token",e.datagram.access_token),t.$cookie.set("token",e.datagram.access_token),a={uid:e.datagram.uid,fid:e.datagram.fid,reg_number:e.datagram.reg_number},r.next=13,Object(M["c"])(a);case 13:return r.next=15,t.new_push_login();case 15:case"end":return r.stop()}}),r)})))()},handle_jump:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i,n,s,c,l,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.datagram.newEtaxFlag){r.next=5;break}return a=[],e.datagram.relationPoList.forEach((function(e){"00"!=e.qrzt&&a.push(t.showRelatedTypeName(e.zrrlx))})),t.$confirm("是否确认成为该企业的"+a.join("/")+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.newEtaxFlag=!0,t.newEtaxUuid=e.datagram.uuid,t.NEWtempRelatedType(e);case 3:case"end":return r.stop()}}),r)})))),r.abrupt("return",!1);case 5:if(e.datagram.access_token){r.next=23;break}if(t.uuid=e.datagram.uuid,1!==e.datagram.relationPoList.length){r.next=12;break}return r.next=10,t.tempRelatedType({qrzt:e.datagram.relationPoList[0].qrzt,relatedType:e.datagram.relationPoList[0].zrrlx,relatedTypeName:t.showRelatedTypeName(e.datagram.relationPoList[0].zrrlx)});case 10:r.next=21;break;case 12:for(i=[],n=0;n<e.datagram.relationPoList.length;n++)i.push(e.datagram.relationPoList[n].zrrlx);return t.$refs.IDTypeShoose.showRelatedType=i,t.$refs.IDTypeShoose.relationPoList=e.datagram.relationPoList,t.$refs.IDTypeShoose.uuid=t.uuid,t.$refs.IDTypeShoose.relatedType=i[0],r.next=20,t.$refs.IDTypeShoose.init();case 20:t.$refs.IDTypeShoose.IDTypeVisible=!0;case 21:r.next=37;break;case 23:return r.next=25,Object(y["a"])(e.datagram.access_token);case 25:if(s=r.sent,c=s.userformInfo,l=s.pass,u=s.userInfo,!l){r.next=34;break}return t.handle_jump_before(e,u),r.abrupt("return");case 34:return t.$refs.fillformDialog.fillForm=c,t.$refs.fillformDialog.fillFormVisible=!0,r.abrupt("return");case 37:case"end":return r.stop()}}),r)})))()},handle_QR_change:function(e){var t=this;this.QR_tab=e,0!=e&&(1==e?(clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.qrTimeout=null,this.qrInterval=null,this.$nextTick((function(){t.$refs.qrCode.createQRcode()}))):3==e?(clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.qrTimeout=null,this.qrInterval=null,this.$nextTick((function(){t.$refs.qrCodeIts.createQRcode()})),this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].itsScan&&Object(z["a"])()?(this.outTime=!0,this.$message.error("个人所得税APP扫脸服务时间为5:00-23:00")):this.outTime=!1):this.createQRcode())},refreshCode:function(){window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.expired=!1,this.createQRcode()},handle_show_agreement:function(){this.serviceText?this.dialogAgreement=!0:this.$message({customClass:"el-icon-warning-color",message:"暂无协议内容",type:"warning"})},createQRcode:function(){var e=this;this.expired=!1,Object(k["d"])({uuid:this.oneValueToTwo.uuid}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.setQRCodeTimeout()})).catch((function(t){window.clearTimeout(e.qrTimeout),e.expired=!0}))},showQRCode:function(e){var t=document.getElementById("qrcodeDiv");t.innerHTML="";var r=new QRCode(t,{text:e,width:211,height:204});r._el.title=""},CheckState:function(e){var t=this;t.expired||(t.qrInterval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={qrcode_id:e,client_id:t.clientId,redirect_uri:t.redirectURI,uuid:t.oneValueToTwo.uuid},Object(T["s"])(a).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===a.code&&a.datagram?2==a.datagram.qrcode_status?(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.handle_jump(a)):1==a.datagram.qrcode_status?(window.clearTimeout(t.qrInterval),t.CheckState(e)):3==a.datagram.qrcode_status&&(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.expired=!0):(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.expired=!0,a.msg&&t.$message({customClass:"el-icon-warning-color",message:a.msg,type:"warning"}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(r){r&&r.stack&&r.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(t.qrInterval),t.CheckState(e)):(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.expired=!0)}));case 2:case"end":return r.stop()}}),r)}))),4e3))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.qrTimeout),e.qrTimeout=window.setTimeout((function(){window.clearTimeout(e.qrTimeout),e.expired=!0}),6e5)},getNewestAgreement:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(_["d"])({}).then((function(t){if(t&&t.datagram.length>0){var r,a=Object(b["a"])(t.datagram);try{var i=function(){var t=r.value;"03"===t.agreementCode&&Object(_["a"])({agreementCode:t.agreementCode,agreementVersion:t.agreementVersion}).then((function(r){e.dialogTitle=t.agreementName,e.serviceText=r.datagram.agreementText}))};for(a.s();!(r=a.n()).done;)i()}catch(n){a.e(n)}finally{a.f()}}}));case 1:case"end":return t.stop()}}),t)})))()}},mounted:function(){"3100"===localStorage.getItem("areaPrefix")&&(this.is_TAB=!0)}},W=H,Z=(r("939a"),Object($["a"])(W,h,v,!1,null,"3063f65c",null)),Y=Z.exports,J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[e.secondStep.length>1?r("div",{staticClass:"tabsCls"},[r("div",{staticClass:"justifyCenterEnd",staticStyle:{height:"100%","padding-bottom":"10px"}},e._l(e.secondStep,(function(t){return r("div",{key:t.name,staticStyle:{position:"relative",padding:"0 23px"}},[r("span",{class:e.activeLoginName==t.name?"activeCls":"normalCls",on:{click:function(r){return e.tabChange(t)}}},[e._v(e._s(t.name))]),r("div",{class:e.activeLoginName==t.name?"tabSelect":"tabUnSelect"})])})),0)]):e._e(),r(e.activeLoginType,{tag:"component",attrs:{taxPlays:e.taxPlays,uuid:e.oneValueToTwo.uuid,newEtaxFlag:e.oneValueToTwo.newEtaxFlag,scanList:e.scanList}}),r("el-dialog",{attrs:{title:"协议签订",visible:e.dialogVisible,"show-close":!1,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{height:"9.375rem","overflow-y":"auto","margin-bottom":"0.625rem"},domProps:{innerHTML:e._s(t.agreementText)}})})),0):e._e(),e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{display:"inline-block","margin-right":"2.5rem"}},[r("el-checkbox",{model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}}),e._v(" 我已同意并阅读 "),r("span",{staticStyle:{color:"#4285F4"}},[e._v("《"+e._s(t.agreementName)+"》")])],1)})),0):e._e(),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.asddd}},[e._v("同 意")])],1)]),r("signedagreement",{ref:"signedagreement",on:{handleReturn:e.handle_return_}})],1)},K=[],G=(r("45fc"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticStyle:{"padding-top":"10px"}},[a("el-col",{staticStyle:{"margin-top":"69px"}},[a("el-form",{ref:"form",staticStyle:{width:"418px",margin:"0 auto"},attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{prop:"user_id"}},[a("el-row",[a("el-select",{staticClass:"taxOfficer",staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择办税（费）人员"},on:{change:e.handle_change},model:{value:e.form.user_id,callback:function(t){e.$set(e.form,"user_id",t)},expression:"form.user_id"}},e._l(e.taxPlays,(function(t){return a("el-option",{key:t.user_id,attrs:{label:t.full_name+" "+(t.mobile||t.id_card)+" "+e.getSelectRelatedType(t.relatedType),value:t.user_id}})})),1)],1)],1),a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"password"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLock,expression:"showCapsLock"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-row",[a("el-input",{staticClass:"pwdInp",staticStyle:{width:"100%"},attrs:{type:e.eyesFlag?"text":"password",maxlength:"20",placeholder:e.placeHolderPwd},on:{focus:function(t){e.showTemptip=!0},blur:e.capsBlur},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}},[e.eyesFlag?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"})])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTemptip,expression:"showTemptip"}],staticClass:"form-temp-tip"},[e._v("请输入"),a("span",[e._v("个人")]),e._v("用户密码")]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.slideType,expression:"slideType"}]},[a("el-row",[a("el-col",[a("sliderValidate",{ref:"sliderValidate",attrs:{status:e.validate_status},on:{"update:status":function(t){e.validate_status=t}}})],1)],1)],1),a("el-row",[a("el-col",[a("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1),a("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),a("el-dialog",{attrs:{title:e.agreementName,visible:e.dialogAgreement,"append-to-body":"","close-on-click-modal":!1,width:"813px"},on:{"update:visible":function(t){e.dialogAgreement=t}}},[a("div",{domProps:{innerHTML:e._s(e.agreementText)}}),a("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement=!1}}},[e._v("确 定")])],1)]),a("qr-code",{ref:"qrCode",on:{handleServiceAgreement:e.handleServiceAgreement,submitA:e.submitA,handleClose:e.handleClose}}),e.slideType?e._e():a("slideVerify",{ref:"slideVerify",on:{handleStatus:e.handle_validate_status}}),a("RiskQrCode",{ref:"riskQrcode",on:{riskOver:e.riskOver}})],1)}),X=[],ee=(r("7db0"),r("56d6")),te=r("e014"),re=r("17dc"),ae={mixins:[re["a"]],components:{QrCode:N["a"],slideVerify:ee["a"],sliderValidate:te["a"],fillForm:Q["default"],RiskQrCode:N["a"]},props:["taxPlays","uuid","newEtaxFlag"],data:function(){return{relatedType:"",showRelatedType:[],relationTypes:[],agreementText:"",agreementName:"",dialogAgreement:!1,checkTrustedLevel_:null,areaPrefix:"",is_TAB:!1,areaInfoData:[],areaName:"",taxPlays_item:null,form:{user_id:"",password:""},rules:{user_id:[{required:!0,message:"请先选择办税（费）人员",trigger:["blur","change"]}],password:[{required:!0,message:"请输入个人用户密码",trigger:"blur"}]},eyesFlag:!1,showTemptip:!1,loginLoading:!1,validate_status:!1,clientId:Object(g["b"])(),redirectURI:Object(g["j"])()}},computed:{slideType:function(){var e=!1;return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].sliderValidateOld&&(e=this.$store.state.settings.logConfig.switch[0].sliderValidateOld),e},placeHolderPwd:function(){var e={5100:!0,3702:!0,1200:!0,1400:!0,4500:!0,2102:!0};return e[this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix]?"个人用户密码(初始密码为证件号码后六位)":"个人用户密码"}},mounted:function(){this.init(),"3100"===localStorage.getItem("areaPrefix")&&(this.is_TAB=!0)},methods:{handle_validate_status:function(e){this.validate_status=e,this.login()},handleClose:function(){localStorage.removeItem("token"),this.$cookie.remove("token"),location.reload()},closeFillForm:function(){location.reload()},getSelectRelatedType:function(e){return"01"===e?"法人代表人":"02"===e?"财务负责人":"03"===e?"办税员":"05"===e?"管理员":"06"===e?"出口退税人员":"07"===e?"领票员":"08"===e?"社保联系人":"09"===e?"开票员":"99"===e?"其他人员":""},handle_change:function(e){this.taxPlays_item=this.taxPlays.find((function(t){return t.user_id==e})),this.taxPlays_item.mobile?"0"===this.taxPlays_item.bz&&(this.bz=!0):this.$message({duration:5e3,message:"您的手机号为空，请您登录系统后，在账户中心的手机号码修改菜单中添加默认手机号。",type:"warning"})},NEWtempRelatedType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("N"!==e.datagram.sfsl){r.next=7;break}localStorage.setItem("token",e.datagram.access_token),t.$cookie.set("token",e.datagram.access_token),t.checkTrustedLevel_=e.datagram,t.handle_authorize(),r.next=15;break;case 7:if("Y"!==e.datagram.sfsl){r.next=15;break}return localStorage.setItem("token",e.datagram.access_token),t.$cookie.set("token",e.datagram.access_token),a={uid:e.datagram.uid,fid:e.datagram.fid,reg_number:e.datagram.reg_number},r.next=13,Object(M["c"])(a);case 13:return r.next=15,t.new_push_login();case 15:case"end":return r.stop()}}),r)})))()},new_push_login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(F["a"])(1);case 6:Object(T["v"])({client_id:e.clientId,redirect_uri:e.redirectURI,uuid:e.uuid}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1e3!==r.code){t.next=15;break}return t.next=3,Object(y["a"])(r.datagram.access_token);case 3:if(a=t.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){t.next=12;break}return e.$parent.handle_jump_before(r,o),t.abrupt("return");case 12:return e.$refs.fillformDialog.fillForm=i,e.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t)})))()},login:function(){var e=this,t=this;t.loginLoading||t.$refs.form.validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=20;break}if(e.validate_status||e.slideType){r.next=6;break}return e.$refs.slideVerify.visible=!0,r.abrupt("return");case 6:if(e.validate_status||!e.slideType){r.next=9;break}return e.$message.warning("请先进行滑块验证！"),r.abrupt("return");case 9:if(localStorage.removeItem("token"),e.$cookie.remove("token"),localStorage.setItem("clientId",t.clientId),t.loginLoading=!0,"00"==e.taxPlays_item.qrzt||"1"==e.newEtaxFlag){r.next=18;break}return r.next=16,e.tempRelatedType({relatedType:e.taxPlays_item.relatedType,relatedTypeName:e.showRelatedTypeName(e.taxPlays_item.relatedType)});case 16:r.next=20;break;case 18:i={uuid:t.uuid,client_id:t.clientId,user_id:t.form.user_id,password:t.form.password,redirect_uri:t.redirectURI,newEtaxFlag:e.newEtaxFlag},Object(T["x"])(i).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i,n,s,c,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1e3!==a.code){r.next=21;break}if(setTimeout((function(){t.loginLoading=!1,e.validate_status=!1,e.slideType&&e.$refs.sliderValidate.reset()}),8e3),"1"!=e.newEtaxFlag||a.datagram.access_token){r.next=7;break}return i=[],a.datagram.relationPoList.forEach((function(t){"00"!=t.qrzt&&i.push(e.showRelatedTypeName(t.zrrlx))})),e.$confirm("是否确认成为该企业的"+i.join("/")+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.uuid=a.datagram.uuid,e.NEWtempRelatedType(a);case 2:case"end":return t.stop()}}),t)})))),r.abrupt("return",!1);case 7:return r.next=9,Object(y["a"])(a.datagram.access_token);case 9:if(n=r.sent,s=n.userformInfo,c=n.pass,l=n.userInfo,!c){r.next=18;break}return e.$parent.handle_jump_before(a,l),r.abrupt("return");case 18:return e.$refs.fillformDialog.fillForm=s,e.$refs.fillformDialog.fillFormVisible=!0,r.abrupt("return");case 21:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(){window.setTimeout((function(){t.loginLoading=!1,e.validate_status=!1,e.slideType&&e.$refs.sliderValidate.reset()}),100)}));case 20:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},init:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(E["h"])({}).then((function(t){e.relationTypes=t.datagram})).catch((function(){}));case 2:case"end":return t.stop()}}),t)})))()},showRelatedTypeName:function(e){for(var t=0;t<this.relationTypes.length;t++)if(this.relationTypes[t].relationTypeCode===e)return this.relationTypes[t].relationTypeName},checkRisk:function(e,t,r){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={uid:r,idCardType:"",idCard:"",scene:"04",fid:t,enterpriseName:"",relatedType:a.relatedType},n={},e.prev=2,e.next=5,Object(B["n"])(i);case 5:if(n=e.sent,1e3!==n.code||!n.datagram.businessMessage){e.next=9;break}return a.$confirm(n.datagram.businessMessage,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1");case 8:case"end":return e.stop()}}),e)})))).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["a"])(1);case 2:case"end":return e.stop()}}),e)})))),e.abrupt("return",!0);case 9:if(1e3!==n.code||"100"==n.datagram.controlMeasures){e.next=19;break}return a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1"),e.abrupt("return",!0);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e["catch"](2),e.next=25,Object(F["a"])(1);case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,null,[[2,21]])})))()},riskOver:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={uid:r.nextRes.datagram.uid,fid:r.nextRes.datagram.fid,reg_number:r.nextRes.datagram.reg_number,relatedType:r.relatedType,qrCode_id:t},e.next=3,Object(B["c"])(a);case 3:return e.next=5,r.push_login();case 5:case"end":return e.stop()}}),e)})))()},tempRelatedType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.relatedType=e.relatedType,a=t,i={uuid:a.uuid,client_id:a.clientId,user_id:a.form.user_id,password:a.form.password,redirect_uri:a.redirectURI},Object(T["w"])(i).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(i){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("是否确认成为该企业的"+e.relatedTypeName+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return setTimeout((function(){a.loginLoading=!1,t.validate_status=!1,t.slideType&&t.$refs.sliderValidate.reset()}),8e3),localStorage.setItem("token",i.datagram.access_token),t.$cookie.set("token",i.datagram.access_token),t.checkTrustedLevel_=i.datagram,t.nextRes=i,r.next=7,t.checkRisk(e.relatedTypeName,i.datagram.fid,i.datagram.uid);case 7:if(n=r.sent,!n){r.next=10;break}return r.abrupt("return");case 10:if("四级"==i.datagram.trusted_level||"五级"==i.datagram.trusted_level||"4"==i.datagram.trusted_level||"5"==i.datagram.trusted_level||"1"==i.datagram.overseas){r.next=14;break}t.handle_authorize(),r.next=19;break;case 14:return o={uid:i.datagram.uid,fid:i.datagram.fid,reg_number:i.datagram.reg_number,relatedType:t.relatedType},r.next=17,Object(B["c"])(o);case 17:return r.next=19,t.push_login();case 19:case"end":return r.stop()}}),r)})))).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["a"])(1);case 2:a.loginLoading=!1,t.validate_status=!1,t.slideType&&t.$refs.sliderValidate.reset();case 5:case"end":return e.stop()}}),e)}))));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.loginLoading=!1,t.validate_status=!1,t.slideType&&t.$refs.sliderValidate.reset();case 3:case"end":return e.stop()}}),e)}))));case 4:case"end":return r.stop()}}),r)})))()},push_login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(F["a"])(1);case 6:r=e,a={uuid:r.uuid,client_id:r.clientId,user_id:r.form.user_id,password:r.form.password,redirect_uri:r.redirectURI},Object(T["x"])(a).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var i,n,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1e3!==a.code){t.next=16;break}return setTimeout((function(){e.slideType&&e.$refs.sliderValidate.reset(),r.loginLoading=!1,e.validate_status=!1}),8e3),t.next=4,Object(y["a"])(a.datagram.access_token);case 4:if(i=t.sent,n=i.userformInfo,o=i.pass,s=i.userInfo,!o){t.next=13;break}return e.$parent.handle_jump_before(a,s),t.abrupt("return");case 13:return e.$refs.fillformDialog.fillForm=n,e.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){window.setTimeout((function(){e.slideType&&e.$refs.sliderValidate.reset(),r.loginLoading=!1,e.validate_status=!1}),100)}));case 9:case"end":return t.stop()}}),t)})))()},submitA:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={uid:e.checkTrustedLevel_.uid,fid:e.checkTrustedLevel_.fid,reg_number:e.checkTrustedLevel_.reg_number,qrCode_id:e.$refs.qrCode.qrCode_id},"1"!=e.newEtaxFlag){t.next=8;break}return t.next=4,Object(M["d"])(r);case 4:return t.next=6,e.new_push_login();case 6:t.next=13;break;case 8:return r=Object(n["a"])(Object(n["a"])({},r),{},{relatedType:e.relatedType}),t.next=11,Object(B["e"])(r);case 11:return t.next=13,e.push_login();case 13:case"end":return t.stop()}}),t)})))()},handleServiceAgreement:function(){this.dialogAgreement=!0},handle_authorize:function(){var e=this,t=this;if(!this.is_TAB)return t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+this.areaName+"税务APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,void t.$refs.qrCode.creatVerifyQRCode("1");Object(_["f"])({uid:this.checkTrustedLevel_.uid,agreementCode:"03"}).then((function(r){"1000"==r.code&&(Object(_["e"])({agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(t){"1000"==t.code&&(e.agreementText=t.datagram.agreementText,e.agreementName=t.datagram.agreementName)})),"0"==r.datagram[0].signingStatus?(e.$alert('<p>您尚未签订<span style="color:#4285F4;cursor:pointer;" id="service_agreement">《'.concat(r.datagram[0].agreementName,"》</span>，请先阅读协议并确认是否同意签订。如果您不同意，您可持有效身份证件前往线下办税服务场所办理业务。</p>"),"提示",{dangerouslyUseHTMLString:!0,showCancelButton:!0,showConfirmButton:!0,cancelButtonText:"不同意",confirmButtonText:"同意",cancelButtonClass:"my_cancelButtonClass",confirmButtonClass:"my_confirmButtonClass"}).then((function(){Object(_["k"])({uid:e.checkTrustedLevel_.uid,agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(r){"1000"==r.code&&(t.$refs.qrCode.row2=t.form,t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+e.areaName+"税务APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,t.$refs.qrCode.creatVerifyQRCode("1"))}))})).catch((function(){t.$refs.qrCode.dialogVisible=!1})),e.$nextTick((function(){var t=document.querySelector("#service_agreement");t.onclick=e.handleServiceAgreement}))):"1"==r.datagram[0].signingStatus&&(t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+e.areaName+"税务APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,t.$refs.qrCode.creatVerifyQRCode("1")))}))}}},ie=ae,ne=(r("abc3"),Object($["a"])(ie,G,X,!1,null,"79756c2a",null)),oe=ne.exports,se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{staticStyle:{"padding-top":"10px"}},[r("el-col",{staticStyle:{"margin-top":"69px"}},[r("el-form",{ref:"form",staticStyle:{width:"418px",margin:"0 auto"},attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{prop:"user_id"}},[r("el-row",[r("el-select",{staticClass:"taxOfficer",staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择办税（费）人员"},on:{change:e.handle_change},model:{value:e.form.user_id,callback:function(t){e.$set(e.form,"user_id",t)},expression:"form.user_id"}},e._l(e.taxPlays,(function(t){return r("el-option",{key:t.user_id,attrs:{label:t.full_name+" "+(t.mobile||t.id_card)+" "+e.getSelectRelatedType(t.relatedType),value:t.user_id}})})),1)],1)],1),r("el-form-item",{attrs:{prop:"smscode"}},[r("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[r("el-input",{staticClass:"smsInp",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},model:{value:e.form.smscode,callback:function(t){e.$set(e.form,"smscode","string"===typeof t?t.trim():t)},expression:"form.smscode"}}),r("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.slideType,expression:"slideType"}]},[r("el-row",[r("el-col",[r("sliderValidate",{ref:"sliderValidate",attrs:{status:e.validate_status},on:{"update:status":function(t){e.validate_status=t}}})],1)],1)],1),r("el-row",[r("el-col",[r("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1),r("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),r("el-dialog",{attrs:{title:e.agreementName,visible:e.dialogAgreement,"append-to-body":"","close-on-click-modal":!1,width:"813px"},on:{"update:visible":function(t){e.dialogAgreement=t}}},[r("div",{domProps:{innerHTML:e._s(e.agreementText)}}),r("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement=!1}}},[e._v("确 定")])],1)]),r("qr-code",{ref:"qrCode",on:{handleServiceAgreement:e.handleServiceAgreement,submitA:e.submitA,handleClose:e.handleClose}}),e.slideType?e._e():r("slideVerify",{ref:"slideVerify",on:{handleStatus:e.handle_validate_status}}),r("RiskQrCode",{ref:"riskQrcode",on:{riskOver:e.riskOver}})],1)},ce=[],le={components:{QrCode:N["a"],slideVerify:ee["a"],sliderValidate:te["a"],fillForm:Q["default"],RiskQrCode:N["a"]},props:["taxPlays","uuid","newEtaxFlag"],data:function(){return{relatedType:"",showRelatedType:[],relationTypes:[],agreementText:"",agreementName:"",dialogAgreement:!1,checkTrustedLevel_:null,areaPrefix:"",is_TAB:!1,areaInfoData:[],areaName:"",taxPlays_item:null,form:{smscode:""},rules:{smscode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}]},smscode_id:"",loginLoading:!1,validate_status:!1,clientId:Object(g["b"])(),redirectURI:Object(g["j"])(),buttonName:"获取验证码",getCodeDisabled:!1,time:119,interval:""}},computed:{slideType:function(){var e=!1;return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].sliderValidateOld&&(e=this.$store.state.settings.logConfig.switch[0].sliderValidateOld),e}},mounted:function(){this.init(),"3100"===localStorage.getItem("areaPrefix")&&(this.is_TAB=!0)},methods:{handle_validate_status:function(e){this.validate_status=e,this.login()},handleClose:function(){localStorage.removeItem("token"),this.$cookie.remove("token"),location.reload()},closeFillForm:function(){location.reload()},getSelectRelatedType:function(e){return"01"===e?"法人代表人":"02"===e?"财务负责人":"03"===e?"办税员":"05"===e?"管理员":"06"===e?"出口退税人员":"07"===e?"领票员":"08"===e?"社保联系人":"09"===e?"开票员":"99"===e?"其他人员":""},handle_change:function(e){this.taxPlays_item=this.taxPlays.find((function(t){return t.user_id==e})),this.taxPlays_item.mobile?"0"===this.taxPlays_item.bz&&(this.bz=!0):this.$message({duration:5e3,message:"您的手机号为空，请您登录系统后，在账户中心的手机号码修改菜单中添加默认手机号。",type:"warning"})},login:function(){var e=this,t=this;t.loginLoading||t.$refs.form.validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=20;break}if(e.validate_status||e.slideType){r.next=6;break}return e.$refs.slideVerify.visible=!0,r.abrupt("return");case 6:if(e.validate_status||!e.slideType){r.next=9;break}return e.$message.warning("请先进行滑块验证！"),r.abrupt("return");case 9:if(localStorage.removeItem("token"),e.$cookie.remove("token"),localStorage.setItem("clientId",t.clientId),t.loginLoading=!0,"00"==e.taxPlays_item.qrzt||"1"==e.newEtaxFlag){r.next=18;break}return r.next=16,e.tempRelatedType({relatedType:e.taxPlays_item.relatedType,relatedTypeName:e.showRelatedTypeName(e.taxPlays_item.relatedType)});case 16:r.next=20;break;case 18:i={uuid:t.uuid,client_id:t.clientId,user_id:t.form.user_id,smscode:t.form.smscode,smscode_id:t.smscode_id,redirect_uri:t.redirectURI,newEtaxFlag:e.newEtaxFlag},Object(T["q"])(i).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i,n,s,c,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1e3!==a.code){r.next=21;break}if(setTimeout((function(){e.slideType&&e.$refs.sliderValidate.reset(),t.loginLoading=!1,e.validate_status=!1}),8e3),"1"!=e.newEtaxFlag||a.datagram.access_token){r.next=7;break}return i=[],a.datagram.relationPoList.forEach((function(t){"00"!=t.qrzt&&i.push(e.showRelatedTypeName(t.zrrlx))})),e.$confirm("是否确认成为该企业的"+i.join("/")+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.uuid=a.datagram.uuid,e.NEWtempRelatedType(a);case 2:case"end":return t.stop()}}),t)})))),r.abrupt("return",!1);case 7:return r.next=9,Object(y["a"])(a.datagram.access_token);case 9:if(n=r.sent,s=n.userformInfo,c=n.pass,l=n.userInfo,!c){r.next=18;break}return e.$parent.handle_jump_before(a,l),r.abrupt("return");case 18:return e.$refs.fillformDialog.fillForm=s,e.$refs.fillformDialog.fillFormVisible=!0,r.abrupt("return");case 21:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(){window.setTimeout((function(){e.slideType&&e.$refs.sliderValidate.reset(),t.loginLoading=!1,e.validate_status=!1}),100)}));case 20:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},init:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(E["h"])({}).then((function(t){e.relationTypes=t.datagram})).catch((function(){}));case 2:case"end":return t.stop()}}),t)})))()},showRelatedTypeName:function(e){for(var t=0;t<this.relationTypes.length;t++)if(this.relationTypes[t].relationTypeCode===e)return this.relationTypes[t].relationTypeName},checkRisk:function(e,t,r){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={uid:r,idCardType:"",idCard:"",scene:"04",fid:t,enterpriseName:"",relatedType:a.relatedType},n={},e.prev=2,e.next=5,Object(B["n"])(i);case 5:if(n=e.sent,1e3!==n.code||!n.datagram.businessMessage){e.next=9;break}return a.$confirm(n.datagram.businessMessage,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1");case 8:case"end":return e.stop()}}),e)})))).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["a"])(1);case 2:case"end":return e.stop()}}),e)})))),e.abrupt("return",!0);case 9:if(1e3!==n.code||"100"==n.datagram.controlMeasures){e.next=19;break}return a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1"),e.abrupt("return",!0);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e["catch"](2),e.next=25,Object(F["a"])(1);case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,null,[[2,21]])})))()},riskOver:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={uid:r.nextRes.datagram.uid,fid:r.nextRes.datagram.fid,reg_number:r.nextRes.datagram.reg_number,relatedType:r.relatedType,qrCode_id:t},e.next=3,Object(B["c"])(a);case 3:return e.next=5,r.push_login();case 5:case"end":return e.stop()}}),e)})))()},tempRelatedType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.relatedType=e.relatedType,a=t,a.loginLoading=!1,t.validate_status=!1,i={uuid:a.uuid,client_id:a.clientId,user_id:a.form.user_id,smscode:a.form.smscode,smscode_id:a.smscode_id,redirect_uri:a.redirectURI},Object(T["r"])(i).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(i){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("是否确认成为该企业的"+e.relatedTypeName+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return localStorage.setItem("token",i.datagram.access_token),t.$cookie.set("token",i.datagram.access_token),t.checkTrustedLevel_=i.datagram,t.nextRes=i,r.next=6,t.checkRisk(e.relatedTypeName,i.datagram.fid,i.datagram.uid);case 6:if(a=r.sent,!a){r.next=9;break}return r.abrupt("return");case 9:if("四级"==i.datagram.trusted_level||"五级"==i.datagram.trusted_level||"4"==i.datagram.trusted_level||"5"==i.datagram.trusted_level||"1"==i.datagram.overseas){r.next=13;break}t.handle_authorize(),r.next=18;break;case 13:return n={uid:i.datagram.uid,fid:i.datagram.fid,reg_number:i.datagram.reg_number,relatedType:t.relatedType},r.next=16,Object(B["c"])(n);case 16:return r.next=18,t.push_login();case 18:case"end":return r.stop()}}),r)})))).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["a"])(1);case 2:t.slideType&&t.$refs.sliderValidate.reset(),a.loginLoading=!1,t.validate_status=!1;case 5:case"end":return e.stop()}}),e)}))));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.slideType&&t.$refs.sliderValidate.reset(),a.loginLoading=!1,t.validate_status=!1;case 3:case"end":return e.stop()}}),e)}))));case 6:case"end":return r.stop()}}),r)})))()},push_login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(F["a"])(1);case 6:r=e,a={uuid:r.uuid,client_id:r.clientId,user_id:r.form.user_id,smscode:r.form.smscode,smscode_id:r.smscode_id,redirect_uri:r.redirectURI},Object(T["q"])(a).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var i,n,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.slideType&&e.$refs.sliderValidate.reset(),1e3!==a.code){t.next=17;break}return setTimeout((function(){r.loginLoading=!1,e.validate_status=!1}),8e3),t.next=5,Object(y["a"])(a.datagram.access_token);case 5:if(i=t.sent,n=i.userformInfo,o=i.pass,s=i.userInfo,!o){t.next=14;break}return e.$parent.handle_jump_before(a,s),t.abrupt("return");case 14:return e.$refs.fillformDialog.fillForm=n,e.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){window.setTimeout((function(){r.loginLoading=!1,e.validate_status=!1,e.slideType&&e.$refs.sliderValidate.reset()}),100)}));case 9:case"end":return t.stop()}}),t)})))()},submitA:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={uid:e.checkTrustedLevel_.uid,fid:e.checkTrustedLevel_.fid,reg_number:e.checkTrustedLevel_.reg_number,qrCode_id:e.$refs.qrCode.qrCode_id},"1"!=e.newEtaxFlag||res.datagram.access_token){t.next=8;break}return t.next=4,Object(M["d"])(r);case 4:return t.next=6,e.new_push_login();case 6:t.next=13;break;case 8:return r=Object(n["a"])(Object(n["a"])({},r),{},{relatedType:e.relatedType}),t.next=11,Object(B["e"])(r);case 11:return t.next=13,e.push_login();case 13:case"end":return t.stop()}}),t)})))()},handleServiceAgreement:function(){this.dialogAgreement=!0},handle_authorize:function(){var e=this,t=this;if(!this.is_TAB)return t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+this.areaName+"税务APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,void t.$refs.qrCode.creatVerifyQRCode("1");Object(_["f"])({uid:this.checkTrustedLevel_.uid,agreementCode:"03"}).then((function(r){"1000"==r.code&&(Object(_["e"])({agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(t){"1000"==t.code&&(e.agreementText=t.datagram.agreementText,e.agreementName=t.datagram.agreementName)})),"0"==r.datagram[0].signingStatus?(e.$alert('<p>您尚未签订<span style="color:#409EFF;cursor:pointer;" id="service_agreement">《'.concat(r.datagram[0].agreementName,"》</span>，请先阅读协议并确认是否同意签订。如果您不同意，您可持有效身份证件前往线下办税服务场所办理业务。</p>"),"提示",{dangerouslyUseHTMLString:!0,showCancelButton:!0,showConfirmButton:!0,cancelButtonText:"不同意",confirmButtonText:"同意",cancelButtonClass:"my_cancelButtonClass",confirmButtonClass:"my_confirmButtonClass"}).then((function(){Object(_["k"])({uid:e.checkTrustedLevel_.uid,agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(r){"1000"==r.code&&(t.$refs.qrCode.row2=t.form,t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+e.areaName+"税务APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,t.$refs.qrCode.creatVerifyQRCode("1"))}))})).catch((function(){t.$refs.qrCode.dialogVisible=!1})),e.$nextTick((function(){var t=document.querySelector("#service_agreement");t.onclick=e.handleServiceAgreement}))):"1"==r.datagram[0].signingStatus&&(t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+e.areaName+"税务APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,t.$refs.qrCode.creatVerifyQRCode("1")))}))},checkTel:function(e){var t=/^(1)\d{10}$/;return t.test(e)},getValidCode:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.user_id){t.next=3;break}return e.$message.warning("请先选择办税（费）人员!"),t.abrupt("return");case 3:if(!e.getCodeDisabled){t.next=6;break}return e.$message.warning("请勿重复发送验证码！"),t.abrupt("return");case 6:r={uuid:e.uuid,client_id:e.clientId,user_id:e.form.user_id},a=e,a.getCodeDisabled=!0,a.time=119,a.buttonName="120s",a.interval=window.setInterval((function(){a.buttonName=a.time+"s",--a.time}),1e3),Object(T["C"])(r).then((function(t){1e3===t.code?(e.smscode_id=t.datagram.smscode_id,e.$message.success("短信验证码成功发送到"+t.datagram.mobile)):(clearInterval(e.interval),e.interval=null,e.getCodeDisabled=!1,e.buttonName="获取验证码")})).catch((function(){clearInterval(e.interval),e.interval=null,e.getCodeDisabled=!1,e.buttonName="获取验证码"}));case 13:case"end":return t.stop()}}),t)})))()},NEWtempRelatedType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("N"!==e.datagram.sfsl){r.next=7;break}localStorage.setItem("token",e.datagram.access_token),t.$cookie.set("token",e.datagram.access_token),t.checkTrustedLevel_=e.datagram,t.handle_authorize(),r.next=15;break;case 7:if("Y"!==e.datagram.sfsl){r.next=15;break}return localStorage.setItem("token",e.datagram.access_token),t.$cookie.set("token",e.datagram.access_token),a={uid:e.datagram.uid,fid:e.datagram.fid,reg_number:e.datagram.reg_number},r.next=13,Object(M["c"])(a);case 13:return r.next=15,t.new_push_login();case 15:case"end":return r.stop()}}),r)})))()},new_push_login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(F["a"])(1);case 6:Object(T["v"])({client_id:e.clientId,redirect_uri:e.redirectURI,uuid:e.uuid}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1e3!==r.code){t.next=15;break}return t.next=3,Object(y["a"])(r.datagram.access_token);case 3:if(a=t.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){t.next=12;break}return e.$parent.handle_jump_before(r,o),t.abrupt("return");case 12:return e.$refs.fillformDialog.fillForm=i,e.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t)})))()}},watch:{time:{handler:function(e){e<0&&(this.buttonName="重新发送",this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0}},beforeDestroy:function(){clearInterval(this.interval),this.interval=null}},ue=le,de=(r("c8ce"),Object($["a"])(ue,se,ce,!1,null,"41d3c1f7",null)),me=de.exports,fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{staticStyle:{"padding-top":"10px"}},[r("el-col",[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{prop:"user_id"}},[r("div",{staticStyle:{"text-align":"center"}},[r("el-select",{staticClass:"taxOfficer",staticStyle:{width:"418px",margin:"0 auto"},attrs:{filterable:"",placeholder:"请选择办税（费）人员"},on:{change:e.handle_change},model:{value:e.form.user_id,callback:function(t){e.$set(e.form,"user_id",t)},expression:"form.user_id"}},e._l(e.taxPlays,(function(t){return r("el-option",{key:t.user_id,attrs:{label:t.full_name+" "+(t.mobile||t.id_card)+" "+e.getSelectRelatedType(t.relatedType),value:t.user_id}})})),1)],1)]),2==e.scanList?r("div",[r("div",{staticClass:"QR_"},[r("div",{staticClass:"justifyCenter",staticStyle:{width:"13.1875rem",height:"12.75rem"}},[r("div",{staticStyle:{position:"absolute"},attrs:{id:"qrcodeDiv"}}),!0===e.expired?r("div",{staticClass:"cover",on:{click:e.refreshCode}},[r("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"1.875rem","line-height":"1.4375rem"}}),e._v("刷新")])]):e._e()])]),r("div",{staticStyle:{"text-align":"center","align-items":"center","margin-top":"0.9375rem"}},[r("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),e._v(" 我已阅读并同意 "),r("span",{staticStyle:{color:"#4285F4",cursor:"pointer"},on:{click:e.handle_show_agreement}},[e._v("《人脸识别服务协议》")])],1),r("div",{staticClass:"_tips"},[r("el-button",{staticStyle:{width:"100%",margin:"0.625rem 0"},attrs:{type:"primary",disabled:!e.checked},on:{click:function(t){return e.CheckState(e.qrCode_id)}}},[e._v("验证完成")]),r("p",[e._v("温馨提示:")]),r("p",[e._v("1.请使用微信扫描此二维码进行实名验证")]),r("p",[e._v("2.暂不支持外籍人士、港澳台同胞线上实名验证")])],1)]):e._e(),1==e.scanList?r("div",[r("p",{staticClass:"QR_1_text"},[e._v("请使用"+e._s(e.areaName)+"税务APP扫码进行人脸验证")]),r("div",{staticClass:"QR_"},[r("certificateqrCode",{ref:"qrCode",attrs:{newEtaxFlag:e.newEtaxFlag,uuid:e.uuid,user_id:e.form.user_id,taxPlays_item:e.taxPlays_item},on:{handle_jump:e.handle_jump}})],1)]):e._e(),3==e.scanList?r("div",[r("p",{staticClass:"QR_1_text"},[e._v("请使用个人所得税APP扫码进行人脸验证")]),r("div",{staticClass:"QR_"},[r("certificateqrCodeIts",{ref:"qrCodeIts",attrs:{newEtaxFlag:e.newEtaxFlag,outTime:e.outTime,uuid:e.uuid,user_id:e.form.user_id,taxPlays_item:e.taxPlays_item},on:{handle_jump:e.handle_jump}})],1)]):e._e()],1)],1),r("el-dialog",{attrs:{title:e.dialogTitle,"append-to-body":"",visible:e.dialogAgreement,"close-on-click-modal":!1,width:"776px"},on:{"update:visible":function(t){e.dialogAgreement=t}}},[r("div",{domProps:{innerHTML:e._s(e.serviceText)}}),r("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement=!1}}},[e._v("确 定")])],1)]),r("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),r("RiskQrCode",{ref:"riskQrcode",on:{riskOver:e.riskOver}})],1)},ge=[],pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"justifyCenter"},[e.codeShow?a("img",{staticClass:"centerLogo",attrs:{src:r("7e9b")}}):e._e(),a("div",{attrs:{id:"qrcodeDivEC"}}),!0===e.expired?a("div",{staticClass:"cover",on:{click:e.refreshCode}},[a("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e(),a("RiskQrCode",{ref:"riskQrcode",on:{riskOver:e.riskOver}})],1)},he=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])}],ve={name:"qrCode",components:{RiskQrCode:N["a"]},props:{uuid:String,user_id:String,taxPlays_item:Object,newEtaxFlag:String},data:function(){return{exit_variable:!0,expired:!1,qrcode:"",qrCode_id:"",codeShow:!1,timeout:null,interval:null,client_id:Object(g["b"])(),redirect_uri:Object(g["j"])()}},created:function(){this.init()},methods:{createQRcode:function(){var e=this;this.expired=!1,Object(T["g"])({uuid:this.uuid,user_id:this.user_id}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(e.qrcode),e.CheckState(e.qrCode_id),e.setQRCodeTimeout()})).catch((function(t){window.clearTimeout(e.timeout),e.expired=!0}))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),e.expired=!0}),6e5)},showQRCode:function(e){var t=document.getElementById("qrcodeDivEC");t.innerHTML="";var r=new QRCode(t,{text:e,width:211,height:204});r._el.title="",this.codeShow=!0},checkRisk:function(e,t,r){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={uid:r,idCardType:"",idCard:"",scene:"04",fid:t,enterpriseName:"",relatedType:a.taxPlays_item.relatedType},n={},e.prev=2,e.next=5,Object(B["n"])(i);case 5:if(n=e.sent,1e3!==n.code||!n.datagram.businessMessage){e.next=9;break}return a.$confirm(n.datagram.businessMessage,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1");case 8:case"end":return e.stop()}}),e)})))).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["a"])(1);case 2:case"end":return e.stop()}}),e)})))),e.abrupt("return",!0);case 9:if(1e3!==n.code||"100"==n.datagram.controlMeasures){e.next=19;break}return a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1"),e.abrupt("return",!0);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e["catch"](2),e.next=25,Object(F["a"])(1);case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,null,[[2,21]])})))()},riskOver:function(e,t){this.noRiskNext(t)},noRiskNext:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={uid:t.nextRes.datagram.uid,fid:t.nextRes.datagram.fid,reg_number:t.nextRes.datagram.reg_number,relatedType:t.taxPlays_item.relatedType},e&&(a.qrCode_id=e),r.next=4,Object(B["c"])(a);case 4:return r.next=6,localStorage.removeItem("token");case 6:return r.next=8,t.$cookie.remove("token");case 8:return r.next=10,Object(F["a"])(1);case 10:return r.next=12,Object(T["z"])(t.nextObj);case 12:return i=r.sent,r.next=15,t.$emit("handle_jump",i);case 15:case"end":return r.stop()}}),r)})))()},tempRelatedType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t,a.loginLoading=!1,i={uuid:a.uuid,user_id:a.user_id,qrcode_id:t.qrCode_id,client_id:a.client_id,redirect_uri:a.redirect_uri},Object(T["A"])(i).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===n.code&&n.datagram?2==n.datagram.qrcode_status?(localStorage.setItem("token",n.datagram.access_token),t.$cookie.set("token",n.datagram.access_token),t.$confirm("是否确认成为该企业的"+e.relatedTypeName+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return window.clearTimeout(a.qrInterval),window.clearTimeout(a.qrTimeout),t.nextRes=n,t.nextObj=i,r.next=6,t.checkRisk(e.relatedTypeName,n.datagram.fid,n.datagram.uid);case 6:if(o=r.sent,!o){r.next=9;break}return r.abrupt("return");case 9:t.noRiskNext();case 10:case"end":return r.stop()}}),r)})))).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.loginLoading=!1;case 1:case"end":return e.stop()}}),e)}))))):1==n.datagram.qrcode_status?(window.clearTimeout(a.qrInterval),a.CheckState(t.qrCode_id)):3==n.datagram.qrcode_status&&(window.clearTimeout(a.qrInterval),window.clearTimeout(a.qrTimeout),a.expired=!0):(window.clearTimeout(a.qrInterval),window.clearTimeout(a.qrTimeout),a.expired=!0,n.msg&&a.$message({customClass:"el-icon-warning-color",message:n.msg,type:"warning"}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.loginLoading=!1;case 1:case"end":return e.stop()}}),e)}))));case 4:case"end":return r.stop()}}),r)})))()},init:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(E["h"])({}).then((function(t){e.relationTypes=t.datagram})).catch((function(){}));case 2:case"end":return t.stop()}}),t)})))()},showRelatedTypeName:function(e){for(var t=0;t<this.relationTypes.length;t++)if(this.relationTypes[t].relationTypeCode===e)return this.relationTypes[t].relationTypeName},new_push_login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(F["a"])(1);case 6:Object(T["v"])({client_id:e.clientId,redirect_uri:e.redirectURI,uuid:e.uuid}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:1e3===r.code&&e.$emit("handle_jump",r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t)})))()},NEWtempRelatedType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return localStorage.setItem("token",e.datagram.access_token),t.$cookie.set("token",e.datagram.access_token),a={uid:e.datagram.uid,fid:e.datagram.fid,reg_number:e.datagram.reg_number},r.next=5,Object(M["c"])(a);case 5:return r.next=7,t.new_push_login();case 7:case"end":return r.stop()}}),r)})))()},CheckState:function(e){var t=this,r=this;r.expired||(r.interval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i={uuid:r.uuid,user_id:r.user_id,qrcode_id:e,client_id:r.client_id,redirect_uri:r.redirect_uri,newEtaxFlag:t.newEtaxFlag},"00"==t.taxPlays_item.qrzt){a.next=6;break}return a.next=4,t.tempRelatedType({relatedType:t.taxPlays_item.relatedType,relatedTypeName:t.showRelatedTypeName(t.taxPlays_item.relatedType)});case 4:a.next=7;break;case 6:Object(T["z"])(i).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(i){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1e3!==i.code||!i.datagram){a.next=15;break}if(2!=i.datagram.qrcode_status){a.next=12;break}if(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),"1"!=t.newEtaxFlag||i.datagram.access_token){a.next=9;break}return n=[],i.datagram.relationPoList.forEach((function(e){"00"!=e.qrzt&&n.push(t.showRelatedTypeName(e.zrrlx))})),t.$confirm("是否确认成为该企业的"+n.join("/")+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.uuid=i.datagram.uuid,t.NEWtempRelatedType(i);case 2:case"end":return e.stop()}}),e)})))),a.abrupt("return",!1);case 9:r.$emit("handle_jump",i),a.next=13;break;case 12:1==i.datagram.qrcode_status?r.exit_variable&&r.CheckState(e):3==i.datagram.qrcode_status&&(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0);case 13:a.next=19;break;case 15:window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,i.msg&&r.$message({customClass:"el-icon-warning-color",message:i.msg,type:"warning"});case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(r.interval),r.CheckState(e)):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0)}));case 7:case"end":return a.stop()}}),a)}))),4e3))},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.createQRcode()},clearTimers:function(){clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},beforeDestroy:function(){this.exit_variable=!1,clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},be=ve,we=(r("b622f"),Object($["a"])(be,pe,he,!1,null,"5ffaafb0",null)),_e=we.exports,ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"justifyCenter"},[r("img",{attrs:{id:"qrcodeDivEC"}}),!0===e.expired?r("div",{staticClass:"cover",on:{click:e.refreshCode}},[r("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e(),r("RiskQrCode",{ref:"riskQrcode",on:{riskOver:e.riskOver}})],1)},xe=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])}],Ce={name:"qrCode",components:{RiskQrCode:N["a"]},props:{uuid:String,user_id:String,taxPlays_item:Object,outTime:Boolean,newEtaxFlag:String},data:function(){return{exit_variable:!0,expired:!1,qrcode:"",qrCode_id:"",codeShow:!1,timeout:null,interval:null,client_id:Object(g["b"])(),redirect_uri:Object(g["j"])()}},created:function(){this.init()},methods:{createQRcode:function(){var e=this;this.expired=!1,Object(T["e"])({uuid:this.uuid,user_id:this.user_id}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(e.qrcode),e.CheckState(e.qrCode_id),e.setQRCodeTimeout(),e.outTime&&(window.clearTimeout(e.timeout),e.expired=!0)})).catch((function(t){window.clearTimeout(e.timeout),e.expired=!0}))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),e.expired=!0}),6e5)},showQRCode:function(e){var t=document.getElementById("qrcodeDivEC");t.src="data:image/jpg;base64,"+e,this.codeShow=!0},checkRisk:function(e,t,r){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={uid:r,idCardType:"",idCard:"",scene:"04",fid:t,enterpriseName:"",relatedType:a.taxPlays_item.relatedType},n={},e.prev=2,e.next=5,Object(B["n"])(i);case 5:if(n=e.sent,1e3!==n.code||!n.datagram.businessMessage){e.next=9;break}return a.$confirm(n.datagram.businessMessage,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1");case 8:case"end":return e.stop()}}),e)})))).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["a"])(1);case 2:case"end":return e.stop()}}),e)})))),e.abrupt("return",!0);case 9:if(1e3!==n.code||"100"==n.datagram.controlMeasures){e.next=19;break}return a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1"),e.abrupt("return",!0);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e["catch"](2),e.next=25,Object(F["a"])(1);case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,null,[[2,21]])})))()},riskOver:function(e,t){this.noRiskNext(t)},noRiskNext:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={uid:t.nextRes.datagram.uid,fid:t.nextRes.datagram.fid,reg_number:t.nextRes.datagram.reg_number,relatedType:t.taxPlays_item.relatedType},e&&(a.qrCode_id=e),r.next=4,Object(B["c"])(a);case 4:return r.next=6,localStorage.removeItem("token");case 6:return r.next=8,t.$cookie.remove("token");case 8:return r.next=10,Object(F["a"])(1);case 10:return r.next=12,Object(T["o"])(t.nextObj);case 12:return i=r.sent,r.next=15,t.$emit("handle_jump",i);case 15:case"end":return r.stop()}}),r)})))()},tempRelatedType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t,a.loginLoading=!1,i={uuid:a.uuid,user_id:a.user_id,qrcode_id:t.qrCode_id,client_id:a.client_id,redirect_uri:a.redirect_uri},Object(T["p"])(i).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===n.code&&n.datagram?2==n.datagram.qrcode_status?(localStorage.setItem("token",n.datagram.access_token),t.$cookie.set("token",n.datagram.access_token),t.$confirm("是否确认成为该企业的"+e.relatedTypeName+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return window.clearTimeout(a.qrInterval),window.clearTimeout(a.qrTimeout),t.nextRes=n,t.nextObj=i,r.next=6,t.checkRisk(e.relatedTypeName,n.datagram.fid,n.datagram.uid);case 6:if(o=r.sent,!o){r.next=9;break}return r.abrupt("return");case 9:t.noRiskNext();case 10:case"end":return r.stop()}}),r)})))).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.loginLoading=!1;case 1:case"end":return e.stop()}}),e)}))))):1==n.datagram.qrcode_status?(window.clearTimeout(a.qrInterval),a.CheckState(t.qrCode_id)):3==n.datagram.qrcode_status&&(window.clearTimeout(a.qrInterval),window.clearTimeout(a.qrTimeout),a.expired=!0):(window.clearTimeout(a.qrInterval),window.clearTimeout(a.qrTimeout),a.expired=!0,n.msg&&a.$message({customClass:"el-icon-warning-color",message:n.msg,type:"warning"}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.loginLoading=!1;case 1:case"end":return e.stop()}}),e)}))));case 4:case"end":return r.stop()}}),r)})))()},init:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(E["h"])({}).then((function(t){e.relationTypes=t.datagram})).catch((function(){}));case 2:case"end":return t.stop()}}),t)})))()},showRelatedTypeName:function(e){for(var t=0;t<this.relationTypes.length;t++)if(this.relationTypes[t].relationTypeCode===e)return this.relationTypes[t].relationTypeName},new_push_login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(F["a"])(1);case 6:Object(T["v"])({client_id:e.clientId,redirect_uri:e.redirectURI,uuid:e.uuid}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:1e3===r.code&&e.$emit("handle_jump",r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t)})))()},NEWtempRelatedType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return localStorage.setItem("token",e.datagram.access_token),t.$cookie.set("token",e.datagram.access_token),a={uid:e.datagram.uid,fid:e.datagram.fid,reg_number:e.datagram.reg_number},r.next=5,Object(M["c"])(a);case 5:return r.next=7,t.new_push_login();case 7:case"end":return r.stop()}}),r)})))()},CheckState:function(e){var t=this,r=this;r.expired||(r.interval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i={uuid:r.uuid,user_id:r.user_id,qrcode_id:e,client_id:r.client_id,redirect_uri:r.redirect_uri,newEtaxFlag:t.newEtaxFlag},"00"==t.taxPlays_item.qrzt){a.next=6;break}return a.next=4,t.tempRelatedType({relatedType:t.taxPlays_item.relatedType,relatedTypeName:t.showRelatedTypeName(t.taxPlays_item.relatedType)});case 4:a.next=7;break;case 6:Object(T["o"])(i).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(i){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1e3!==i.code||!i.datagram){a.next=15;break}if(2!=i.datagram.qrcode_status){a.next=12;break}if(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),"1"!=t.newEtaxFlag||i.datagram.access_token){a.next=9;break}return n=[],i.datagram.relationPoList.forEach((function(e){"00"!=e.qrzt&&n.push(t.showRelatedTypeName(e.zrrlx))})),t.$confirm("是否确认成为该企业的"+n.join("/")+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.uuid=i.datagram.uuid,t.NEWtempRelatedType(i);case 2:case"end":return e.stop()}}),e)})))),a.abrupt("return",!1);case 9:r.$emit("handle_jump",i),a.next=13;break;case 12:1==i.datagram.qrcode_status?r.exit_variable&&r.CheckState(e):3==i.datagram.qrcode_status&&(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0);case 13:a.next=19;break;case 15:window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,i.msg&&r.$message({customClass:"el-icon-warning-color",message:i.msg,type:"warning"});case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(r.interval),r.CheckState(e)):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0)}));case 7:case"end":return a.stop()}}),a)}))),4e3))},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.createQRcode()},clearTimers:function(){clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},beforeDestroy:function(){this.exit_variable=!1,clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},Te=Ce,ke=(r("e4cc"),Object($["a"])(Te,ye,xe,!1,null,"7b820e91",null)),Se=ke.exports,Re={name:"isActiveScan",components:{certificateqrCode:_e,certificateqrCodeIts:Se,fillForm:Q["default"],RiskQrCode:N["a"]},props:["taxPlays","uuid","scanList","newEtaxFlag"],data:function(){return{outTime:!1,relatedType:"",showRelatedType:[],relationTypes:[],checkTrustedLevel_:null,areaPrefix:"",areaInfoData:[],taxPlays_item:null,form:{user_id:""},rules:{user_id:[{required:!0,message:"请先选择办税（费）人员",trigger:["blur","change"]}]},qrcode:"",areaName:"",checked:!0,qrCode_id:"",expired:!0,dialogTitle:"",serviceText:"",qrTimeout:null,qrInterval:null,dialogAgreement:!1,clientId:Object(g["b"])(),redirectURI:Object(g["j"])()}},methods:{closeFillForm:function(){location.reload()},getSelectRelatedType:function(e){return"01"===e?"法人代表人":"02"===e?"财务负责人":"03"===e?"办税员":"05"===e?"管理员":"06"===e?"出口退税人员":"07"===e?"领票员":"08"===e?"社保联系人":"09"===e?"开票员":"99"===e?"其他人员":""},handle_change:function(e){this.taxPlays_item=this.taxPlays.find((function(t){return t.user_id==e})),this.taxPlays_item.mobile?"0"===this.taxPlays_item.bz&&(this.bz=!0):this.$message({duration:5e3,message:"您的手机号为空，请您登录系统后，在账户中心的手机号码修改菜单中添加默认手机号。",type:"warning"}),this.handle_QR_change(this.scanList)},handle_QR_change:function(e){var t=this;this.form.user_id&&(1==e?(clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.qrTimeout=null,this.qrInterval=null,this.$nextTick((function(){t.$refs.qrCode.createQRcode()}))):3==e?(clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.qrTimeout=null,this.qrInterval=null,this.$nextTick((function(){t.$refs.qrCodeIts.createQRcode()})),this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].itsScan&&Object(z["a"])()?(this.outTime=!0,this.$message.error("个人所得税APP扫脸服务时间为5:00-23:00")):this.outTime=!1):this.createQRcode())},refreshCode:function(){window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.expired=!1,this.createQRcode()},handle_show_agreement:function(){this.serviceText?this.dialogAgreement=!0:this.$message({customClass:"el-icon-warning-color",message:"暂无协议内容",type:"warning"})},createQRcode:function(){var e=this;this.expired=!1,Object(T["f"])({uuid:this.uuid,user_id:this.form.user_id}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.setQRCodeTimeout()})).catch((function(t){window.clearTimeout(e.qrTimeout),e.expired=!0}))},showQRCode:function(e){var t=document.getElementById("qrcodeDiv");t.innerHTML="";var r=new QRCode(t,{text:e,width:211,height:204});r._el.title=""},CheckState:function(e){var t=this,r=this;this.form.user_id?r.expired?this.$message({customClass:"el-icon-warning-color",message:"二维码已失效",type:"warning"}):r.qrInterval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i={uuid:r.uuid,qrcode_id:e,client_id:r.clientId,user_id:r.form.user_id,redirect_uri:r.redirectURI,newEtaxFlag:t.newEtaxFlag},"00"==t.taxPlays_item.qrzt||"1"==t.newEtaxFlag){a.next=6;break}return a.next=4,t.tempRelatedType({relatedType:t.taxPlays_item.relatedType,relatedTypeName:t.showRelatedTypeName(t.taxPlays_item.relatedType)});case 4:a.next=7;break;case 6:Object(T["t"])(i).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(i){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1e3!==i.code||!i.datagram){a.next=15;break}if(2!=i.datagram.qrcode_status){a.next=12;break}if(window.clearTimeout(r.qrInterval),window.clearTimeout(r.qrTimeout),"1"!=t.newEtaxFlag||i.datagram.access_token){a.next=9;break}return n=[],i.datagram.relationPoList.forEach((function(e){"00"!=e.qrzt&&n.push(t.showRelatedTypeName(e.zrrlx))})),t.$confirm("是否确认成为该企业的"+n.join("/")+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.uuid=i.datagram.uuid,t.NEWtempRelatedType(i);case 2:case"end":return e.stop()}}),e)})))),a.abrupt("return",!1);case 9:r.handle_jump(i),a.next=13;break;case 12:1==i.datagram.qrcode_status?(window.clearTimeout(r.qrInterval),r.CheckState(e)):3==i.datagram.qrcode_status&&(window.clearTimeout(r.qrInterval),window.clearTimeout(r.qrTimeout),r.expired=!0);case 13:a.next=19;break;case 15:window.clearTimeout(r.qrInterval),window.clearTimeout(r.qrTimeout),r.expired=!0,i.msg&&r.$message({customClass:"el-icon-warning-color",message:i.msg,type:"warning"});case 19:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(r.qrInterval),r.CheckState(e)):(window.clearTimeout(r.qrInterval),window.clearTimeout(r.qrTimeout),r.expired=!0)}));case 7:case"end":return a.stop()}}),a)}))),4e3):this.$message({customClass:"el-icon-warning-color",message:"请选择办税（费）人员",type:"warning"})},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.qrTimeout),e.qrTimeout=window.setTimeout((function(){window.clearTimeout(e.qrTimeout),e.expired=!0}),6e5)},getNewestAgreement:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(_["d"])({}).then((function(t){if(t&&t.datagram.length>0){var r,a=Object(b["a"])(t.datagram);try{var i=function(){var t=r.value;"03"===t.agreementCode&&Object(_["a"])({agreementCode:t.agreementCode,agreementVersion:t.agreementVersion}).then((function(r){e.dialogTitle=t.agreementName,e.serviceText=r.datagram.agreementText}))};for(a.s();!(r=a.n()).done;)i()}catch(n){a.e(n)}finally{a.f()}}}));case 1:case"end":return t.stop()}}),t)})))()},checkRisk:function(e,t,r){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={uid:r,idCardType:"",idCard:"",scene:"04",fid:t,enterpriseName:"",relatedType:a.taxPlays_item.relatedType},n={},e.prev=2,e.next=5,Object(B["n"])(i);case 5:if(n=e.sent,1e3!==n.code||!n.datagram.businessMessage){e.next=9;break}return a.$confirm(n.datagram.businessMessage,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1");case 8:case"end":return e.stop()}}),e)})))).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["a"])(1);case 2:case"end":return e.stop()}}),e)})))),e.abrupt("return",!0);case 9:if(1e3!==n.code||"100"==n.datagram.controlMeasures){e.next=19;break}return a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1"),e.abrupt("return",!0);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e["catch"](2),e.next=25,Object(F["a"])(1);case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,null,[[2,21]])})))()},riskOver:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.noRiskNext(t);case 1:case"end":return e.stop()}}),e)})))()},noRiskNext:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),a={uid:t.nextRes.datagram.uid,fid:t.nextRes.datagram.fid,reg_number:t.nextRes.datagram.reg_number,relatedType:t.taxPlays_item.relatedType},e&&(a.qrCode_id=e),r.next=6,Object(B["c"])(a);case 6:return r.next=8,localStorage.removeItem("token");case 8:return r.next=10,t.$cookie.remove("token");case 10:return r.next=12,Object(F["a"])(1);case 12:return r.next=14,Object(T["t"])(t.nextObj);case 14:return i=r.sent,r.next=17,t.handle_jump(i);case 17:case"end":return r.stop()}}),r)})))()},tempRelatedType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t,a.loginLoading=!1,i={uuid:a.uuid,qrcode_id:t.qrcode_id,client_id:a.clientId,user_id:a.form.user_id,redirect_uri:a.redirectURI},Object(T["u"])(i).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(n){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===n.code&&n.datagram?2==n.datagram.qrcode_status?(localStorage.setItem("token",n.datagram.access_token),t.$cookie.set("token",n.datagram.access_token),t.$confirm("是否确认成为该企业的"+e.relatedTypeName+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var o,s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return window.clearTimeout(a.qrInterval),window.clearTimeout(a.qrTimeout),t.nextRes=n,t.nextObj=i,r.next=6,t.checkRisk(e.relatedTypeName,n.datagram.fid,n.datagram.uid);case 6:if(o=r.sent,!o){r.next=9;break}return r.abrupt("return");case 9:return s={uid:n.datagram.uid,fid:n.datagram.fid,reg_number:n.datagram.reg_number,relatedType:t.taxPlays_item.relatedType},r.next=12,Object(B["c"])(s);case 12:return r.next=14,localStorage.removeItem("token");case 14:return r.next=16,t.$cookie.remove("token");case 16:return r.next=18,Object(F["a"])(1);case 18:return r.next=20,Object(T["t"])(i);case 20:return c=r.sent,r.next=23,a.handle_jump(c);case 23:case"end":return r.stop()}}),r)})))).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.loginLoading=!1;case 1:case"end":return e.stop()}}),e)}))))):1==n.datagram.qrcode_status?(window.clearTimeout(a.qrInterval),a.CheckState(t.qrcode_id)):3==n.datagram.qrcode_status&&(window.clearTimeout(a.qrInterval),window.clearTimeout(a.qrTimeout),a.expired=!0):(window.clearTimeout(a.qrInterval),window.clearTimeout(a.qrTimeout),a.expired=!0,n.msg&&a.$message({customClass:"el-icon-warning-color",message:n.msg,type:"warning"}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.loginLoading=!1;case 1:case"end":return e.stop()}}),e)}))));case 4:case"end":return r.stop()}}),r)})))()},init:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(E["h"])({}).then((function(t){e.relationTypes=t.datagram})).catch((function(){}));case 2:case"end":return t.stop()}}),t)})))()},showRelatedTypeName:function(e){for(var t=0;t<this.relationTypes.length;t++)if(this.relationTypes[t].relationTypeCode===e)return this.relationTypes[t].relationTypeName},handle_jump:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(y["a"])(e.datagram.access_token);case 2:a=r.sent,a.userformInfo,a.pass,i=a.userInfo,t.$parent.handle_jump_before(e,i);case 7:case"end":return r.stop()}}),r)})))()},NEWtempRelatedType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return localStorage.setItem("token",e.datagram.access_token),t.$cookie.set("token",e.datagram.access_token),a={uid:e.datagram.uid,fid:e.datagram.fid,reg_number:e.datagram.reg_number},r.next=5,Object(M["c"])(a);case 5:return r.next=7,t.new_push_login();case 7:case"end":return r.stop()}}),r)})))()},new_push_login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(F["a"])(1);case 6:Object(T["v"])({client_id:e.clientId,redirect_uri:e.redirectURI,uuid:e.uuid}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:1e3===r.code&&e.handle_jump(r);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t)})))()}},watch:{scanList:{handler:function(e){e&&this.handle_QR_change(e)},deep:!0,immediate:!0}},created:function(){this.init();var e=this.$store.state.settings.logConfig;if(e){var t,r=null===(t=this.$store.state.settings.logConfig)||void 0===t?void 0:t.areaInfoData,a=r[0].areaPrefix;this.areaName=r[0].areaName,"3100"===a&&this.getNewestAgreement()}},beforeDestroy:function(){clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.qrTimeout=null,this.qrInterval=null}},$e=Re,Ie=(r("7553"),Object($["a"])($e,fe,ge,!1,null,"4d1f0928",null)),je=Ie.exports,Oe={components:{isActivePwd:oe,isActiveSms:me,isActiveScan:je,signedagreement:U["default"]},props:{oneValueToTwo:{type:Object,default:function(){return{}}},creditCodePwd:{type:String,default:""}},data:function(){return{bz:!1,list:[],asddd:function(){},dialogVisible:!1,checked:!0,taxPlays:this.oneValueToTwo.userList,clientId:Object(g["b"])(),redirectURI:Object(g["j"])(),cliState:Object(g["l"])(),interval:"",loginLoading:!1,secondStep:[],activeLoginType:"",activeLoginName:"",scanList:""}},watch:{oneValueToTwo:{handler:function(e){var t=this;e&&(e.secondStep.some((function(e){if("isActiveScan"==e.value)return t.scanList=e.scanList,!0})),this.secondStep=e.secondStep,this.activeLoginType=e.secondStep[0].value,this.activeLoginName=e.secondStep[0].name)},immediate:!0,deep:!0}},mounted:function(){},methods:{handle_return_:function(){this.$emit("handleEnterpriseCertificate")},tabChange:function(e){this.activeLoginType=e.value,this.activeLoginName=e.name,this.scanList=e.scanList?e.scanList:""},handle_jump_before:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$refs.signedagreement.handle_jump_before(e,t,"/userCenter/baseInfoEE");case 1:case"end":return a.stop()}}),a)})))()},forgetBtn:function(){var e=this,t=!1,r=window.location.href.split("?")[1];r&&r.split("&").forEach((function(r){if("client_type=client"===r){var a=e.$router.resolve({path:"/forget",query:{client_id:e.clientId?e.clientId:"",client_type:"client",identity:"person"}});t=!0,window.open(a.href,"_blank")}})),t||(this.clientId?this.$router.push({path:"/forget",query:{client_id:this.clientId,identity:"person"}}):this.$router.push({path:"/forget",query:{identity:"person"}}))}}},qe=Oe,Le=(r("f443"),Object($["a"])(qe,J,K,!1,null,"1f8cd502",null)),Ae=Le.exports,De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"100%"}},[e.secondStep.scanList.length>1?r("div",{staticClass:"tabsCls"},[r("div",{staticClass:"justifyCenterEnd",staticStyle:{height:"100%","padding-bottom":"0.75rem"}},e._l(e.secondStep.scanList,(function(t){return r("div",{key:t.value,staticStyle:{position:"relative",padding:"0 23px"}},[r("span",{class:e.QR_tab==t.value?"activeCls":"normalCls",on:{click:function(r){return e.handle_QR_change(t.value)}}},[e._v(e._s(t.name))]),r("div",{class:e.QR_tab==t.value?"tabSelect":"tabUnSelect"})])})),0)]):e._e(),"0"==e.QR_tab?r("div",{staticStyle:{margin:"70px 105px 0 105px"}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("div",{staticClass:"sms"},[r("el-form-item",[r("el-row",[r("el-input",{staticClass:"mobileInp",staticStyle:{width:"100%"},attrs:{readonly:"",placeholder:"请输入手机号码"},model:{value:e.oneValueToTwo.mobile,callback:function(t){e.$set(e.oneValueToTwo,"mobile","string"===typeof t?t.trim():t)},expression:"oneValueToTwo.mobile"}})],1)],1),r("el-form-item",{attrs:{prop:"smsCode"}},[r("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[r("el-input",{staticClass:"smsInp",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},model:{value:e.form.smsCode,callback:function(t){e.$set(e.form,"smsCode","string"===typeof t?t.trim():t)},expression:"form.smsCode"}}),r("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1)],1),r("el-row",[r("el-col",[r("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1):e._e(),"2"==e.QR_tab?r("div",[r("div",{staticClass:"QR_"},[r("div",{staticClass:"justifyCenter",staticStyle:{width:"13.1875rem",height:"12.75rem"}},[r("div",{staticStyle:{position:"absolute"},attrs:{id:"qrcodeDiv"}}),!0===e.expired?r("div",{staticClass:"cover",on:{click:e.refreshCode}},[r("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e()])]),r("div",{staticStyle:{"text-align":"center","align-items":"center","margin-top":"0.9375rem"}},[r("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),e._v(" 我已阅读并同意 "),r("span",{staticStyle:{color:"#4285F4",cursor:"pointer"},on:{click:e.handle_show_agreement}},[e._v("《人脸识别服务协议》")])],1),r("div",{staticClass:"_tips"},[r("el-button",{staticStyle:{width:"100%",margin:"0.625rem 0"},attrs:{type:"primary",disabled:!e.checked},on:{click:function(t){return e.CheckState(e.qrCode_id)}}},[e._v("验证完成")]),r("p",[e._v("温馨提示:")]),r("p",[e._v("1.请使用微信扫描此二维码进行实名验证")]),r("p",[e._v("2.暂不支持外籍人士、港澳台同胞线上实名验证")])],1)]):e._e(),"1"==e.QR_tab?r("div",[r("p",{staticClass:"QR_1_text"},[e._v("请使用"+e._s(e.areaName)+"税务APP扫码进行人脸验证")]),r("div",{staticClass:"QR_"},[r("qrCode",{ref:"qrCode",attrs:{uuid:e.oneValueToTwo.uuid}})],1)]):e._e(),"3"==e.QR_tab?r("div",[r("p",{staticClass:"QR_1_text"},[e._v("请使用个人所得税APP扫码进行人脸验证")]),r("div",{staticClass:"QR_"},[r("qrCodeIts",{ref:"qrCodeIts",attrs:{uuid:e.oneValueToTwo.uuid,outTime:e.outTime}})],1)]):e._e(),r("el-dialog",{attrs:{title:"协议签订",visible:e.dialogVisible,"show-close":!1,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{height:"9.375rem","overflow-y":"auto","margin-bottom":"0.625rem"},domProps:{innerHTML:e._s(t.agreementText)}})})),0):e._e(),e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{display:"inline-block","margin-right":"2.5rem"}},[r("el-checkbox",{model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}}),e._v(" 我已同意并阅读 "),r("span",{staticStyle:{color:"#4285F4"}},[e._v("《"+e._s(t.agreementName)+"》")])],1)})),0):e._e(),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.asddd}},[e._v("同 意")])],1)]),r("el-dialog",{attrs:{title:e.dialogTitle,"append-to-body":"",visible:e.dialogAgreement,"close-on-click-modal":!1,width:"776px"},on:{"update:visible":function(t){e.dialogAgreement=t}}},[r("div",{domProps:{innerHTML:e._s(e.serviceText)}}),r("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement=!1}}},[e._v("确 定")])],1)]),r("el-dialog",{attrs:{title:e.agreementName,visible:e.dialogAgreement1,"append-to-body":"","close-on-click-modal":!1,width:"813px"},on:{"update:visible":function(t){e.dialogAgreement1=t}}},[r("div",{domProps:{innerHTML:e._s(e.agreementText)}}),r("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement1=!1}}},[e._v("确 定")])],1)]),r("IDTypeShoose",{ref:"IDTypeShoose",on:{tempRelatedType:e.tempRelatedType}}),r("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),r("signedagreement",{ref:"signedagreement",on:{handleReturn:e.handle_return_,handleChangeFlag:e.handleChangeFlag}}),r("authorize-qr-code",{ref:"authorizeQrCode",on:{handleServiceAgreement:e.handleServiceAgreement,submitA:e.submitA,handleClose:e.handleClose}}),e.visibleApply?r("apply-for-inspection-login",{ref:"applyForInspectionLogin",attrs:{visibleApply:e.visibleApply,initData:e.initData},on:{"update:visibleApply":function(t){e.visibleApply=t},"update:visible-apply":function(t){e.visibleApply=t},getLoginNext:e.getLoginNext}}):e._e(),e.visibleRegister?r("tax-fund-register",{ref:"taxFundRegister",attrs:{visibleRegister:e.visibleRegister,initData:e.initData},on:{"update:visibleRegister":function(t){e.visibleRegister=t},"update:visible-register":function(t){e.visibleRegister=t},getLoginNext:e.getLoginNext}}):e._e()],1)},Pe=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"1.875rem","line-height":"1.4375rem"}}),e._v("刷新")])}],Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"justifyCenter"},[e.codeShow?a("img",{staticClass:"centerLogo",attrs:{src:r("7e9b")}}):e._e(),a("div",{attrs:{id:"qrcodeDivE"}}),!0===e.expired?a("div",{staticClass:"cover",on:{click:e.refreshCode}},[a("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e()])},Fe=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])}],Ve=r("bfa8"),Qe={name:"qrCode",props:{uuid:String},data:function(){return{exit_variable:!0,expired:!1,qrcode:"",qrCode_id:"",codeShow:!1,timeout:null,interval:null,client_id:Object(g["b"])(),redirect_uri:Object(g["j"])()}},methods:{createQRcode:function(){var e=this;this.expired=!1,Object(Ve["g"])({uuid:this.uuid}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.CheckState(t.datagram.qrcode_id),e.setQRCodeTimeout()})).catch((function(t){window.clearTimeout(e.timeout),e.expired=!0}))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),e.expired=!0}),6e5)},showQRCode:function(e){var t=document.getElementById("qrcodeDivE");t.innerHTML="";var r=new QRCode(t,{text:e,width:211,height:204});r._el.title="",this.codeShow=!0},CheckState:function(e){var t=this;t.expired||(t.interval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={uuid:t.uuid,qrcode_id:e,client_id:t.client_id,redirect_uri:t.redirect_uri},Object(Ve["m"])(a).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===a.code&&a.datagram?2==a.datagram.qrcode_status?(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.$parent.handle_jump(a)):1==a.datagram.qrcode_status?t.exit_variable&&t.CheckState(e):3==a.datagram.qrcode_status&&(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0):(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0,a.msg&&t.$message({customClass:"el-icon-warning-color",message:a.msg,type:"warning"}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(r){r&&r.stack&&r.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(t.interval),t.CheckState(e)):(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0)}));case 2:case"end":return r.stop()}}),r)}))),4e3))},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.createQRcode()},clearTimers:function(){clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},beforeDestroy:function(){this.exit_variable=!1,clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},Ue=Qe,Ee=(r("cdb8"),Object($["a"])(Ue,Ne,Fe,!1,null,"57bd0dfc",null)),Be=Ee.exports,ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"justifyCenter"},[r("img",{attrs:{id:"qrcodeDivE"}}),!0===e.expired?r("div",{staticClass:"cover",on:{click:e.refreshCode}},[r("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e()])},Me=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])}],He={name:"qrCode",props:{uuid:String,outTime:Boolean},data:function(){return{exit_variable:!0,expired:!1,qrcode:"",qrCode_id:"",codeShow:!1,timeout:null,interval:null,client_id:Object(g["b"])(),redirect_uri:Object(g["j"])()}},methods:{createQRcode:function(){var e=this;this.expired=!1,Object(Ve["e"])({uuid:this.uuid}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.CheckState(t.datagram.qrcode_id),e.setQRCodeTimeout(),e.outTime&&(window.clearTimeout(e.timeout),e.expired=!0)})).catch((function(t){window.clearTimeout(e.timeout),e.expired=!0}))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),e.expired=!0}),6e5)},showQRCode:function(e){var t=document.getElementById("qrcodeDivE");t.src="data:image/jpg;base64,"+e,this.codeShow=!0},CheckState:function(e){var t=this;t.expired||(t.interval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={uuid:t.uuid,qrcode_id:e,client_id:t.client_id,redirect_uri:t.redirect_uri},Object(Ve["k"])(a).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===a.code&&a.datagram?2==a.datagram.qrcode_status?(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.$parent.handle_jump(a)):1==a.datagram.qrcode_status?t.exit_variable&&t.CheckState(e):3==a.datagram.qrcode_status&&(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0):(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0,a.msg&&t.$message({customClass:"el-icon-warning-color",message:a.msg,type:"warning"}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(r){r&&r.stack&&r.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(t.interval),t.CheckState(e)):(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0)}));case 2:case"end":return r.stop()}}),r)}))),4e3))},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.createQRcode()},clearTimers:function(){clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},beforeDestroy:function(){this.exit_variable=!1,clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},We=He,Ze=(r("6afb"),Object($["a"])(We,ze,Me,!1,null,"086f5e9e",null)),Ye=Ze.exports,Je=r("eb3b"),Ke=r("8eaa"),Ge={name:"loginTwicSp",components:{authorizeQrCode:N["a"],qrCode:Be,qrCodeIts:Ye,IDTypeShoose:V["a"],fillForm:Q["default"],signedagreement:U["default"],ApplyForInspectionLogin:Je["a"],TaxFundRegister:Ke["a"]},props:{oneValueToTwo:{type:Object,default:function(){return{}}}},data:function(){var e;return e={outTime:!1,initData:{},visibleApply:!1,visibleRegister:!1,relatedType:"",showRelatedType:[],relationTypes:[],agreementText:"",agreementName:"",dialogAgreement1:!1,checkTrustedLevel_:null,areaPrefix:"",is_TAB:!1,areaInfoData:[],areaName:"",checked:!0,list:[],bz:!1,form:{smsCode:""},dialogVisible:!1,asddd:function(){},validate_status:!1,cliState:Object(g["l"])(),clientId:Object(g["b"])(),redirectURI:Object(g["j"])(),loginLoading:!1,rules:{smsCode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}]},buttonName:"获取验证码",getCodeDisabled:!1,time:119,interval:"",expired:!0,qrcode:"",qrCode_id:"",qrTimeout:null,qrInterval:null},Object(w["a"])(e,"agreementName",""),Object(w["a"])(e,"dialogAgreement",!1),Object(w["a"])(e,"agreementText",""),Object(w["a"])(e,"QR_tab",null),Object(w["a"])(e,"faceAgreement",{}),Object(w["a"])(e,"dialogTitle",""),Object(w["a"])(e,"serviceText",""),Object(w["a"])(e,"showChangeBtn",!1),Object(w["a"])(e,"areaName",""),Object(w["a"])(e,"secondStep",null),e},watch:{time:{handler:function(e){e<0&&(this.buttonName="重新发送",this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0},oneValueToTwo:{handler:function(e){var t=this;if(e){var r=e;r.scanList.length>0&&(this.showChangeBtn=!0),r.scanList.length>0&&(this.QR_tab=r.scanList[0].value,this.$nextTick((function(){t.handle_QR_change(t.QR_tab)}))),this.secondStep=r}},deep:!0,immediate:!0}},beforeDestroy:function(){clearInterval(this.interval),clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.interval=null,this.qrTimeout=null,this.qrInterval=null},created:function(){var e=this.$store.state.settings.logConfig;if(e){var t,r=null===(t=this.$store.state.settings.logConfig)||void 0===t?void 0:t.areaInfoData,a=r[0].areaPrefix;this.areaName=r[0].areaName,"3100"===a&&this.getNewestAgreement()}},methods:{handleClose:function(){localStorage.removeItem("token"),this.$cookie.remove("token"),location.reload()},handle_return_:function(){this.$emit("handleEnterpriseCertificate")},closeFillForm:function(){location.reload()},submitA:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={uid:e.checkTrustedLevel_.uid,fid:e.checkTrustedLevel_.fid,reg_number:e.checkTrustedLevel_.reg_number,relatedType:e.relatedType,qrCode_id:e.$refs.authorizeQrCode.qrCode_id},t.next=3,Object(B["e"])(r);case 3:return t.next=5,e.push_login();case 5:case"end":return t.stop()}}),t)})))()},handleServiceAgreement:function(){this.dialogAgreement1=!0},handle_authorize:function(){var e=this,t=this;if(!this.is_TAB)return t.$refs.authorizeQrCode.title="确认授权",t.$refs.authorizeQrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(this.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.authorizeQrCode.dialogVisible=!0,void t.$refs.authorizeQrCode.creatVerifyQRCode("1");Object(_["f"])({uid:this.checkTrustedLevel_.uid,agreementCode:"03"}).then((function(r){"1000"==r.code&&(Object(_["e"])({agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(t){"1000"==t.code&&(e.agreementText=t.datagram.agreementText,e.agreementName=t.datagram.agreementName)})),"0"==r.datagram[0].signingStatus?(e.$alert('<p>您尚未签订<span style="color:#4285F4;cursor:pointer;" id="service_agreement">《'.concat(r.datagram[0].agreementName,"》</span>，请先阅读协议并确认是否同意签订。如果您不同意，您可持有效身份证件前往线下办税服务场所办理业务。</p>"),"提示",{dangerouslyUseHTMLString:!0,showCancelButton:!0,showConfirmButton:!0,cancelButtonText:"不同意",confirmButtonText:"同意",cancelButtonClass:"my_cancelButtonClass",confirmButtonClass:"my_confirmButtonClass"}).then((function(){Object(_["k"])({uid:e.checkTrustedLevel_.uid,agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(r){"1000"==r.code&&(t.$refs.authorizeQrCode.title="确认授权",t.$refs.authorizeQrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(e.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.authorizeQrCode.dialogVisible=!0,t.$refs.authorizeQrCode.creatVerifyQRCode("1"))}))})).catch((function(){t.$refs.authorizeQrCode.dialogVisible=!1})),e.$nextTick((function(){var t=document.querySelector("#service_agreement");t.onclick=e.handleServiceAgreement}))):"1"==r.datagram[0].signingStatus&&(t.$refs.authorizeQrCode.title="确认授权",t.$refs.authorizeQrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(e.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.authorizeQrCode.dialogVisible=!0,t.$refs.authorizeQrCode.creatVerifyQRCode("1")))}))},tempRelatedType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.relatedType=e.relatedType,t,"00"!=e.qrzt?t.$confirm("是否确认成为该企业的"+e.relatedTypeName+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={relatedType:e.relatedType,client_id:t.clientId,redirect_uri:t.redirectURI,uuid:t.uuid},Object(Ve["t"])(a).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(setTimeout((function(){t.$store.dispatch("app/getIdentityLoad",!1)}),8e3),"N"!==r.datagram.sfsl){e.next=18;break}if("四级"==r.datagram.trusted_level||"五级"==r.datagram.trusted_level||"4"==r.datagram.trusted_level||"5"==r.datagram.trusted_level||"1"==r.datagram.overseas){e.next=9;break}localStorage.setItem("token",r.datagram.access_token),t.$cookie.set("token",r.datagram.access_token),t.checkTrustedLevel_=r.datagram,t.handle_authorize(),e.next=16;break;case 9:return localStorage.setItem("token",r.datagram.access_token),t.$cookie.set("token",r.datagram.access_token),a={uid:r.datagram.uid,fid:r.datagram.fid,reg_number:r.datagram.reg_number,relatedType:t.relatedType},e.next=14,Object(B["c"])(a);case 14:return e.next=16,t.push_login();case 16:e.next=29;break;case 18:if("Y"!==r.datagram.sfsl){e.next=28;break}return localStorage.setItem("token",r.datagram.access_token),t.$cookie.set("token",r.datagram.access_token),i={uid:r.datagram.uid,fid:r.datagram.fid,reg_number:r.datagram.reg_number,relatedType:t.relatedType},e.next=24,Object(B["c"])(i);case 24:return e.next=26,t.push_login();case 26:e.next=29;break;case 28:t.push_login();case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})))).catch(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:setTimeout((function(){t.$store.dispatch("app/getIdentityLoad",!1)}),8e3);case 1:case"end":return e.stop()}}),e)})))):t.push_login();case 3:case"end":return r.stop()}}),r)})))()},push_login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(F["a"])(1);case 6:r=e,Object(Ve["a"])({client_id:r.clientId,redirect_uri:r.redirectURI,relatedType:e.relatedType,uuid:e.uuid}).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,i,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1e3!==t.code){e.next=15;break}return e.next=3,Object(y["a"])(t.datagram.access_token);case 3:if(a=e.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){e.next=12;break}return r.handle_jump_before(t,o),e.abrupt("return");case 12:return r.$refs.fillformDialog.fillForm=i,r.$refs.fillformDialog.fillFormVisible=!0,e.abrupt("return");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t)})))()},getValidCode:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,!r.getCodeDisabled){t.next=4;break}return e.$message.warning("请勿重复发送验证码！"),t.abrupt("return");case 4:a={uuid:r.oneValueToTwo.uuid},r.getCodeDisabled=!0,r.time=119,r.buttonName="120s",r.interval=window.setInterval((function(){r.buttonName=r.time+"s",--r.time}),1e3),Object(Ve["s"])(a).then((function(t){if(1e3===t.code){var a=e;a.smscode_id=t.datagram.smscode_id,e.$message.success("短信验证码成功发送到"+t.datagram.mobile)}else clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"}));case 10:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(E["h"])({}).then((function(t){e.relationTypes=t.datagram})).catch((function(){}));case 2:case"end":return t.stop()}}),t)})))()},showRelatedTypeName:function(e){for(var t=0;t<this.relationTypes.length;t++)if(this.relationTypes[t].relationTypeCode===e)return this.relationTypes[t].relationTypeName},getLoginNext:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.bz="0"===e.datagram.bz,r.next=3,Object(y["a"])(e.datagram.access_token);case 3:if(a=r.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){r.next=12;break}return t.handle_jump_before(e,o),r.abrupt("return");case 12:return t.$refs.fillformDialog.fillForm=i,t.$refs.fillformDialog.fillFormVisible=!0,r.abrupt("return");case 15:case"end":return r.stop()}}),r)})))()},handle_jump:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i,n,o,s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.datagram.access_token){r.next=24;break}if(t.uuid=e.datagram.uuid,!(e.datagram.relationPoList&&e.datagram.relationPoList.length>0)){r.next=21;break}if(1!==e.datagram.relationPoList.length){r.next=10;break}return r.next=6,t.init();case 6:return r.next=8,t.tempRelatedType({qrzt:e.datagram.relationPoList[0].qrzt,relatedType:e.datagram.relationPoList[0].zrrlx,relatedTypeName:t.showRelatedTypeName(e.datagram.relationPoList[0].zrrlx)});case 8:r.next=19;break;case 10:for(a=[],i=0;i<e.datagram.relationPoList.length;i++)a.push(e.datagram.relationPoList[i].zrrlx);return t.$refs.IDTypeShoose.showRelatedType=a,t.$refs.IDTypeShoose.relationPoList=e.datagram.relationPoList,t.$refs.IDTypeShoose.uuid=t.uuid,t.$refs.IDTypeShoose.relatedType=a[0],r.next=18,t.$refs.IDTypeShoose.init();case 18:t.$refs.IDTypeShoose.IDTypeVisible=!0;case 19:r.next=22;break;case 21:"1"==t.oneValueToTwo.byhSelect?(t.initData=e.datagram,t.visibleApply=!0):"2"==t.oneValueToTwo.byhSelect&&(t.initData=e.datagram,t.visibleRegister=!0);case 22:r.next=38;break;case 24:return r.next=26,Object(y["a"])(e.datagram.access_token);case 26:if(n=r.sent,o=n.userformInfo,s=n.pass,c=n.userInfo,!s){r.next=35;break}return t.handle_jump_before(e,c),r.abrupt("return");case 35:return t.$refs.fillformDialog.fillForm=o,t.$refs.fillformDialog.fillFormVisible=!0,r.abrupt("return");case 38:case"end":return r.stop()}}),r)})))()},handleChangeFlag:function(){this.showUpdatePwd=!0},handle_jump_before:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$refs.signedagreement.handle_jump_before(e,t,"/userCenter/baseInfoP");case 1:case"end":return a.stop()}}),a)})))()},login:function(){var e=this,t=this;t.loginLoading||t.$refs.form.validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=10;break}if(localStorage.removeItem("token"),e.$cookie.remove("token"),localStorage.setItem("clientId",t.clientId),t.smscode_id){r.next=7;break}return t.$message.warning("请先获取验证码!"),r.abrupt("return");case 7:t.loginLoading=!0,i={client_id:t.clientId,redirect_uri:t.redirectURI,smscode_id:t.smscode_id,smsCode:t.form.smsCode,uuid:t.oneValueToTwo.uuid},Object(Ve["c"])(i).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:"0"==a.datagram.bz&&e.$message({duration:5e3,message:"您的手机号为空，请您登录系统后，在账户中心的手机号码修改菜单中添加默认手机号。",type:"warning"}),1e3===a.code&&(setTimeout((function(){t.loginLoading=!1}),8e3),t.handle_jump(a));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(){window.setTimeout((function(){t.loginLoading=!1}),100)}));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},handle_QR_change:function(e){var t=this;this.QR_tab=e,0!=e&&(1==e?(clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.qrTimeout=null,this.qrInterval=null,this.$nextTick((function(){t.$refs.qrCode.createQRcode()}))):3==e?(clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.qrTimeout=null,this.qrInterval=null,this.$nextTick((function(){t.$refs.qrCodeIts.createQRcode()})),this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].itsScan&&Object(z["a"])()?(this.outTime=!0,this.$message.error("个人所得税APP扫脸服务时间为5:00-23:00")):this.outTime=!1):this.createQRcode())},refreshCode:function(){window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.expired=!1,this.createQRcode()},handle_show_agreement:function(){this.serviceText?this.dialogAgreement=!0:this.$message({customClass:"el-icon-warning-color",message:"暂无协议内容",type:"warning"})},createQRcode:function(){var e=this;this.expired=!1,Object(Ve["f"])({uuid:this.oneValueToTwo.uuid}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.setQRCodeTimeout()})).catch((function(t){window.clearTimeout(e.qrTimeout),e.expired=!0}))},showQRCode:function(e){var t=document.getElementById("qrcodeDiv");t.innerHTML="";var r=new QRCode(t,{text:e,width:211,height:204});r._el.title=""},CheckState:function(e){var t=this;t.expired||(t.qrInterval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={qrcode_id:e,client_id:t.clientId,redirect_uri:t.redirectURI,uuid:t.oneValueToTwo.uuid},Object(Ve["l"])(a).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===a.code&&a.datagram?2==a.datagram.qrcode_status?(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.handle_jump(a)):1==a.datagram.qrcode_status?(window.clearTimeout(t.qrInterval),t.CheckState(e)):3==a.datagram.qrcode_status&&(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.expired=!0):(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.expired=!0,a.msg&&t.$message({customClass:"el-icon-warning-color",message:a.msg,type:"warning"}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(r){r&&r.stack&&r.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(t.qrInterval),t.CheckState(e)):(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.expired=!0)}));case 2:case"end":return r.stop()}}),r)}))),4e3))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.qrTimeout),e.qrTimeout=window.setTimeout((function(){window.clearTimeout(e.qrTimeout),e.expired=!0}),6e5)},getNewestAgreement:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(_["d"])({}).then((function(t){if(t&&t.datagram.length>0){var r,a=Object(b["a"])(t.datagram);try{var i=function(){var t=r.value;"03"===t.agreementCode&&Object(_["a"])({agreementCode:t.agreementCode,agreementVersion:t.agreementVersion}).then((function(r){e.dialogTitle=t.agreementName,e.serviceText=r.datagram.agreementText}))};for(a.s();!(r=a.n()).done;)i()}catch(n){a.e(n)}finally{a.f()}}}));case 1:case"end":return t.stop()}}),t)})))()}},mounted:function(){"3100"===localStorage.getItem("areaPrefix")&&(this.is_TAB=!0)}},Xe=Ge,et=(r("7d43"),Object($["a"])(Xe,De,Pe,!1,null,"e90265fa",null)),tt=et.exports,rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"100%"}},[e.secondStep.scanList.length>1?r("div",{staticClass:"tabsCls"},[r("div",{staticClass:"justifyCenterEnd",staticStyle:{height:"100%","padding-bottom":"0.75rem"}},e._l(e.secondStep.scanList,(function(t){return r("div",{key:t.value,staticStyle:{position:"relative",padding:"0 23px"}},[r("span",{class:e.QR_tab==t.value?"activeCls":"normalCls",on:{click:function(r){return e.handle_QR_change(t.value)}}},[e._v(e._s(t.name))]),r("div",{class:e.QR_tab==t.value?"tabSelect":"tabUnSelect"})])})),0)]):e._e(),r("div",["0"==e.QR_tab?r("div",{staticStyle:{margin:"70px 105px 0 105px"}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("div",{staticClass:"sms"},[r("el-form-item",[r("el-row",[r("el-input",{staticClass:"mobileInp",staticStyle:{width:"100%"},attrs:{readonly:"",placeholder:"请输入手机号码"},model:{value:e.oneValueToTwo.mobile,callback:function(t){e.$set(e.oneValueToTwo,"mobile","string"===typeof t?t.trim():t)},expression:"oneValueToTwo.mobile"}})],1)],1),r("el-form-item",{attrs:{prop:"smscode"}},[r("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[r("el-input",{staticClass:"smsInp",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},model:{value:e.form.smscode,callback:function(t){e.$set(e.form,"smscode","string"===typeof t?t.trim():t)},expression:"form.smscode"}}),r("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1)],1),r("el-row",[r("el-col",[r("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1):e._e(),"2"==e.QR_tab?r("div",[r("div",{staticClass:"QR_"},[r("div",{staticClass:"justifyCenter",staticStyle:{width:"13.1875rem",height:"12.75rem"}},[r("div",{staticStyle:{position:"absolute"},attrs:{id:"qrcodeDiv"}}),!0===e.expired?r("div",{staticClass:"cover",on:{click:e.refreshCode}},[r("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e()])]),r("div",{staticStyle:{"text-align":"center","align-items":"center","margin-top":"0.9375rem"}},[r("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),e._v(" 我已阅读并同意 "),r("span",{staticStyle:{color:"#4285F4",cursor:"pointer"},on:{click:e.handle_show_agreement}},[e._v("《人脸识别服务协议》")])],1),r("div",{staticClass:"_tips"},[r("el-button",{staticStyle:{width:"100%",margin:"0.625rem 0"},attrs:{type:"primary",disabled:!e.checked},on:{click:function(t){return e.CheckState(e.qrCode_id)}}},[e._v("验证完成")]),r("p",[e._v("温馨提示:")]),r("p",[e._v("1.请使用微信扫描此二维码进行实名验证")]),r("p",[e._v("2.暂不支持外籍人士、港澳台同胞线上实名验证")])],1)]):e._e(),"1"==e.QR_tab?r("div",[r("p",{staticClass:"QR_1_text"},[e._v("请使用"+e._s(e.areaName)+"税务APP扫码进行人脸验证")]),r("div",{staticClass:"QR_"},[e.visible?e._e():r("qrCode",{ref:"qrCode",attrs:{uuid:e.oneValueToTwo.uuid},on:{handleAgencyList:e.handle_aency_list}})],1)]):e._e(),"3"==e.QR_tab?r("div",[r("p",{staticClass:"QR_1_text"},[e._v("请使用个人所得税APP扫码进行人脸验证")]),r("div",{staticClass:"QR_"},[e.visible?e._e():r("qrCodeIts",{ref:"qrCodeIts",attrs:{outTime:e.outTime,uuid:e.oneValueToTwo.uuid},on:{handleAgencyList:e.handle_aency_list}})],1)]):e._e()]),e.visible?r("agentList",{ref:"agentList",attrs:{visible:e.visible,agentListData:e.agentListData,pageSize:e.pageSize,pageNum:e.pageNum,uuid:e.respUuid},on:{"update:visible":function(t){e.visible=t},agentQuick:e.agentQuick,handleViewQr:e.handle_view_qr}}):e._e(),r("el-dialog",{attrs:{title:"协议签订",visible:e.dialogVisible,"show-close":!1,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{height:"9.375rem","overflow-y":"auto","margin-bottom":"0.625rem"},domProps:{innerHTML:e._s(t.agreementText)}})})),0):e._e(),e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{display:"inline-block","margin-right":"2.5rem"}},[r("el-checkbox",{model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}}),e._v(" 我已同意并阅读 "),r("span",{staticStyle:{color:"#4285F4"}},[e._v("《"+e._s(t.agreementName)+"》")])],1)})),0):e._e(),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.asddd}},[e._v("同 意")])],1)]),r("el-dialog",{attrs:{title:e.dialogTitle,"append-to-body":"",visible:e.dialogAgreement,"close-on-click-modal":!1,width:"776px"},on:{"update:visible":function(t){e.dialogAgreement=t}}},[r("div",{domProps:{innerHTML:e._s(e.serviceText)}}),r("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement=!1}}},[e._v("确 定")])],1)]),r("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),r("signedagreement",{ref:"signedagreement",on:{handleReturn:e.handle_return_}})],1)},at=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"1.875rem","line-height":"1.4375rem"}}),e._v("刷新")])}],it=r("509b"),nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"justifyCenter"},[e.codeShow?a("img",{staticClass:"centerLogo",attrs:{src:r("7e9b")}}):e._e(),a("div",{attrs:{id:"qrcodeDivE"}}),!0===e.expired?a("div",{staticClass:"cover",on:{click:e.refreshCode}},[a("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e()])},ot=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])}],st={name:"qrCode",props:{uuid:String},data:function(){return{exit_variable:!0,expired:!1,qrcode:"",qrCode_id:"",codeShow:!1,timeout:null,interval:null,client_id:Object(g["b"])(),redirect_uri:Object(g["j"])()}},methods:{createQRcode:function(){var e=this;this.expired=!1,Object(k["e"])({uuid:this.uuid}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.CheckState(t.datagram.qrcode_id),e.setQRCodeTimeout()})).catch((function(t){window.clearTimeout(e.timeout),e.expired=!0}))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),e.expired=!0}),6e5)},showQRCode:function(e){var t=document.getElementById("qrcodeDivE");t.innerHTML="";var r=new QRCode(t,{text:e,width:211,height:204});r._el.title="",this.codeShow=!0},CheckState:function(e){var t=this,r=this;r.expired||(r.interval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i={qrcode_id:r.qrCode_id,client_id:r.client_id,redirect_uri:r.redirect_uri,uuid:r.uuid},Object(k["t"])(i).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(i){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:1e3===i.code&&i.datagram?2==i.datagram.qrcode_status?(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.$emit("handleAgencyList",i)):1==i.datagram.qrcode_status?t.exit_variable&&r.CheckState(e):3==i.datagram.qrcode_status&&(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,i.msg&&r.$message({customClass:"el-icon-warning-color",message:i.msg,type:"warning"}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(r.interval),r.CheckState(e)):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0)}));case 2:case"end":return a.stop()}}),a)}))),4e3))},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.createQRcode()},clearTimers:function(){clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},beforeDestroy:function(){this.exit_variable=!1}},ct=st,lt=(r("d204"),Object($["a"])(ct,nt,ot,!1,null,"7e7fd014",null)),ut=lt.exports,dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"justifyCenter"},[r("img",{attrs:{id:"qrcodeDivE"}}),!0===e.expired?r("div",{staticClass:"cover",on:{click:e.refreshCode}},[r("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e()])},mt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])}],ft=r("3cb7"),gt={name:"qrCode",props:{uuid:String,outTime:Boolean},data:function(){return{exit_variable:!0,expired:!1,qrcode:"",qrCode_id:"",codeShow:!1,timeout:null,interval:null,client_id:Object(g["b"])(),redirect_uri:Object(g["j"])()}},methods:{createQRcode:function(){var e=this;this.expired=!1,Object(ft["d"])({uuid:this.uuid}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.CheckState(t.datagram.qrcode_id),e.setQRCodeTimeout(),e.outTime&&(window.clearTimeout(e.timeout),e.expired=!0)})).catch((function(t){window.clearTimeout(e.timeout),e.expired=!0}))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),e.expired=!0}),6e5)},showQRCode:function(e){var t=document.getElementById("qrcodeDivE");t.src="data:image/jpg;base64,"+e,this.codeShow=!0},CheckState:function(e){var t=this,r=this;r.expired||(r.interval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i={qrcode_id:r.qrCode_id,client_id:r.client_id,redirect_uri:r.redirect_uri,uuid:r.uuid},Object(ft["l"])(i).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(i){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:1e3===i.code&&i.datagram?2==i.datagram.qrcode_status?(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.$emit("handleAgencyList",i)):1==i.datagram.qrcode_status?t.exit_variable&&r.CheckState(e):3==i.datagram.qrcode_status&&(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,i.msg&&r.$message({customClass:"el-icon-warning-color",message:i.msg,type:"warning"}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(r.interval),r.CheckState(e)):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0)}));case 2:case"end":return a.stop()}}),a)}))),4e3))},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.createQRcode()},clearTimers:function(){clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},beforeDestroy:function(){this.exit_variable=!1}},pt=gt,ht=(r("33e5"),Object($["a"])(pt,dt,mt,!1,null,"49738e57",null)),vt=ht.exports,bt={name:"loginTwiceP",components:{qrCode:ut,qrCodeIts:vt,agentList:it["a"],fillForm:Q["default"],signedagreement:U["default"]},props:{oneValueToTwo:{type:Object,default:function(){return{}}}},data:function(){return{outTime:!1,respUuid:"",checked:!0,list:[],bz:!1,form:{smscode:""},dialogVisible:!1,asddd:function(){},validate_status:!1,cliState:Object(g["l"])(),clientId:Object(g["b"])(),redirectURI:Object(g["j"])(),loginLoading:!1,rules:{smscode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}]},buttonName:"获取验证码",getCodeDisabled:!1,time:119,interval:"",expired:!0,qrcode:"",qrCode_id:"",qrTimeout:null,qrInterval:null,agreementName:"",dialogAgreement:!1,agreementText:"",QR_tab:null,faceAgreement:{},dialogTitle:"",serviceText:"",showChangeBtn:!1,areaName:"",secondStep:null,visible:!1,agentListData:[],pageSize:"",pageNum:""}},watch:{time:{handler:function(e){e<0&&(this.buttonName="重新发送",this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0},oneValueToTwo:{handler:function(e){var t=this;if(e){var r=e;r.scanList.length>0&&(this.showChangeBtn=!0),r.scanList.length>0&&(this.QR_tab=r.scanList[0].value,this.visible||this.$nextTick((function(){t.handle_QR_change(t.QR_tab)}))),this.secondStep=r}},deep:!0,immediate:!0}},beforeDestroy:function(){clearInterval(this.interval),clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.interval=null,this.qrTimeout=null,this.qrInterval=null},created:function(){var e=this.$store.state.settings.logConfig;if(e){var t,r=null===(t=this.$store.state.settings.logConfig)||void 0===t?void 0:t.areaInfoData,a=r[0].areaPrefix;this.areaName=r[0].areaName,"3100"===a&&this.getNewestAgreement()}},methods:{handle_return_:function(){this.$emit("handleAgentCompany")},closeFillForm:function(){location.reload()},getValidCode:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,!r.getCodeDisabled){t.next=4;break}return e.$message.warning("请勿重复发送验证码！"),t.abrupt("return");case 4:a={uuid:r.oneValueToTwo.uuid},r.getCodeDisabled=!0,r.time=119,r.buttonName="120s",r.interval=window.setInterval((function(){r.buttonName=r.time+"s",--r.time}),1e3),Object(k["u"])(a).then((function(t){if(1e3===t.code){var a=e;a.smscode_id=t.datagram.smscode_id,e.$message.success("短信验证码成功发送到"+t.datagram.mobile)}else clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"}));case 10:case"end":return t.stop()}}),t)})))()},handle_jump_before:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$refs.signedagreement.handle_jump_before(e,t,"/userCenter/baseInfoEE");case 1:case"end":return a.stop()}}),a)})))()},agentQuick:function(e){var t=this,r=this,a=e.uniqueIdentity,i=e.relatedType,n={client_id:r.clientId,redirect_uri:r.redirectURI,creditCode:a,uuid:r.oneValueToTwo.agentListPage_uuid,relatedType:i};Object(ft["q"])(n).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var i,n,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(setTimeout((function(){r.loginLoading=!1,t.$refs.agentList.loadingDl=!1,t.$refs.agentList.$refs.IDTypeShoose.loginLoading=!1}),8e3),1e3!==a.code){e.next=16;break}return e.next=4,Object(y["a"])(a.datagram.access_token);case 4:if(i=e.sent,n=i.userformInfo,o=i.pass,s=i.userInfo,!o){e.next=13;break}return t.handle_jump_before(a,s),e.abrupt("return");case 13:return t.$refs.fillformDialog.fillForm=n,t.$refs.fillformDialog.fillFormVisible=!0,e.abrupt("return");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.$refs.agentList.loadingDl=!1,t.$refs.agentList.$refs.IDTypeShoose.loginLoading=!1,window.setTimeout((function(){r.loginLoading=!1}),100)}))},login:function(){var e=this,t=this;t.loginLoading||t.$refs.form.validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=10;break}if(localStorage.removeItem("token"),e.$cookie.remove("token"),localStorage.setItem("clientId",t.clientId),t.smscode_id){r.next=7;break}return t.$message.warning("请先获取验证码!"),r.abrupt("return");case 7:t.loginLoading=!0,i={client_id:t.clientId,redirect_uri:t.redirectURI,smscode_id:t.smscode_id,smsCode:t.form.smscode,uuid:t.oneValueToTwo.uuid},Object(ft["b"])(i).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i,n,o,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1e3!==a.code){r.next=17;break}if(setTimeout((function(){e.loginLoading=!1}),8e3),!a.datagram.access_token){r.next=11;break}return r.next=5,Object(y["a"])(a.datagram.access_token);case 5:return i=r.sent,n=i.userformInfo,o=i.pass,s=i.userInfo,o?e.handle_jump_before(a,s):(e.$refs.fillformDialog.fillForm=n,e.$refs.fillformDialog.fillFormVisible=!0),r.abrupt("return",!1);case 11:e.respUuid=a.datagram.uuid,e.$emit("modifUuid",a.datagram.uuid),t.agentListData=a.datagram.pageInfo,t.visible=!0,t.pageSize=a.datagram.pageInfo.pageSize,t.pageNum=a.datagram.pageInfo.pageNum;case 17:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(){window.setTimeout((function(){t.loginLoading=!1}),100)}));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},handle_view_qr:function(){this.visible=!1,this.handle_QR_change(this.QR_tab)},handle_QR_change:function(e){var t=this;this.QR_tab=e,0!=e&&(1==e?(clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.qrTimeout=null,this.qrInterval=null,this.$nextTick((function(){t.$refs.qrCode.createQRcode()}))):3==e?(clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.qrTimeout=null,this.qrInterval=null,this.$nextTick((function(){t.$refs.qrCodeIts.createQRcode()})),this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].itsScan&&Object(z["a"])()?(this.outTime=!0,this.$message.error("个人所得税APP扫脸服务时间为5:00-23:00")):this.outTime=!1):this.createQRcode())},refreshCode:function(){window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.expired=!1,this.createQRcode()},handle_show_agreement:function(){this.serviceText?this.dialogAgreement=!0:this.$message({customClass:"el-icon-warning-color",message:"暂无协议内容",type:"warning"})},createQRcode:function(){var e=this;this.expired=!1,Object(k["d"])({uuid:this.oneValueToTwo.uuid}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.setQRCodeTimeout()})).catch((function(t){window.clearTimeout(e.qrTimeout),e.expired=!0}))},showQRCode:function(e){var t=document.getElementById("qrcodeDiv");t.innerHTML="";var r=new QRCode(t,{text:e,width:211,height:204});r._el.title=""},CheckState:function(e){var t=this;if(!t.expired){var r={qrcode_id:e,client_id:t.clientId,redirect_uri:t.redirectURI,uuid:t.oneValueToTwo.uuid};Object(k["r"])(r).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:1e3===r.code&&r.datagram?2==r.datagram.qrcode_status?(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.handle_aency_list(r)):1==r.datagram.qrcode_status?window.clearTimeout(t.qrInterval):3==r.datagram.qrcode_status&&(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.expired=!0):(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.expired=!0,r.msg&&t.$message({customClass:"el-icon-warning-color",message:r.msg,type:"warning"}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e&&e.stack&&e.stack.indexOf("handleTimeout")>=0?window.clearTimeout(t.qrInterval):(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.expired=!0)}))}},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.qrTimeout),e.qrTimeout=window.setTimeout((function(){window.clearTimeout(e.qrTimeout),e.expired=!0}),6e5)},getNewestAgreement:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(_["d"])({}).then((function(t){if(t&&t.datagram.length>0){var r,a=Object(b["a"])(t.datagram);try{var i=function(){var t=r.value;"03"===t.agreementCode&&Object(_["a"])({agreementCode:t.agreementCode,agreementVersion:t.agreementVersion}).then((function(r){e.dialogTitle=t.agreementName,e.serviceText=r.datagram.agreementText}))};for(a.s();!(r=a.n()).done;)i()}catch(n){a.e(n)}finally{a.f()}}}));case 1:case"end":return t.stop()}}),t)})))()},handle_aency_list:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.datagram.access_token){r.next=9;break}return r.next=3,Object(y["a"])(e.datagram.access_token);case 3:return a=r.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,n?t.handle_jump_before(e,o):(t.$refs.fillformDialog.fillForm=i,t.$refs.fillformDialog.fillFormVisible=!0),r.abrupt("return",!1);case 9:t.respUuid=e.datagram.uuid,t.$emit("modifUuid",e.datagram.uuid),t.agentListData=e.datagram.pageInfo,t.visible=!0,t.pageSize=e.datagram.pageInfo.pageSize,t.pageNum=e.datagram.pageInfo.pageNum,t.loginLoading=!1;case 16:case"end":return r.stop()}}),r)})))()}}},wt=bt,_t=(r("0456"),Object($["a"])(wt,rt,at,!1,null,"7e2095ef",null)),yt=_t.exports,xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[e.secondStep.length>1?r("div",{staticClass:"tabsCls"},[r("div",{staticClass:"justifyCenterEnd",staticStyle:{height:"100%","padding-bottom":"10px"}},e._l(e.secondStep,(function(t){return r("div",{key:t.name,staticStyle:{position:"relative",padding:"0 23px"}},[r("span",{class:e.activeLoginName==t.name?"activeCls":"normalCls",on:{click:function(r){return e.tabChange(t)}}},[e._v(e._s(t.name))]),r("div",{class:e.activeLoginName==t.name?"tabSelect":"tabUnSelect"})])})),0)]):e._e(),r(e.activeLoginType,{tag:"component",attrs:{taxPlays:e.taxPlays,uuid:e.oneValueToTwo.uuid,scanList:e.scanList}}),e.visible?r("agentList",{ref:"agentList",attrs:{visible:e.visible,uuid:e.lastUUid,agentListData:e.agentListData,pageSize:e.pageSize,pageNum:e.pageNum},on:{"update:visible":function(t){e.visible=t},agentQuick:e.agentQuick}}):e._e(),r("el-dialog",{attrs:{title:"协议签订",visible:e.dialogVisible,"show-close":!1,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{height:"9.375rem","overflow-y":"auto","margin-bottom":"0.625rem"},domProps:{innerHTML:e._s(t.agreementText)}})})),0):e._e(),e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{display:"inline-block","margin-right":"2.5rem"}},[r("el-checkbox",{model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}}),e._v(" 我已同意并阅读 "),r("span",{staticStyle:{color:"#4285F4"}},[e._v("《"+e._s(t.agreementName)+"》")])],1)})),0):e._e(),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.asddd}},[e._v("同 意")])],1)]),r("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),r("signedagreement",{ref:"signedagreement",on:{handleReturn:e.handle_return_}})],1)},Ct=[],Tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticStyle:{"padding-top":"10px"}},[a("el-col",{staticStyle:{"margin-top":"69px"}},[a("el-form",{ref:"form",staticStyle:{width:"418px",margin:"0 auto"},attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{prop:"user_id"}},[a("el-row",[a("el-select",{staticClass:"taxOfficer",staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择办税（费）人员"},on:{change:e.handle_change},model:{value:e.form.user_id,callback:function(t){e.$set(e.form,"user_id",t)},expression:"form.user_id"}},e._l(e.taxPlays,(function(t){return a("el-option",{key:t.user_id,attrs:{label:t.full_name+" "+(t.mobile||t.id_card)+" "+e.getSelectRelatedType(t.relatedType),value:t.user_id}})})),1)],1)],1),a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"password"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLock,expression:"showCapsLock"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-row",[a("el-input",{staticClass:"pwdInp",staticStyle:{width:"100%"},attrs:{type:e.eyesFlag?"text":"password",maxlength:"20",placeholder:e.placeHolderPwd},on:{focus:function(t){e.showTemptip=!0},blur:e.capsBlur},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}},[e.eyesFlag?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"})])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTemptip,expression:"showTemptip"}],staticClass:"form-temp-tip"},[e._v("请输入"),a("span",[e._v("个人")]),e._v("用户密码")]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.slideType,expression:"slideType"}]},[a("el-row",[a("el-col",[a("sliderValidate",{ref:"sliderValidate",attrs:{status:e.validate_status},on:{"update:status":function(t){e.validate_status=t}}})],1)],1)],1),a("el-row",[a("el-col",[a("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1),e.slideType?e._e():a("slideVerify",{ref:"slideVerify",on:{handleStatus:e.handle_validate_status}})],1)},kt=[],St={mixins:[re["a"]],components:{slideVerify:ee["a"],sliderValidate:te["a"]},props:["taxPlays","uuid"],data:function(){return{form:{user_id:"",password:"",creditCode:Object(g["d"])()},rules:{user_id:[{required:!0,message:"请先选择办税（费）人员",trigger:["blur","change"]}],password:[{required:!0,message:"请输入个人用户密码",trigger:"blur"}]},eyesFlag:!1,showTemptip:!1,loginLoading:!1,validate_status:!1,clientId:Object(g["b"])(),redirectURI:Object(g["j"])()}},computed:{slideType:function(){var e=!1;return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].sliderValidateOld&&(e=this.$store.state.settings.logConfig.switch[0].sliderValidateOld),e},placeHolderPwd:function(){var e={5100:!0,3702:!0,1200:!0,1400:!0,4500:!0,2102:!0};return e[this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix]?"个人用户密码(初始密码为证件号码后六位)":"个人用户密码"}},methods:{handle_validate_status:function(e){this.validate_status=e,this.login()},getSelectRelatedType:function(e){return"01"===e?"法人代表人":"02"===e?"财务负责人":"03"===e?"办税员":"05"===e?"管理员":"06"===e?"出口退税人员":"07"===e?"领票员":"08"===e?"社保联系人":"09"===e?"开票员":"99"===e?"其他人员":""},handle_change:function(e){var t=this.taxPlays.find((function(t){return t.user_id==e}));t.mobile&&"0"===t.bz&&(this.bz=!0)},login:function(){var e=this,t=this;t.loginLoading||t.$refs.form.validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=15;break}if(e.validate_status||e.slideType){r.next=6;break}return e.$refs.slideVerify.visible=!0,r.abrupt("return");case 6:if(e.validate_status||!e.slideType){r.next=9;break}return e.$message.warning("请先进行滑块验证！"),r.abrupt("return");case 9:localStorage.removeItem("token"),e.$cookie.remove("token"),localStorage.setItem("clientId",t.clientId),t.loginLoading=!0,i={uuid:t.uuid,client_id:t.clientId,user_id:t.form.user_id,password:t.form.password,redirect_uri:t.redirectURI},Object(ft["p"])(i).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===a.code&&(setTimeout((function(){e.slideType&&e.$refs.sliderValidate.reset(),t.loginLoading=!1,e.validate_status=!1}),8e3),e.$parent.getRes(a));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(){e.slideType&&e.$refs.sliderValidate.reset(),window.setTimeout((function(){t.loginLoading=!1,e.validate_status=!1}),100)}));case 15:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}}},Rt=St,$t=(r("e49f"),Object($["a"])(Rt,Tt,kt,!1,null,"1c4eae2f",null)),It=$t.exports,jt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{staticStyle:{"padding-top":"10px"}},[r("el-col",{staticStyle:{"margin-top":"69px"}},[r("el-form",{ref:"form",staticStyle:{width:"418px",margin:"0 auto"},attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{prop:"user_id"}},[r("el-row",[r("el-select",{staticClass:"taxOfficer",staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择办税（费）人员"},on:{change:e.handle_change},model:{value:e.form.user_id,callback:function(t){e.$set(e.form,"user_id",t)},expression:"form.user_id"}},e._l(e.taxPlays,(function(t){return r("el-option",{key:t.user_id,attrs:{label:t.full_name+" "+(t.mobile||t.id_card)+" "+e.getSelectRelatedType(t.relatedType),value:t.user_id}})})),1)],1)],1),r("el-form-item",{attrs:{prop:"smscode"}},[r("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[r("el-input",{staticClass:"smsInp",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},model:{value:e.form.smscode,callback:function(t){e.$set(e.form,"smscode","string"===typeof t?t.trim():t)},expression:"form.smscode"}}),r("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.slideType,expression:"slideType"}]},[r("el-row",[r("el-col",[r("sliderValidate",{ref:"sliderValidate",attrs:{status:e.validate_status},on:{"update:status":function(t){e.validate_status=t}}})],1)],1)],1),r("el-row",[r("el-col",[r("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1),e.slideType?e._e():r("slideVerify",{ref:"slideVerify",on:{handleStatus:e.handle_validate_status}})],1)},Ot=[],qt={components:{slideVerify:ee["a"],sliderValidate:te["a"]},props:["taxPlays","uuid"],data:function(){return{form:{smscode:"",password:"",creditCode:Object(g["d"])()},rules:{smscode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}],password:[{required:!0,message:"请输入个人用户密码",trigger:"blur"}]},smscode_id:"",loginLoading:!1,validate_status:!1,clientId:Object(g["b"])(),redirectURI:Object(g["j"])(),buttonName:"获取验证码",getCodeDisabled:!1,time:119,interval:""}},computed:{slideType:function(){var e=!1;return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].sliderValidateOld&&(e=this.$store.state.settings.logConfig.switch[0].sliderValidateOld),e}},methods:{handle_validate_status:function(e){this.validate_status=e,this.login()},getSelectRelatedType:function(e){return"01"===e?"法人代表人":"02"===e?"财务负责人":"03"===e?"办税员":"05"===e?"管理员":"06"===e?"出口退税人员":"07"===e?"领票员":"08"===e?"社保联系人":"09"===e?"开票员":"99"===e?"其他人员":""},handle_change:function(e){var t=this.taxPlays.find((function(t){return t.user_id==e}));t.mobile?"0"===t.bz&&(this.bz=!0):this.$message({duration:5e3,message:"您的手机号为空，请您登录系统后，在账户中心的手机号码修改菜单中添加默认手机号。",type:"warning"})},login:function(){var e=this,t=this;t.loginLoading||t.$refs.form.validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=15;break}if(e.validate_status||e.slideType){r.next=6;break}return e.$refs.slideVerify.visible=!0,r.abrupt("return");case 6:if(e.validate_status||!e.slideType){r.next=9;break}return e.$message.warning("请先进行滑块验证！"),r.abrupt("return");case 9:localStorage.removeItem("token"),e.$cookie.remove("token"),localStorage.setItem("clientId",t.clientId),t.loginLoading=!0,i={uuid:t.uuid,client_id:t.clientId,user_id:t.form.user_id,smscode_id:t.smscode_id,smscode:t.form.smscode,redirect_uri:t.redirectURI},Object(ft["n"])(i).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===a.code&&(setTimeout((function(){e.slideType&&e.$refs.sliderValidate.reset(),t.loginLoading=!1,e.validate_status=!1}),8e3),e.$parent.getRes(a));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(){e.slideType&&e.$refs.sliderValidate.reset(),window.setTimeout((function(){t.loginLoading=!1,e.validate_status=!1}),100)}));case 15:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},checkTel:function(e){var t=/^(1)\d{10}$/;return t.test(e)},getValidCode:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.user_id||e.$message.warning("请先选择办税（费）人员!"),!e.getCodeDisabled){t.next=4;break}return e.$message.warning("请勿重复发送验证码！"),t.abrupt("return");case 4:r={user_id:e.form.user_id,uuid:e.uuid},a=e,a.getCodeDisabled=!0,a.time=119,a.buttonName="120s",a.interval=window.setInterval((function(){a.buttonName=a.time+"s",--a.time}),1e3),Object(ft["t"])(r).then((function(e){1e3===e.code?(a.smscode_id=e.datagram.smscode_id,a.$message.success("短信验证码成功发送到"+e.datagram.mobile)):(clearInterval(a.interval),a.interval=null,a.getCodeDisabled=!1,a.buttonName="获取验证码")})).catch((function(){clearInterval(a.interval),a.interval=null,a.getCodeDisabled=!1,a.buttonName="获取验证码"}));case 11:case"end":return t.stop()}}),t)})))()}},watch:{time:{handler:function(e){e<0&&(this.buttonName="重新发送",this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0}},beforeDestroy:function(){clearInterval(this.interval),this.interval=null}},Lt=qt,At=(r("bb4e"),Object($["a"])(Lt,jt,Ot,!1,null,"4727b73e",null)),Dt=At.exports,Pt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",{staticStyle:{"padding-top":"10px"}},[r("el-col",[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("el-form-item",{attrs:{prop:"user_id"}},[r("div",{staticStyle:{"text-align":"center"}},[r("el-select",{staticClass:"taxOfficer",staticStyle:{width:"418px",margin:"0 auto"},attrs:{filterable:"",placeholder:"请选择办税（费）人员"},on:{change:e.handle_change},model:{value:e.form.user_id,callback:function(t){e.$set(e.form,"user_id",t)},expression:"form.user_id"}},e._l(e.taxPlays,(function(t){return r("el-option",{key:t.user_id,attrs:{label:t.full_name+" "+(t.mobile||t.id_card)+" "+e.getSelectRelatedType(t.relatedType),value:t.user_id}})})),1)],1)]),2==e.scanList?r("div",[r("div",{staticClass:"QR_"},[r("div",{staticClass:"justifyCenter",staticStyle:{width:"13.1875rem",height:"12.75rem"}},[r("div",{staticStyle:{position:"absolute"},attrs:{id:"qrcodeDiv"}}),!0===e.expired?r("div",{staticClass:"cover",on:{click:e.refreshCode}},[r("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"1.875rem","line-height":"1.4375rem"}}),e._v("刷新")])]):e._e()])]),r("div",{staticStyle:{"text-align":"center","align-items":"center","margin-top":"0.9375rem"}},[r("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),e._v(" 我已阅读并同意 "),r("span",{staticStyle:{color:"#4285F4",cursor:"pointer"},on:{click:e.handle_show_agreement}},[e._v("《人脸识别服务协议》")])],1),r("div",{staticClass:"_tips"},[r("el-button",{staticStyle:{width:"100%",margin:"0.625rem 0"},attrs:{type:"primary",disabled:!e.checked},on:{click:function(t){return e.CheckState(e.qrCode_id)}}},[e._v("验证完成")]),r("p",[e._v("温馨提示:")]),r("p",[e._v("1.请使用微信扫描此二维码进行实名验证")]),r("p",[e._v("2.暂不支持外籍人士、港澳台同胞线上实名验证")])],1)]):e._e(),1==e.scanList?r("div",[r("p",{staticClass:"QR_1_text"},[e._v("请使用"+e._s(e.areaName)+"税务APP扫码进行人脸验证")]),r("div",{staticClass:"QR_"},[r("qrCode",{ref:"qrCode",attrs:{uuid:e.uuid,user_id:e.form.user_id},on:{handleAgencyList:e.handle_aency_list}})],1)]):e._e(),3==e.scanList?r("div",[r("p",{staticClass:"QR_1_text"},[e._v("请使用个人所得税APP扫码进行人脸验证")]),r("div",{staticClass:"QR_"},[r("certificateqrCodeIts",{ref:"qrCodeIts",attrs:{outTime:e.outTime,uuid:e.uuid,user_id:e.form.user_id},on:{handleAgencyList:e.handle_aency_list}})],1)]):e._e()],1)],1),r("el-dialog",{attrs:{title:e.dialogTitle,"append-to-body":"",visible:e.dialogAgreement,"close-on-click-modal":!1,width:"776px"},on:{"update:visible":function(t){e.dialogAgreement=t}}},[r("div",{domProps:{innerHTML:e._s(e.serviceText)}}),r("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement=!1}}},[e._v("确 定")])],1)])],1)},Nt=[],Ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"justifyCenter"},[e.codeShow?a("img",{staticClass:"centerLogo",attrs:{src:r("7e9b")}}):e._e(),a("div",{attrs:{id:"qrcodeDivE"}}),!0===e.expired?a("div",{staticClass:"cover",on:{click:e.refreshCode}},[a("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e()])},Vt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])}],Qt={name:"qrCode",props:["uuid","user_id"],data:function(){return{exit_variable:!0,expired:!1,qrcode:"",qrCode_id:"",codeShow:!1,timeout:null,interval:null,client_id:Object(g["b"])(),redirect_uri:Object(g["j"])()}},methods:{createQRcode:function(){var e=this;this.expired=!1,Object(ft["g"])({uuid:this.uuid,user_id:this.user_id}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.CheckState(t.datagram.qrcode_id),e.setQRCodeTimeout()})).catch((function(t){window.clearTimeout(e.timeout),e.expired=!0}))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),e.expired=!0}),6e5)},showQRCode:function(e){var t=document.getElementById("qrcodeDivE");t.innerHTML="";var r=new QRCode(t,{text:e,width:211,height:204});r._el.title="",this.codeShow=!0},CheckState:function(e){var t=this,r=this;r.expired||(r.interval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i={qrcode_id:e,user_id:r.user_id,uuid:r.uuid},Object(ft["r"])(i).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(i){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:1e3===i.code&&i.datagram?2==i.datagram.qrcode_status?(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.$emit("handleAgencyList",i)):1==i.datagram.qrcode_status?t.exit_variable&&r.CheckState(e):3==i.datagram.qrcode_status&&(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,i.msg&&r.$message({customClass:"el-icon-warning-color",message:i.msg,type:"warning"}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(r.interval),r.CheckState(e)):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0)}));case 2:case"end":return a.stop()}}),a)}))),4e3))},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.createQRcode()},clearTimers:function(){clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},beforeDestroy:function(){this.exit_variable=!1,clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},Ut=Qt,Et=(r("b464"),Object($["a"])(Ut,Ft,Vt,!1,null,"3fb5ffe0",null)),Bt=Et.exports,zt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"justifyCenter"},[r("img",{attrs:{id:"qrcodeDivE"}}),!0===e.expired?r("div",{staticClass:"cover",on:{click:e.refreshCode}},[r("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e()])},Mt=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])}],Ht={name:"qrCode",props:["uuid","user_id","outTime"],data:function(){return{exit_variable:!0,expired:!1,qrcode:"",qrCode_id:"",codeShow:!1,timeout:null,interval:null,client_id:Object(g["b"])(),redirect_uri:Object(g["j"])()}},methods:{createQRcode:function(){var e=this;this.expired=!1,Object(ft["e"])({uuid:this.uuid,user_id:this.user_id}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.CheckState(t.datagram.qrcode_id),e.setQRCodeTimeout(),e.outTime&&(window.clearTimeout(e.timeout),e.expired=!0)})).catch((function(t){window.clearTimeout(e.timeout),e.expired=!0}))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),e.expired=!0}),6e5)},showQRCode:function(e){var t=document.getElementById("qrcodeDivE");t.src="data:image/jpg;base64,"+e,this.codeShow=!0},CheckState:function(e){var t=this,r=this;r.expired||(r.interval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:i={qrcode_id:e,user_id:r.user_id,uuid:r.uuid},Object(ft["m"])(i).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark((function a(i){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:1e3===i.code&&i.datagram?2==i.datagram.qrcode_status?(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.$emit("handleAgencyList",i)):1==i.datagram.qrcode_status?t.exit_variable&&r.CheckState(e):3==i.datagram.qrcode_status&&(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,i.msg&&r.$message({customClass:"el-icon-warning-color",message:i.msg,type:"warning"}));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(r.interval),r.CheckState(e)):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0)}));case 2:case"end":return a.stop()}}),a)}))),4e3))},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.createQRcode()},clearTimers:function(){clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},beforeDestroy:function(){this.exit_variable=!1,clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},Wt=Ht,Zt=(r("4e37"),Object($["a"])(Wt,zt,Mt,!1,null,"453dce96",null)),Yt=Zt.exports,Jt={components:{qrCode:Bt,certificateqrCodeIts:Yt},props:["taxPlays","uuid","scanList"],data:function(){return{outTime:!1,form:{user_id:"",creditCode:Object(g["d"])()},rules:{user_id:[{required:!0,message:"请先选择办税（费）人员",trigger:["blur","change"]}]},qrcode:"",areaName:"",checked:!0,qrCode_id:"",expired:!0,dialogTitle:"",serviceText:"",qrTimeout:null,qrInterval:null,dialogAgreement:!1,clientId:Object(g["b"])(),redirectURI:Object(g["j"])()}},methods:{getSelectRelatedType:function(e){return"01"===e?"法人代表人":"02"===e?"财务负责人":"03"===e?"办税员":"05"===e?"管理员":"06"===e?"出口退税人员":"07"===e?"领票员":"08"===e?"社保联系人":"09"===e?"开票员":"99"===e?"其他人员":""},handle_change:function(e){var t=this.taxPlays.find((function(t){return t.user_id==e}));t.mobile?"0"===t.bz&&(this.bz=!0):this.$message({duration:5e3,message:"您的手机号为空，请您登录系统后，在账户中心的手机号码修改菜单中添加默认手机号。",type:"warning"}),this.handle_QR_change(this.scanList)},handle_QR_change:function(e){var t=this;this.form.user_id&&(1==e?(clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.qrTimeout=null,this.qrInterval=null,this.$nextTick((function(){t.$refs.qrCode.createQRcode()}))):3==e?(clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.qrTimeout=null,this.qrInterval=null,this.$nextTick((function(){t.$refs.qrCodeIts.createQRcode()})),this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].itsScan&&Object(z["a"])()?(this.outTime=!0,this.$message.error("个人所得税APP扫脸服务时间为5:00-23:00")):this.outTime=!1):this.createQRcode())},refreshCode:function(){window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.expired=!1,this.createQRcode()},handle_show_agreement:function(){this.serviceText?this.dialogAgreement=!0:this.$message({customClass:"el-icon-warning-color",message:"暂无协议内容",type:"warning"})},createQRcode:function(){var e=this;this.expired=!1,Object(ft["f"])({uuid:this.uuid,user_id:this.form.user_id}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.setQRCodeTimeout()})).catch((function(t){window.clearTimeout(e.qrTimeout),e.expired=!0}))},showQRCode:function(e){var t=document.getElementById("qrcodeDiv");t.innerHTML="";var r=new QRCode(t,{text:e,width:211,height:204});r._el.title=""},handle_aency_list:function(e){this.$parent.getResScan(e)},CheckState:function(e){var t=this;t.expired||(t.qrInterval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={qrcode_id:e,uuid:t.uuid,user_id:t.form.user_id},Object(ft["o"])(a).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:1e3===r.code&&r.datagram?2==r.datagram.qrcode_status?(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.$parent.getResScan(r)):1==r.datagram.qrcode_status?window.clearTimeout(t.qrInterval):3==r.datagram.qrcode_status&&(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.expired=!0):(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.expired=!0,r.msg&&t.$message({customClass:"el-icon-warning-color",message:r.msg,type:"warning"}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e&&e.stack&&e.stack.indexOf("handleTimeout")>=0?window.clearTimeout(t.qrInterval):(window.clearTimeout(t.qrInterval),window.clearTimeout(t.qrTimeout),t.expired=!0)}));case 2:case"end":return r.stop()}}),r)}))),4e3))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.qrTimeout),e.qrTimeout=window.setTimeout((function(){window.clearTimeout(e.qrTimeout),e.expired=!0}),6e5)},getNewestAgreement:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(_["d"])({}).then((function(t){if(t&&t.datagram.length>0){var r,a=Object(b["a"])(t.datagram);try{var i=function(){var t=r.value;"03"===t.agreementCode&&Object(_["a"])({agreementCode:t.agreementCode,agreementVersion:t.agreementVersion}).then((function(r){e.dialogTitle=t.agreementName,e.serviceText=r.datagram.agreementText}))};for(a.s();!(r=a.n()).done;)i()}catch(n){a.e(n)}finally{a.f()}}}));case 1:case"end":return t.stop()}}),t)})))()}},watch:{scanList:{handler:function(e){e&&this.handle_QR_change(e)},deep:!0,immediate:!0}},created:function(){var e=this.$store.state.settings.logConfig;if(e){var t,r=null===(t=this.$store.state.settings.logConfig)||void 0===t?void 0:t.areaInfoData;this.areaName=r[0].areaName;var a=r[0].areaPrefix;"3100"===a&&this.getNewestAgreement()}},beforeDestroy:function(){clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.qrTimeout=null,this.qrInterval=null}},Kt=Jt,Gt=(r("c580"),Object($["a"])(Kt,Pt,Nt,!1,null,"c24d6790",null)),Xt=Gt.exports,er={components:{isActivePwd:It,isActiveSms:Dt,isActiveScan:Xt,agentList:it["a"],fillForm:Q["default"],signedagreement:U["default"]},props:{oneValueToTwo:{type:Object,default:function(){return{}}}},data:function(){return{lastUUid:"",loginLoading:!1,bz:!1,list:[],asddd:function(){},dialogVisible:!1,checked:!0,taxPlays:this.oneValueToTwo.userList,clientId:Object(g["b"])(),redirectURI:Object(g["j"])(),secondStep:[],activeLoginType:"",scanList:"",visible:!1,agentListData:[],pageSize:"",pageNum:""}},watch:{oneValueToTwo:{handler:function(e){var t=this;e&&(e.secondStep.some((function(e){if("isActiveScan"==e.value)return t.scanList=e.scanList,!0})),this.secondStep=e.secondStep,this.activeLoginType=e.secondStep[0].value,this.activeLoginName=e.secondStep[0].name)},immediate:!0,deep:!0}},mounted:function(){},methods:{handle_return_:function(){this.$emit("handleAgentCompany")},closeFillForm:function(){location.reload()},tabChange:function(e){this.activeLoginType=e.value,this.activeLoginName=e.name,this.scanList=e.scanList?e.scanList:""},forgetBtn:function(){var e=this,t=!1,r=window.location.href.split("?")[1];r&&r.split("&").forEach((function(r){if("client_type=client"===r){var a=e.$router.resolve({path:"/forget",query:{client_id:e.clientId?e.clientId:"",client_type:"client",identity:"person"}});t=!0,window.open(a.href,"_blank")}})),t||(this.clientId?this.$router.push({path:"/forget",query:{client_id:this.clientId,identity:"person"}}):this.$router.push({path:"/forget",query:{identity:"person"}}))},handle_jump_before:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$refs.signedagreement.handle_jump_before(e,t,"/userCenter/baseInfoEE");case 1:case"end":return a.stop()}}),a)})))()},agentQuick:function(e){var t=this,r=this,a=e.uniqueIdentity,i=e.relatedType,n={client_id:r.clientId,redirect_uri:r.redirectURI,creditCode:a,uuid:r.lastUUid,relatedType:i};Object(ft["q"])(n).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(a){var i,n,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$refs.agentList.loadingDl=!1,t.$refs.agentList.$refs.IDTypeShoose.loginLoading=!1,1e3!==a.code){e.next=18;break}return e.next=5,Object(y["a"])(a.datagram.access_token);case 5:if(i=e.sent,n=i.userformInfo,o=i.pass,s=i.userInfo,!o){e.next=15;break}return r.loginLoading=!1,t.handle_jump_before(a,s),e.abrupt("return");case 15:return t.$refs.fillformDialog.fillForm=n,t.$refs.fillformDialog.fillFormVisible=!0,e.abrupt("return");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){t.$refs.agentList.loadingDl=!1,t.$refs.agentList.$refs.IDTypeShoose.loginLoading=!1,window.setTimeout((function(){r.loginLoading=!1}),100)}))},getResScan:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.datagram.access_token){r.next=9;break}return r.next=3,Object(y["a"])(e.datagram.access_token);case 3:return a=r.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,n?t.handle_jump_before(e,o):(t.$refs.fillformDialog.fillForm=i,t.$refs.fillformDialog.fillFormVisible=!0),r.abrupt("return",!1);case 9:t.lastUUid=e.datagram.uuid,t.agentListData=e.datagram.pageInfo,t.visible=!0,t.pageSize=e.datagram.pageInfo.pageSize,t.pageNum=e.datagram.pageInfo.pageNum,t.loginLoading=!1;case 15:case"end":return r.stop()}}),r)})))()},getRes:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.datagram.access_token){r.next=9;break}return r.next=3,Object(y["a"])(e.datagram.access_token);case 3:return a=r.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,n?t.handle_jump_before(e,o):(t.$refs.fillformDialog.fillForm=i,t.$refs.fillformDialog.fillFormVisible=!0),r.abrupt("return",!1);case 9:t.lastUUid=e.datagram.uuid,t.agentListData=e.datagram.pageInfo,t.visible=!0,t.pageSize=e.datagram.pageInfo.pageSize,t.pageNum=e.datagram.pageInfo.pageNum;case 14:case"end":return r.stop()}}),r)})))()}}},tr=er,rr=(r("6fdf"),Object($["a"])(tr,xt,Ct,!1,null,"ac5bd39c",null)),ar=rr.exports,ir=r("5d2d"),nr=r("af22"),or=(r("35e0"),r("7555")),sr=r("510c"),cr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"100%"}},[e.secondStep.scanList.length>1?r("div",{staticClass:"tabsCls"},[r("div",{staticClass:"justifyCenterEnd",staticStyle:{height:"100%","padding-bottom":"0.75rem"}},e._l(e.secondStep.scanList,(function(t){return r("div",{key:t.value,staticStyle:{position:"relative",padding:"0 23px"}},[r("span",{class:e.QR_tab==t.value?"activeCls":"normalCls",on:{click:function(r){return e.handle_QR_change(t.value)}}},[e._v(e._s(t.name))]),r("div",{class:e.QR_tab==t.value?"tabSelect":"tabUnSelect"})])})),0)]):e._e(),r("div",["0"==e.QR_tab?r("div",{staticStyle:{margin:"70px 105px 0 105px"}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[r("div",{staticClass:"sms"},[r("el-form-item",[r("el-row",[r("el-input",{staticClass:"mobileInp",staticStyle:{width:"100%"},attrs:{readonly:"",placeholder:"请输入手机号码"},model:{value:e.oneValueToTwo.mobile,callback:function(t){e.$set(e.oneValueToTwo,"mobile","string"===typeof t?t.trim():t)},expression:"oneValueToTwo.mobile"}})],1)],1),r("el-form-item",{attrs:{prop:"smscode"}},[r("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[r("el-input",{staticClass:"smsInp",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},model:{value:e.form.smscode,callback:function(t){e.$set(e.form,"smscode","string"===typeof t?t.trim():t)},expression:"form.smscode"}}),r("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1)],1),r("el-row",[r("el-col",[r("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1):e._e(),"1"==e.QR_tab?r("div",[r("p",{staticClass:"QR_1_text"},[e._v("请使用"+e._s(e.areaName)+"税务APP扫码进行人脸验证")]),r("div",{staticClass:"QR_"},[r("qrCode",{ref:"qrCode",attrs:{uuid:e.oneValueToTwo.uuid}})],1),r("div",{staticClass:"tip",domProps:{innerHTML:e._s(e.tips)}})]):"2"==e.QR_tab?r("div",[r("div",{staticClass:"QR_"},[r("div",{staticClass:"justifyCenter",staticStyle:{width:"13.1875rem",height:"12.75rem"}},[r("div",{staticStyle:{left:"0px",top:"0px",position:"absolute"},attrs:{id:"qrcodeDiv"}}),!0===e.expired?r("div",{staticClass:"cover",on:{click:e.refreshCode}},[r("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e()])]),r("div",{staticStyle:{"text-align":"center","align-items":"center","margin-top":"0.9375rem"}},[r("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}),e._v(" 我已阅读并同意 "),r("span",{staticStyle:{color:"#4285F4",cursor:"pointer"},on:{click:e.handle_show_agreement}},[e._v("《人脸识别服务协议》")])],1),r("div",{staticClass:"_tips"},[r("el-button",{staticStyle:{width:"100%",margin:"0.625rem 0"},attrs:{type:"primary",disabled:!e.checked,loading:e.loginLoading},on:{click:function(t){return e.CheckState(e.qrCode_id,"click")}}},[e._v("验证完成")]),r("p",[e._v("温馨提示:")]),r("p",[e._v("1.请使用微信扫描此二维码进行实名验证")]),r("p",[e._v("2.暂不支持外籍人士、港澳台同胞线上实名验证")])],1)]):e._e(),"3"==e.QR_tab?r("div",[r("p",{staticClass:"QR_1_text"},[e._v("请使用个人所得税APP扫码进行人脸验证")]),r("div",{staticClass:"QR_"},[r("qrCodeIts",{ref:"qrCodeIts",attrs:{uuid:e.oneValueToTwo.uuid,outTime:e.outTime}})],1)]):e._e()]),r("el-dialog",{attrs:{title:"协议签订",visible:e.dialogVisible,"show-close":!1,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{height:"9.375rem","overflow-y":"auto","margin-bottom":"0.625rem"},domProps:{innerHTML:e._s(t.agreementText)}})})),0):e._e(),e.list.length?r("div",e._l(e.list,(function(t){return r("div",{key:t.agreementText,staticStyle:{display:"inline-block","margin-right":"2.5rem"}},[r("el-checkbox",{model:{value:t.checked,callback:function(r){e.$set(t,"checked",r)},expression:"item.checked"}}),e._v(" 我已同意并阅读 "),r("span",{staticStyle:{color:"#4285F4"}},[e._v("《"+e._s(t.agreementName)+"》")])],1)})),0):e._e(),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.asddd}},[e._v("同 意")])],1)]),r("el-dialog",{attrs:{title:e.dialogTitle,"append-to-body":"",visible:e.dialogAgreement,"close-on-click-modal":!1,width:"776px"},on:{"update:visible":function(t){e.dialogAgreement=t}}},[r("div",{domProps:{innerHTML:e._s(e.serviceText)}}),r("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement=!1}}},[e._v("确 定")])],1)]),r("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),r("signedagreement",{ref:"signedagreement",on:{handleReturn:e.handle_return_,handleChangeFlag:e.handleChangeFlag}})],1)},lr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"1.875rem","line-height":"1.4375rem"}}),e._v("刷新")])}],ur=r("a78e"),dr=r.n(ur),mr=r("0b77"),fr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"justifyCenter"},[e.codeShow?a("img",{staticClass:"centerLogo",attrs:{src:r("7e9b")}}):e._e(),a("div",{attrs:{id:"qrcodeDivP"}}),!0===e.expired?a("div",{staticClass:"cover",on:{click:e.refreshCode}},[a("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e(),a("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}})],1)},gr=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])}],pr={name:"qrCode",components:{fillForm:Q["default"]},props:{uuid:String},data:function(){return{exit_variable:!0,expired:!1,qrcode:"",qrCode_id:"",codeShow:!1,timeout:null,interval:null,client_id:Object(g["b"])(),redirect_uri:Object(g["j"])()}},methods:{closeFillForm:function(){location.reload()},createQRcode:function(){var e=this;this.expired=!1,Object(k["e"])({uuid:this.uuid}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.CheckState(t.datagram.qrcode_id),e.setQRCodeTimeout()})).catch((function(t){window.clearTimeout(e.timeout),e.expired=!0}))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),e.expired=!0}),6e5)},showQRCode:function(e){var t=document.getElementById("qrcodeDivP");t.innerHTML="";var r=new QRCode(t,{text:e,width:211,height:204});r._el.title="",this.codeShow=!0},CheckState:function(e){var t=this;t.expired||(t.interval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={qrcode_id:e,client_id:t.client_id,redirect_uri:t.redirect_uri},Object(k["A"])(a).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1e3!==a.code||!a.datagram){r.next=16;break}if(2!=a.datagram.qrcode_status){r.next=13;break}return window.clearTimeout(t.interval),window.clearTimeout(t.timeout),r.next=6,Object(y["a"])(a.datagram.access_token);case 6:i=r.sent,i.userformInfo,i.pass,n=i.userInfo,t.$parent.handle_jump_before(a,n),r.next=14;break;case 13:1==a.datagram.qrcode_status?t.exit_variable&&t.CheckState(e):3==a.datagram.qrcode_status&&(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0);case 14:r.next=20;break;case 16:window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0,a.msg&&t.$message({customClass:"el-icon-warning-color",message:a.msg,type:"warning"});case 20:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(r){r&&r.stack&&r.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(t.interval),t.CheckState(e)):(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0)}));case 2:case"end":return r.stop()}}),r)}))),4e3))},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.createQRcode()},clearTimers:function(){clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},beforeDestroy:function(){this.exit_variable=!1,clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},hr=pr,vr=(r("dac8"),Object($["a"])(hr,fr,gr,!1,null,"4dc44f42",null)),br=vr.exports,wr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"justifyCenter"},[r("img",{attrs:{id:"qrcodeDivP"}}),!0===e.expired?r("div",{staticClass:"cover",on:{click:e.refreshCode}},[r("span",{staticClass:"smSuccess"},[e._v(" 二维码已失效！")]),e._m(0)]):e._e(),r("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}})],1)},_r=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v("请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"30px","line-height":"23px"}}),e._v("刷新")])}],yr={name:"qrCode",components:{fillForm:Q["default"]},props:{uuid:String,outTime:Boolean},data:function(){return{exit_variable:!0,expired:!1,qrcode:"",qrCode_id:"",codeShow:!1,timeout:null,interval:null,client_id:Object(g["b"])(),redirect_uri:Object(g["j"])()}},methods:{closeFillForm:function(){location.reload()},createQRcode:function(){var e=this;this.expired=!1,Object(k["c"])({uuid:this.uuid}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.CheckState(t.datagram.qrcode_id),e.setQRCodeTimeout(),e.outTime&&(window.clearTimeout(e.timeout),e.expired=!0)})).catch((function(t){window.clearTimeout(e.timeout),e.expired=!0}))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),e.expired=!0}),6e5)},showQRCode:function(e){var t=document.getElementById("qrcodeDivP");t.src="data:image/jpg;base64,"+e,this.codeShow=!0},CheckState:function(e){var t=this;t.expired||(t.interval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={qrcode_id:e,client_id:t.client_id,redirect_uri:t.redirect_uri},Object(k["y"])(a).then(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1e3!==a.code||!a.datagram){r.next=16;break}if(2!=a.datagram.qrcode_status){r.next=13;break}return window.clearTimeout(t.interval),window.clearTimeout(t.timeout),r.next=6,Object(y["a"])(a.datagram.access_token);case 6:i=r.sent,i.userformInfo,i.pass,n=i.userInfo,t.$parent.handle_jump_before(a,n),r.next=14;break;case 13:1==a.datagram.qrcode_status?t.exit_variable&&t.CheckState(e):3==a.datagram.qrcode_status&&(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0);case 14:r.next=20;break;case 16:window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0,a.msg&&t.$message({customClass:"el-icon-warning-color",message:a.msg,type:"warning"});case 20:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(r){r&&r.stack&&r.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(t.interval),t.CheckState(e)):(window.clearTimeout(t.interval),window.clearTimeout(t.timeout),t.expired=!0)}));case 2:case"end":return r.stop()}}),r)}))),4e3))},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.createQRcode()},clearTimers:function(){clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},beforeDestroy:function(){this.exit_variable=!1,clearInterval(this.timeout),clearInterval(this.interval),this.timeout=null,this.interval=null}},xr=yr,Cr=(r("4570"),Object($["a"])(xr,wr,_r,!1,null,"45a089c3",null)),Tr=Cr.exports,kr={name:"loginTwiceP",components:{qrCode:br,qrCodeIts:Tr,fillForm:Q["default"],signedagreement:U["default"]},props:{oneValueToTwo:{type:Object,default:function(){return{}}}},data:function(){return{outTime:!1,tips:"",tipsP:"",checked:!0,list:[],bz:!1,form:{smscode:""},dialogVisible:!1,asddd:function(){},validate_status:!1,cliState:Object(g["l"])(),clientId:Object(g["b"])(),loginLoading:!1,rules:{smscode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}]},buttonName:"获取验证码",getCodeDisabled:!1,time:119,interval:"",expired:!0,qrcode:"",qrCode_id:"",qrTimeout:null,qrInterval:null,agreementName:"",dialogAgreement:!1,agreementText:"",QR_tab:null,faceAgreement:{},dialogTitle:"",serviceText:"",showChangeBtn:!1,areaName:"",secondStep:{scanList:[]}}},watch:{time:{handler:function(e){e<0&&(this.buttonName="重新发送",this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0},oneValueToTwo:{handler:function(e){var t=this;if(e){var r=e.secondStep;r.scanList.length>0&&(this.showChangeBtn=!0),r.scanList.length>0&&(this.QR_tab=r.scanList[0].value,this.$nextTick((function(){t.handle_QR_change(t.QR_tab)}))),this.secondStep=r,this.secondStep.scanList.forEach((function(e,r){"1"==e.value?t.tips=e.tips:"3"==e.value&&(t.tipsP=e.tips)}))}},immediate:!0,deep:!0}},beforeDestroy:function(){clearInterval(this.interval),clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.interval=null,this.qrTimeout=null,this.qrInterval=null},created:function(){var e=this.$store.state.settings.logConfig;if(e){var t,r=null===(t=this.$store.state.settings.logConfig)||void 0===t?void 0:t.areaInfoData,a=r[0].areaPrefix;this.areaName=r[0].areaName,"3100"===a&&this.getNewestAgreement()}},methods:{handle_return_:function(){this.$emit("naturalPersonReturn")},closeFillForm:function(){location.reload()},getValidCode:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,!r.getCodeDisabled){t.next=4;break}return e.$message.warning("请勿重复发送验证码！"),t.abrupt("return");case 4:a={uuid:r.oneValueToTwo.uuid},r.getCodeDisabled=!0,r.time=119,r.buttonName="120s",r.interval=window.setInterval((function(){r.buttonName=r.time+"s",--r.time}),1e3),Object(k["u"])(a).then((function(t){if(1e3===t.code){var a=e;a.smscode_id=t.datagram.smscode_id,e.$message.success("短信验证码成功发送到"+t.datagram.mobile)}else clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"}));case 10:case"end":return t.stop()}}),t)})))()},handleChangeFlag:function(){this.showUpdatePwd=!0},handle_jump_before:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$refs.signedagreement.handle_jump_before(e,t,"/userCenter/baseInfoP");case 1:case"end":return a.stop()}}),a)})))()},login:function(){var e=this,t=this;t.loginLoading||t.$refs.form.validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(a){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a){r.next=10;break}if(localStorage.removeItem("token"),e.$cookie.remove("token"),localStorage.setItem("clientId",t.clientId),t.smscode_id){r.next=7;break}return t.$message.warning("请先获取验证码!"),r.abrupt("return");case 7:t.loginLoading=!0,i={client_id:t.clientId,redirect_uri:t.oneValueToTwo.redirectURI,smscode_id:t.smscode_id,smscode:t.form.smscode,uuid:t.oneValueToTwo.uuid},Object(k["v"])(i).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1e3!==r.code){t.next=16;break}return setTimeout((function(){e.loginLoading=!1}),8e3),t.next=4,Object(y["a"])(r.datagram.access_token);case 4:if(a=t.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){t.next=13;break}return e.handle_jump_before(r,o),t.abrupt("return");case 13:return e.$refs.fillformDialog.fillForm=i,e.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){window.setTimeout((function(){t.loginLoading=!1}),100)}));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},handle_QR_change:function(e){var t=this;this.QR_tab=e,0==e||(2==e?this.createQRcode():(clearInterval(this.qrTimeout),clearInterval(this.qrInterval),window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.qrTimeout=null,this.qrInterval=null,1==e?this.$nextTick((function(){t.$refs.qrCode.createQRcode()})):(this.$nextTick((function(){t.$refs.qrCodeIts.createQRcode()})),this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].itsScan&&Object(z["a"])()?(this.outTime=!0,this.$message.error("个人所得税APP扫脸服务时间为5:00-23:00")):this.outTime=!1)))},refreshCode:function(){window.clearTimeout(this.qrTimeout),window.clearTimeout(this.qrInterval),this.expired=!1,this.createQRcode()},handle_show_agreement:function(){this.serviceText?this.dialogAgreement=!0:this.$message({customClass:"el-icon-warning-color",message:"暂无协议内容",type:"warning"})},createQRcode:function(){var e=this;this.expired=!1,Object(k["d"])({uuid:this.oneValueToTwo.uuid}).then((function(t){e.qrcode=t.datagram.qrcode,e.qrCode_id=t.datagram.qrcode_id,e.showQRCode(t.datagram.qrcode),e.setQRCodeTimeout()})).catch((function(t){window.clearTimeout(e.qrTimeout),e.expired=!0}))},showQRCode:function(e){var t=document.getElementById("qrcodeDiv");t.innerHTML="";var r=new QRCode(t,{text:e,width:211,height:204});r._el.title=""},CheckState:function(e,t){var r=this;"click"===t&&(this.loginLoading=!0);var a=this;a.expired||(a.qrInterval=window.setTimeout(Object(o["a"])(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i={qrcode_id:e,client_id:a.clientId,redirect_uri:a.oneValueToTwo.redirectURI,uuid:a.oneValueToTwo.uuid},Object(k["z"])(i).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(i){var n,o,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r.loginLoading=!1,1e3!==i.code||!i.datagram){t.next=24;break}if(2!=i.datagram.qrcode_status){t.next=21;break}return window.clearTimeout(a.qrInterval),window.clearTimeout(a.qrTimeout),t.next=7,Object(y["a"])(i.datagram.access_token);case 7:if(n=t.sent,o=n.userformInfo,s=n.pass,c=n.userInfo,!s){t.next=16;break}return a.handle_jump_before(i,c),t.abrupt("return");case 16:return a.$refs.fillformDialog.fillForm=o,a.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 19:t.next=22;break;case 21:1==i.datagram.qrcode_status?(window.clearTimeout(a.qrInterval),a.CheckState(e)):3==i.datagram.qrcode_status&&(window.clearTimeout(a.qrInterval),window.clearTimeout(a.qrTimeout),a.expired=!0);case 22:t.next=29;break;case 24:r.loginLoading=!1,window.clearTimeout(a.qrInterval),window.clearTimeout(a.qrTimeout),a.expired=!0,i.msg&&a.$message({customClass:"el-icon-warning-color",message:i.msg,type:"warning"});case 29:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){r.loginLoading=!1,t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(a.qrInterval),a.CheckState(e)):(window.clearTimeout(a.qrInterval),window.clearTimeout(a.qrTimeout),a.expired=!0)}));case 2:case"end":return t.stop()}}),t)}))),4e3))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.qrTimeout),e.qrTimeout=window.setTimeout((function(){window.clearTimeout(e.qrTimeout),e.expired=!0}),6e5)},getNewestAgreement:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(_["d"])({}).then((function(t){if(t&&t.datagram.length>0){var r,a=Object(b["a"])(t.datagram);try{var i=function(){var t=r.value;"03"===t.agreementCode&&Object(_["a"])({agreementCode:t.agreementCode,agreementVersion:t.agreementVersion}).then((function(r){e.dialogTitle=t.agreementName,e.serviceText=r.datagram.agreementText}))};for(a.s();!(r=a.n()).done;)i()}catch(n){a.e(n)}finally{a.f()}}}));case 1:case"end":return t.stop()}}),t)})))()}},mounted:function(){dr.a.remove("X-NATURE-IP"),dr.a.set("X-NATURE-IP",Object(mr["f"])(32,32),{expires:100})}},Sr=kr,Rr=(r("17af"),Object($["a"])(Sr,cr,lr,!1,null,"df8bab66",null)),$r=Rr.exports,Ir=r("f735"),jr=r("54ee"),Or=(r("4e48"),r("431e")),qr={name:"Login",mixins:[Or["a"]],components:{enterpriseBusiness:u["default"],personBusiness:d["default"],agentBusiness:m["default"],SpecialMainLogin:f["default"],scanQRCodes:l["default"],Footer:c["a"],normalTwiceE:Y,specialTwiceE:tt,certificateTwiceE:Ae,normalTwiceA:yt,certificateTwiceA:ar,loginTwiceP:$r,noNeedLogin:s["default"],questionaire:Ir["default"],ChannelSelected:jr["a"]},data:function(){return{sessionStorage:sessionStorage,clientTabList:[],tabListData:["enterpriseBusiness","personalBusiness","agentBusinessTab"],tabWidth:8,showQrAdd:!0,enterpriseTitle:"企业业务",personalTitle:"自然人业务",no_nm_client:!0,provinceNameShow:!1,provinceName:"",loading:!0,roleName:"enterpriseBusiness",activeLoginType:"",loginType:"saoma",clientId:Object(g["b"])(),redirectURI:Object(g["j"])(),code:Object(g["c"])(),cliState:Object(g["l"])(),isScanCode:!0,isStepTwo:!1,isSpexcialLogin:!1,secondTabLogin:"",oneValueToTwo:"",idSel:"0",isYCLogin:!0,isSpecial:!1,creditCodePwd:"",isLogConfig:!1,client_type:"",newBgLeft:0,nonRensidentEnterpriseTabList:[{name:"非居民登录",value:"isNonResidentLogin",isStepTwo:"0",firstStep:[{value:"0",name:"密码验证"}]}],nonRensidentPersonTabList:[{firstStep:[{isStepTwo:"0",name:"非居民登录",value:"isActiveNonResident"}],name:"非居民登录",value:"2"}]}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isddLogin();case 1:case"end":return t.stop()}}),t)})))()},computed:{showLanguage:function(){return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].showChangeLang&&(!this.showDppt||this.showDppt&&this.$store.state.settings.logConfig.dpptData[0].showLang)},showDppt:function(){return this.clientId&&this.clientId===(this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.dpptData&&this.$store.state.settings.logConfig.dpptData[0].clientId)},dpptTitle:function(){try{return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.dpptData&&this.$store.state.settings.logConfig.dpptData[0].titleName}catch(e){return!1}},showFunction:function(){try{return this.$store.state.settings.logConfig.oldLoginPage&&this.$store.state.settings.logConfig.oldLoginPage.length>0&&!this.showDppt}catch(e){return!1}}},watch:{isStepTwo:function(e){var t=this;this.$nextTick((function(){if(e&&0==t.no_nm_client){var r=document.querySelector(".formDivCls");r.style["bottom"]="auto",r.style["right"]="auto";var a="http://127.0.0.1:18604";if(t.redirectURI&&(a=-1==t.findIndex(t.redirectURI,"/","2")?t.redirectURI:t.redirectURI.substring(0,t.findIndex(t.redirectURI,"/","2"))),"isActiveTaxC"==t.activeLoginType){var i=new Image;i.src=a+"?form_height=670&form_width=787&newGet="+Math.floor(1e5*Math.random())}else{i=new Image;i.src=a+"?form_height=556&form_width=674&newGet="+Math.floor(1e5*Math.random())}}else e||0!=t.no_nm_client||t.client_init();e||("en_US"===sessionStorage.getItem("lang")?(t.personalTitle=t.$i18n.t("language_variable2"),t.enterpriseTitle=t.$i18n.t("language_variable1")):(t.personalTitle="自然人业务",t.enterpriseTitle="企业业务"))}))}},mounted:function(){var e=this;this.client_init(),"en_US"===sessionStorage.getItem("lang")?this.en_US_init():(this.enterpriseTitle="企业业务",this.personalTitle="自然人业务");this.$cookie.get("token");this.idSel=localStorage.getItem("idSel"),p["a"].$off("toStepTwo"),p["a"].$on("toStepTwo",(function(t,r,a){e.oneValueToTwo=r,e.creditCodePwd=a||"",("1"===t||2==t||"3"===t)&&e.$nextTick((function(){e.isStepTwo=!0,e.secondTabLogin=t}))}))},methods:{toNewLogin:function(){var e=window.location.href;e=e.replace("/#/login","/#/loginNew"),window.location.href=e},getBgImg:function(){return r("68c4")},en_US_init:function(){this.enterpriseTitle=this.$i18n.t("language_variable1"),this.personalTitle=this.$i18n.t("language_variable2"),this.showQrAdd=!1,document.querySelector(".login_box").style["width"]="570px",document.querySelector(".login_box").style["height"]="445px",document.querySelector(".password_ddd").style["width"]="100%",this.clientTabList=[{name:"企业非居民",value:"enterpriseBusiness"},{name:"自然人业务",value:"personalBusiness"}],this.computerTab()},client_init:function(){var e=this,t=window.location.href.split("?")[1];t&&t.split("&").forEach((function(t){if("client_type=client"===t){if(e.no_nm_client=!1,e.showQrAdd){var r=new Image,a="http://127.0.0.1:18604";e.redirectURI&&(a=-1==e.findIndex(e.redirectURI,"/","2")?e.redirectURI:e.redirectURI.substring(0,e.findIndex(e.redirectURI,"/","2"))),r.src=a+"?form_height=571&form_width=852&newGet="+Math.floor(1e5*Math.random())}var i=document.querySelector(".loginCls"),n=document.querySelector(".loginCls .headerCls"),o=document.querySelector(".loginCls .footer"),s=document.querySelector(".mainCls"),c=document.querySelector(".mainCls .container"),l=document.querySelector(".mainCls .container .bgImgL"),u=document.querySelector(".mainCls .container .login_box");i.style["min-width"]="auto",s.style["min-width"]="auto",c.style["min-width"]="auto",c.style["min-height"]="auto",l.style["min-width"]="auto",l.style["display"]="none",o.style["display"]="none",n.style["display"]="none",u.style["bottom"]="auto",u.style["right"]="auto"}else"client_type=np"===t&&(e.client_type="np")}))},changeEnterpriseTitle:function(e){this.enterpriseTitle=e},changePersonalTitle:function(e){this.personalTitle=e},isddLogin:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.$cookie.get("token"),a=Object(g["b"])(),r?(e.isYCLogin=!1,Object(or["x"])({client_id:a,redirect_uri:e.redirectURI}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1e3!==r.code){t.next=10;break}return localStorage.setItem("code",r.datagram.code),t.next=4,Object(y["c"])(e.$cookie.get("token"));case 4:return t.next=6,Object(y["b"])();case 6:a=t.sent,a?(i=a.indexOf("?")>=0?"&code=":"?code=",window.location.href=a+i+r.datagram.code+(e.cliState?"&state="+e.cliState:"")):e.redirectURI?(n=e.redirectURI.indexOf("?")>=0?"&code=":"?code=",window.location.href=e.redirectURI+n+r.datagram.code+(e.cliState?"&state="+e.cliState:"")):e.noRedirectUrl(),t.next=12;break;case 10:e.isYCLogin=!0,e.initLogin();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e.isYCLogin=!0,e.initLogin()}))):(e.isYCLogin=!0,e.initLogin());case 3:case"end":return t.stop()}}),t)})))()},noRedirectUrl:function(){Object(ir["a"])(),this.isYCLogin=!0,this.initLogin()},initLogin:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return localStorage.removeItem("clientId"),localStorage.removeItem("token"),e.$cookie.remove("token"),t.next=5,Object(F["a"])(1);case 5:return r=e.getParamsUrl(window.location.href).accessType||"",a=e.clientId||localStorage.getItem("clientId")||"",e.clientId&&localStorage.setItem("clientId",e.clientId),"visitor"===r&&(e.redirectURI?window.location.href=e.redirectURI:e.$router.replace({path:"/login",query:{client_id:a}})),t.prev=9,t.next=12,Object(or["h"])();case 12:i=t.sent,n=i.datagram,"en_US"===sessionStorage.getItem("lang")?(n.enterpriseTabList=e.nonRensidentEnterpriseTabList,n.personTabList=e.nonRensidentPersonTabList,e.$store.dispatch("settings/changeSetting",{key:"logConfig",value:n})):e.$store.dispatch("settings/changeSetting",{key:"logConfig",value:i.datagram}),localStorage.setItem("areaPrefix",i.datagram.areaInfoData[0].areaPrefix),e.provinceNameShow=!0,e.provinceName=e.$i18n.t("language_variable27")+("en_US"===sessionStorage.getItem("lang")?"":i.datagram.areaInfoData[0].areaPreName+"电子税务局"),document.title=e.$i18n.t("language_variable27")+("en_US"===sessionStorage.getItem("lang")?"":i.datagram.areaInfoData[0].areaPreName+"电子税务局"),e.isLogConfig=!0,t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](9),e.getprovinceName();case 25:if(t.prev=25,e.clientId){t.next=31;break}if(!e.$store.state.settings.logConfig.baseLoginPage||!e.$store.state.settings.logConfig.baseLoginPage.length){t.next=31;break}return window.location.href=e.$store.state.settings.logConfig.baseLoginPage[0].name,t.abrupt("return");case 31:e.$store.state.settings.logConfig.loginFirstType&&e.$store.state.settings.logConfig.loginFirstType.length&&("1"==e.$store.state.settings.logConfig.loginFirstType[0].value?(e.isSpecial=!1,e.isScanCode=!0,e.isSpexcialLogin=!1,e.isStepTwo=!1):(e.isScanCode=!1,e.isSpexcialLogin=!1,e.isStepTwo=!1)),t.next=39;break;case 34:t.prev=34,t.t1=t["catch"](25),e.isScanCode=!1,e.isSpexcialLogin=!1,e.isStepTwo=!1;case 39:o=window.location.href.split("?")[1],o&&o.split("&").forEach((function(t){if("client_type=client"===t){var r,a;if(!(null===(r=e.$store.state.settings.logConfig)||void 0===r?void 0:r.scanCodeTabListClient)){e.showQrAdd=!1,document.querySelector(".login_box").style["width"]="482px";var i=new Image,n="http://127.0.0.1:18604";e.redirectURI&&(n=-1==e.findIndex(e.redirectURI,"/","2")?e.redirectURI:e.redirectURI.substring(0,e.findIndex(e.redirectURI,"/","2"))),i.src=n+"?form_height=571&form_width=482&newGet="+Math.floor(1e5*Math.random())}e.clientTabList=null===(a=e.$store.state.settings.logConfig)||void 0===a?void 0:a.clientTabList}else if("client_type=np"===t){var o,s;(null===(o=e.$store.state.settings.logConfig)||void 0===o?void 0:o.scanCodeTabListNp)||(e.showQrAdd=!1,document.querySelector(".login_box").style["width"]="482px"),e.clientTabList=null===(s=e.$store.state.settings.logConfig)||void 0===s?void 0:s.npTabList}"client_type=client"!==t&&"client_type=np"!==t||e.computerTab()}));case 41:case"end":return t.stop()}}),t,null,[[9,22],[25,34]])})))()},computerTab:function(){if(this.clientTabList&&this.clientTabList.length){this.tabListData=[],this.roleName=this.clientTabList[0].value,this.tabWidth=24/this.clientTabList.length;for(var e=0;e<this.clientTabList.length;e++)this.tabListData.push(this.clientTabList[e].value)}},findIndex:function(e,t,r){for(var a=e.indexOf(t),i=0;i<r;i++)a=e.indexOf(t,a+1);return a},handle_natural_person:function(){var e=this;this.$nextTick((function(){e.isStepTwo=!1,e.isScanCode=!1,e.isLogConfig=!0,e.isSpecial=!1,e.roleName="personalBusiness"}))},handle_enterprise_certificate:function(){var e=this;this.$nextTick((function(){e.backToFirst()}))},handle_agent_company:function(){var e=this;this.$nextTick((function(){e.isStepTwo=!1,e.isScanCode=!1,e.isLogConfig=!0,e.isSpecial=!1,e.roleName="agentBusinessTab"}))},modifUuid:function(e){this.oneValueToTwo=Object(n["a"])(Object(n["a"])({},this.oneValueToTwo),{},{agentListPage_uuid:e})},getprovinceName:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(sr["a"])({}).then((function(t){localStorage.setItem("areaName",t.datagram.areaName),e.provinceNameShow=!0,e.provinceName=e.$i18n.t("language_variable27")+("en_US"===sessionStorage.getItem("lang")?"":t.datagram.areaPreName+"电子税务局")}));case 2:case"end":return t.stop()}}),t)})))()},backToDJ:function(){this.showDppt&&this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.dpptData&&this.$store.state.settings.logConfig.dpptData[0].dpptUrl?window.location.href=this.$store.state.settings.logConfig.dpptData[0].dpptUrl:this.redirect()},openQuestionaire:function(){this.$refs.questionaireform.dialogVisible=!0},toOld:function(){window.location.href=this.$store.state.settings.logConfig.oldLoginPage[0].pageUrl},toElesLink:function(){window.location.href=this.$store.state.settings.logConfig.elseLink[0].linkUrl},redirect:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e,e.$cookie.get("token"),setTimeout(Object(o["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.clientId||localStorage.getItem("clientId")||"",Object(ir["a"])(),!a){t.next=9;break}return t.next=5,Object(nr["e"])({applicationId:a});case 5:i=t.sent,e.goToRedirectURL(i),t.next=10;break;case 9:r.redirectURI?window.location.href=r.redirectURI:r.$router.replace({path:"/login",query:{client_id:a}});case 10:case"end":return t.stop()}}),t)}))),1e3);case 3:case"end":return t.stop()}}),t)})))()},enterpriseBusinessTab:function(){var e=this;"en_US"===sessionStorage.getItem("lang")?this.personalTitle=this.$i18n.t("language_variable2"):this.personalTitle="自然人业务",this.$nextTick((function(){e.roleName="enterpriseBusiness"}))},personalBusinessTab:function(){var e=this;"en_US"===sessionStorage.getItem("lang")?this.enterpriseTitle=this.$i18n.t("language_variable1"):this.enterpriseTitle="企业业务",this.$nextTick((function(){e.isSpecial=!1,e.roleName="personalBusiness"}))},agentBusinessTab:function(){var e=this;this.enterpriseTitle="企业业务",this.personalTitle="自然人业务",this.$nextTick((function(){e.isSpecial=!1,e.roleName="agentBusinessTab"}))},backToFirst:function(){this.isSpexcialLogin=!1,this.isScanCode=!1,this.isStepTwo=!1,this.roleName="enterpriseBusiness"},toCompLogin:function(){this.isSpexcialLogin=!1,this.isScanCode=!1,this.isStepTwo=!1,this.roleName="enterpriseBusiness"},toStepTwo:function(){this.isSpecial=!1,this.isStepTwo=!0},normalLogin:function(e){this.isSpecial=!1,this.activeLoginType=e},quickLogin:function(e){this.isSpecial=!1,this.activeLoginType=e},toSpecialLogin:function(e){this.isSpecial=!0,this.activeLoginType=e},taxCLogin:function(e){this.isSpecial=!1,this.activeLoginType=e},getType:function(e){this.loginType=e},getParamsUrl:function(e){for(var t=e.indexOf("?")+1,r=e.substr(t),a=r.split("&"),i={},n=0;n<a.length;n++){var o=a[n].split("="),s=o[0],c=o[1];i[s]=c}return i}},beforeDestroy:function(){p["a"].$off("toStepTwo")}},Lr=qr,Ar=(r("2017"),r("7b79"),Object($["a"])(Lr,a,i,!1,null,"303e74f4",null));t["default"]=Ar.exports},a023:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"密码修改",visible:e.updatePwdDialogVisble,"show-close":!1,"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"580px"},on:{"update:visible":function(t){e.updatePwdDialogVisble=t}}},[a("el-form",{ref:"pwdForm",attrs:{model:e.pwdForm,rules:e.pwdRules,"label-position":"right","label-width":"120px"}},[a("el-form-item",{staticStyle:{position:"relative"},attrs:{label:"新密码",prop:"newPassword"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLock,expression:"showCapsLock"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-row",{staticClass:"password-row",attrs:{type:"flex"}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:e.eyesFlag?"text":"password",maxlength:"16",placeholder:"请设置密码"},on:{blur:e.blurout,input:function(t){return e.showIcon("new")},focus:function(t){e.isshow=!0}},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.pwdForm.newPassword,callback:function(t){e.$set(e.pwdForm,"newPassword","string"===typeof t?t.trim():t)},expression:"pwdForm.newPassword"}},[e.eyesFlag?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"})])],1)],1)],1),e.isshow?[a("p",{staticClass:"form-tips"},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.isshowtwo,expression:"!isshowtwo"}],staticClass:"el-icon-warning",staticStyle:{color:"#5cb6ff"}}),a("i",{directives:[{name:"show",rawName:"v-show",value:e.isshowtwo,expression:"isshowtwo"}],staticClass:"el-icon-success",staticStyle:{color:"#00eb77"}}),a("span",[e._v(" 长度为8-16个字符")])]),a("p",{staticClass:"form-tips",staticStyle:{width:"370px",display:"flex"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!e.isshowthree,expression:"!isshowthree"}],staticClass:"el-icon-warning",staticStyle:{color:"#5cb6ff","margin-right":"4px","margin-top":"2px"}}),a("i",{directives:[{name:"show",rawName:"v-show",value:e.isshowthree,expression:"isshowthree"}],staticClass:"el-icon-success",staticStyle:{color:"#00eb77","margin-right":"4px","margin-top":"2px"}}),a("span",{staticStyle:{"line-height":"16px"}},[e._v(" 必须包含数字、字母（区分大小写）、特殊字符（包括 . @ $ %"),a("br"),e._v("* # _ + - ~ & ^ ）三者中至少两种")])])]:e._e(),a("el-form-item",{staticStyle:{position:"relative"},attrs:{label:"确认新密码",prop:"sureNewPassword"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLockNew,expression:"showCapsLockNew"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-row",{staticClass:"password-row",attrs:{type:"flex"}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:e.eyesFlagNew?"text":"password",maxlength:"16",placeholder:"请确认密码"},on:{blur:e.capsBlurMixinsNew,input:function(t){return e.showIcon("confirm")}},nativeOn:{keyup:function(t){return e.checkCapslockNew(t)}},model:{value:e.pwdForm.sureNewPassword,callback:function(t){e.$set(e.pwdForm,"sureNewPassword","string"===typeof t?t.trim():t)},expression:"pwdForm.sureNewPassword"}},[e.eyesFlagNew?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlagNew=!e.eyesFlagNew}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlagNew=!e.eyesFlagNew}},slot:"suffix"})])],1)],1)],1)],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.btnLoading,disabled:e.btnLoading},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},i=[],n=(r("96cf"),r("1da1")),o=r("1115"),s=(r("5d2d"),r("0177")),c=r("17dc"),l={mixins:[c["a"]],name:"",data:function(){var e=this,t=function(t,r,a){var i=/^(((?=.*[0-9])(?=.*[a-zA-Z])|(?=.*[0-9])(?=.*[^\s0-9a-zA-Z])|(?=.*[a-zA-Z])(?=.*[^\s0-9a-zA-Z]))[^\s]+)\S{7,15}$/,n=/[\u4E00-\u9FA5]/,o=r;o.length>=8?e.isshowtwo=!0:e.isshowtwo=!1,i.test(r)&&!n.test(r)?e.isshowthree=!0:e.isshowthree=!1,e.isshow||(e.isshowtwo||a(new Error("密码不符合规则")),e.isshowthree||a(new Error("密码不符合规则"))),a()},r=function(t,r,a){r!==e.pwdForm.newPassword&&a(new Error("两次填写的密码不一致，请重新填写")),a()};return{eyesFlag:!1,eyesFlagNew:!1,updatePwdDialogVisble:!1,isshow:!1,isshowone:!1,isshowtwo:!1,isshowthree:!1,btnLoading:!1,tuominShow:{isOldPasswordShow:!1,isNewPasswordShow:!1,isConfirmPasswordShow:!1,oldPasswordType:"password",newPasswordType:"password",confirmPasswordType:"password"},pwdForm:{oldPassword:"",newPassword:"",sureNewPassword:"",uid:"",fid:"",relatedType:""},pwdRules:{newPassword:[{required:!0,min:8,max:16,trigger:["blur","change"],validator:t}],sureNewPassword:[{required:!0,validator:r,trigger:"blur"}]}}},props:{showUpdatePwd:{type:Boolean,default:!1},oldPwd:{type:String,default:""}},watch:{showUpdatePwd:function(e){this.updatePwdDialogVisble=e},oldPwd:function(e){this.pwdForm.oldPassword=e}},mounted:function(){var e=this;this.$nextTick((function(){e.updatePwdDialogVisble=e.showUpdatePwd,e.pwdForm.oldPassword=e.oldPwd}))},methods:{submit:function(){this.pwdConfirm()},pwdConfirm:function(){var e=this;this.$refs.pwdForm.validate((function(t){if(t)if(e.btnLoading=!0,e.pwdForm.newPassword==e.pwdForm.sureNewPassword){if(localStorage.getItem("userinfo")){var r=JSON.parse(Object(o["a"])(localStorage.getItem("userinfo"))),a={password:e.pwdForm.newPassword,uid:r.user_id};Object(s["b"])(a).then(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:1e3===r.code?(e.$message.success("新个人用户密码设置成功!"),setTimeout((function(){e.btnLoading=!1,e.$emit("xiugaimima")}),3e3)):e.btnLoading=!1;case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e.btnLoading=!1}))}}else e.btnLoading=!1,e.$message.warning("两次输入的密码不一致！")}))},pwdReset:function(){this.pwdForm.oldPassword="",this.pwdForm.newPassword="",this.pwdForm.sureNewPassword="",this.isshowtwo=!1,this.isshowthree=!1,this.$refs.pwdForm.resetFields()},blurout:function(){this.showCapsLock=!1,this.isshow=!1,this.isshowtwo?this.isshowthree||new Error("必须包含数字、字母（区分大小写）、特殊字符（包括 . @ $ % * # _ + - ~ & ^ ）三者中至少两种"):new Error("字符长度为8-26")},showText:function(e){"old"===e?this.$set(this.tuominShow,"oldPasswordType","text"):"new"===e?this.$set(this.tuominShow,"newPasswordType","text"):"confirm"===e&&this.$set(this.tuominShow,"confirmPasswordType","text")},hideText:function(e){"old"===e?this.$set(this.tuominShow,"oldPasswordType","password"):"new"===e?this.$set(this.tuominShow,"newPasswordType","password"):"confirm"===e&&this.$set(this.tuominShow,"confirmPasswordType","password")},showIcon:function(e){"old"===e?this.$set(this.tuominShow,"isOldPasswordShow",!0):"new"===e?this.$set(this.tuominShow,"isNewPasswordShow",!0):"confirm"===e&&this.$set(this.tuominShow,"isConfirmPasswordShow",!0)}}},u=l,d=(r("ba64"),r("2877")),m=Object(d["a"])(u,a,i,!1,null,"059edcc8",null);t["default"]=m.exports},a51e:function(e,t,r){},a994:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{style:{height:"346px"}},[r("div",["isActiveQuick"==e.activeLoginType||"isActiveQuick1"==e.activeLoginType?r("quickLogin",{attrs:{logConfig:e.logConfig},on:{closePwdDialog:e.closePwdDialog}}):e._e(),"isActiveTaxC"==e.activeLoginType?r("taxCertificateLogin",{attrs:{logConfig:e.logConfig}}):e._e(),"isSpecialLogin"==e.activeLoginType?r("special-main-login",{attrs:{logConfig:e.logConfig}}):e._e(),"isNonResidentLogin"==e.activeLoginType?r("non-resident-login",{attrs:{logConfig:e.logConfig}}):e._e()],1),"isActiveTaxC"!=e.activeLoginType?r("div",{staticClass:"bottom"},["en_US"!==e.sessionStorage.getItem("lang")?r("span",{staticClass:"forget",attrs:{type:"text"},on:{click:e.findPhone}},[e._v("找回手机号码")]):e._e(),"en_US"!==e.sessionStorage.getItem("lang")?r("span",{staticClass:"forget",attrs:{type:"text"},on:{click:e.forgetBtn}},[e._v("忘记密码")]):e._e()]):e._e(),"isActiveTaxC"==e.activeLoginType&&"en_US"!==e.sessionStorage.getItem("lang")?r("div",{staticClass:"bottom"},[r("span",{staticClass:"forget",attrs:{type:"text"},on:{click:e.findPhone}},[e._v("找回手机号码")])]):e._e()]),e.enterpriseTabList.length>1?r("el-divider",[e._v("其他登录")]):e._e(),e.enterpriseTabList.length>1?r("div",{staticClass:"card"},e._l(e.enterpriseTabList,(function(t){return r("div",{directives:[{name:"show",rawName:"v-show",value:t.value!=e.activeLoginType,expression:"item.value != activeLoginType"}],key:t.name,staticClass:"elseLogin",on:{click:function(r){return e.tabChange(t.value,t)}}},[r("loginsvg",{attrs:{type:t.name}}),e._v(e._s(t.name)+" ")],1)})),0):e._e()],1)},i=[],n=(r("4de4"),r("4160"),r("b0c0"),r("ac1f"),r("1276"),r("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{prop:"creditCode"}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-autocomplete",{staticClass:"creditCode",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:"统一社会信用代码/纳税人识别号"},model:{value:e.form.creditCode,callback:function(t){e.$set(e.form,"creditCode","string"===typeof t?t.trim():t)},expression:"form.creditCode"}})],1)],1),a("el-form-item",{attrs:{prop:"account"}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-input",{staticClass:"mobileInp",staticStyle:{width:"100%"},attrs:{placeholder:"居民身份证号码/手机号码/用户名"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account","string"===typeof t?t.trim():t)},expression:"form.account"}})],1)],1),e.logConfig.firstStep.length>1?a("div",{staticClass:"justifyCenter"},[a("el-radio-group",{staticStyle:{"margin-bottom":"20px"},model:{value:e.loginType,callback:function(t){e.loginType=t},expression:"loginType"}},e._l(e.logConfig.firstStep,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1):e._e(),0==e.loginType?a("div",[a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"password"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLock,expression:"showCapsLock"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-row",{staticStyle:{width:"100%"}},[a("el-input",{staticClass:"pwdInp",staticStyle:{width:"100%"},attrs:{type:e.eyesFlag?"text":"password","auto-complete":"new-password",maxlength:"20",placeholder:e.placeHolderPwd},on:{blur:e.capsBlur,focus:function(t){e.showTemptip=!0}},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}},[e.eyesFlag?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"})])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTemptip,expression:"showTemptip"}],staticClass:"form-temp-tip"},[e._v("请输入"),a("span",[e._v("个人")]),e._v("用户密码")])],1):1==e.loginType?a("div",[a("el-form-item",{attrs:{prop:"smscode"}},[a("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[a("el-input",{staticClass:"smsInp",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},model:{value:e.form.smscode,callback:function(t){e.$set(e.form,"smscode","string"===typeof t?t.trim():t)},expression:"form.smscode"}}),a("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1)],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.slideType,expression:"slideType"}]},[a("el-row",{staticStyle:{width:"100%"}},[a("el-col",[a("sliderValidate",{ref:"sliderValidate",attrs:{status:e.validate_status},on:{"update:status":function(t){e.validate_status=t}}})],1)],1)],1),a("el-row",{staticStyle:{width:"100%"}},[a("el-col",[a("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1),a("el-dialog",{attrs:{title:e.agreementName,visible:e.dialogAgreement,"append-to-body":"","close-on-click-modal":!1,width:"813px"},on:{"update:visible":function(t){e.dialogAgreement=t}}},[a("div",{domProps:{innerHTML:e._s(e.agreementText)}}),a("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement=!1}}},[e._v("确 定")])],1)]),a("update-pwd-word",{attrs:{showUpdatePwd:e.showUpdatePwd,oldPwd:e.oldPwd},on:{closePwdDialog:e.closePwdDialog}}),a("IDTypeShoose",{ref:"IDTypeShoose",on:{tempRelatedType:e.tempRelatedType}}),a("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),a("signedagreement",{ref:"signedagreement",on:{handleChangeFlag:e.handleChangeFlag}}),a("qr-code",{ref:"qrCode",on:{handleServiceAgreement:e.handleServiceAgreement,submitA:e.submitA,handleClose:e.handleClose}}),e.slideType?e._e():a("slideVerify",{ref:"slideVerify",on:{handleStatus:e.handle_validate_status}}),a("RiskQrCode",{ref:"riskQrcode",on:{riskOver:e.riskOver}})],1)}),o=[],s=(r("c975"),r("a15b"),r("45fc"),r("5530")),c=(r("96cf"),r("1da1")),l=r("a78e"),u=r.n(l),d=r("986e"),m=r("fc4b"),f=r("17c9"),g=r("3352"),p=r("ed08"),h=r("0a4f"),v=r("cf45"),b=r("e014"),w=r("56d6"),_=r("abd2"),y=r("549d"),x=(r("1115"),r("a023")),C=r("cb61"),T=r("37b6"),k=r("457b"),S=r("05ec"),R=r("c7e3"),$=r("dcad"),I=r("17dc"),j={props:["logConfig"],mixins:[I["a"]],components:{QrCode:k["a"],slideVerify:w["a"],IDTypeShoose:y["a"],UpdatePwdWord:x["default"],fillForm:C["default"],sliderValidate:b["a"],signedagreement:T["default"],RiskQrCode:k["a"]},data:function(){var e=function(e,t,r){Object(p["b"])(t)?r():r(new Error("您输入的统一社会信用代码或纳税人识别号有误，请重新输入"))};return{newEtaxFlag:!1,relatedType:"",showRelatedType:[],relationTypes:[],agreementText:"",agreementName:"",dialogAgreement:!1,checkTrustedLevel_:null,areaPrefix:"",is_TAB:!1,areaInfoData:[],areaName:"",showTemptip:!1,eyesFlag:!1,bz:!1,showUpdatePwd:!1,oldPwd:"",list:[],asddd:function(){},dialogVisible:!1,checked:!0,relatedTypes:_["e"],validate_status:!1,form:{creditCode:Object(m["d"])(),smscode:"",account:"",password:""},smscode_id:"",cliState:Object(m["l"])(),clientId:Object(m["b"])(),redirectURI:Object(m["j"])(),loginLoading:!1,value:!1,rules:{account:[{required:!0,message:"请输入居民身份证号码/手机号码/用户名",trigger:"blur"}],smscode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}],creditCode:[{required:!0,message:"请输入统一社会信用代码/纳税人识别号"},{min:0,max:20,message:"社会信用代码/纳税人识别号长度不超过20位",trigger:"blur"},{validator:e}],password:[{required:!0,message:"请输入个人用户密码",trigger:"blur"}]},loginType:null,buttonName:"获取验证码",getCodeDisabled:!1,time:119,interval:"",uuid:"",restaurants:[]}},computed:{tips:function(){var e="";return this.$store.state.settings.logConfig.switch.loginTips&&(e=this.$store.state.settings.logConfig.loginTips[0].enterpriseQuickLogin.tips),e},slideType:function(){var e=!1;return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].sliderValidateOld&&(e=this.$store.state.settings.logConfig.switch[0].sliderValidateOld),e},placeHolderPwd:function(){var e={5100:!0,3702:!0,1200:!0,1400:!0,4500:!0,2102:!0};return e[this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix]?"个人用户密码(初始密码为证件号码后六位)":"个人用户密码"}},methods:{handle_validate_status:function(e){this.validate_status=e,this.login()},handleClose:function(){localStorage.removeItem("token"),this.$cookie.remove("token"),location.reload()},querySearch:function(e,t){var r=this.restaurants,a=e?r.filter(this.createFilter(e)):r;t(a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},closeFillForm:function(){location.reload()},closePwdDialog:function(){this.slideType&&this.$refs.sliderValidate.reset(),this.$data.form=this.$options.data().form,this.loginLoading=!1,this.validate_status=!1,this.showUpdatePwd=!1,this.$emit("closePwdDialog")},getValidCode:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,r.form.account&&r.form.creditCode){t.next=4;break}return e.$message.warning("请先填写正确的手机号码/居民身份证号码/用户名和统一社会信用代码"),t.abrupt("return");case 4:if(!r.getCodeDisabled){t.next=7;break}return e.$message.warning("请勿重复发送验证码！"),t.abrupt("return");case 7:a={client_id:r.clientId,account:r.form.account,redirect_uri:r.redirectURI,creditCode:r.form.creditCode},r.getCodeDisabled=!0,r.time=119,r.buttonName="120s",r.interval=window.setInterval((function(){r.buttonName=r.time+"s",--r.time}),1e3),1==e.logConfig.isStepTwo?Object(f["l"])(a).then((function(e){1e3===e.code?(r.uuid=e.datagram.uuid,r.smscode_id=e.datagram.smscode_id,r.$message.success("短信验证码成功发送到"+e.datagram.mobile),r.bz=e.datagram.bz):(clearInterval(r.interval),r.getCodeDisabled=!1,r.buttonName="获取验证码")})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"})):Object(f["c"])(a).then((function(e){1e3===e.code?(r.uuid=e.datagram.uuid,r.smscode_id=e.datagram.smscode_id,r.$message.success("短信验证码成功发送到"+e.datagram.mobile),r.bz=e.datagram.bz):(clearInterval(r.interval),r.getCodeDisabled=!1,r.buttonName="获取验证码")})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName="获取验证码"}));case 13:case"end":return t.stop()}}),t)})))()},submitA:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={uid:e.checkTrustedLevel_.uid,fid:e.checkTrustedLevel_.fid,reg_number:e.checkTrustedLevel_.reg_number,qrCode_id:e.$refs.qrCode.qrCode_id},!e.newEtaxFlag){t.next=8;break}return t.next=4,Object($["d"])(r);case 4:return t.next=6,e.new_push_login();case 6:t.next=13;break;case 8:return r=Object(s["a"])(Object(s["a"])({},r),{},{relatedType:e.relatedType}),t.next=11,Object(R["e"])(r);case 11:return t.next=13,e.push_login();case 13:case"end":return t.stop()}}),t)})))()},handleServiceAgreement:function(){this.dialogAgreement=!0},handle_authorize:function(){var e=this,t=this;if(!this.is_TAB)return t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(this.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,void t.$refs.qrCode.creatVerifyQRCode("1");Object(g["f"])({uid:this.checkTrustedLevel_.uid,agreementCode:"03"}).then((function(r){"1000"==r.code&&(Object(g["e"])({agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(t){"1000"==t.code&&(e.agreementText=t.datagram.agreementText,e.agreementName=t.datagram.agreementName)})),"0"==r.datagram[0].signingStatus?(e.$alert('<p>您尚未签订<span style="color:#409EFF;cursor:pointer;" id="service_agreement">《'.concat(r.datagram[0].agreementName,"》</span>，请先阅读协议并确认是否同意签订。如果您不同意，您可持有效身份证件前往线下办税服务场所办理业务。</p>"),"提示",{dangerouslyUseHTMLString:!0,showCancelButton:!0,showConfirmButton:!0,cancelButtonText:"不同意",confirmButtonText:"同意",cancelButtonClass:"my_cancelButtonClass",confirmButtonClass:"my_confirmButtonClass"}).then((function(){Object(g["k"])({uid:e.checkTrustedLevel_.uid,agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(r){"1000"==r.code&&(t.$refs.qrCode.row2=t.form,t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(e.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,t.$refs.qrCode.creatVerifyQRCode("1"))}))})).catch((function(){t.$refs.qrCode.dialogVisible=!1})),e.$nextTick((function(){var t=document.querySelector("#service_agreement");t.onclick=e.handleServiceAgreement}))):"1"==r.datagram[0].signingStatus&&(t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(e.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,t.$refs.qrCode.creatVerifyQRCode("1")))}))},checkRisk:function(e,t,r){var a=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i={uid:r,idCardType:"",idCard:"",scene:"04",fid:t,enterpriseName:"",relatedType:a.relatedType},n={},e.prev=2,e.next=5,Object(R["n"])(i);case 5:if(n=e.sent,1e3!==n.code||!n.datagram.businessMessage){e.next=9;break}return a.$confirm(n.datagram.businessMessage,"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1");case 8:case"end":return e.stop()}}),e)})))).catch(Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(v["a"])(1);case 2:case"end":return e.stop()}}),e)})))),e.abrupt("return",!0);case 9:if(1e3!==n.code||"100"==n.datagram.controlMeasures){e.next=19;break}return a.$refs.riskQrcode.title="确认授权",a.$refs.riskQrcode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(a.$store.state.settings.logConfig.areaInfoData[0].areaName,"税务"))+"APP扫描下方二维码",a.$refs.riskQrcode.riskMessage=n.datagram.riskMessage,a.$refs.riskQrcode.controlMeasures=n.datagram.controlMeasures,a.$refs.riskQrcode.businessProcess=n.datagram.businessProcess,a.$refs.riskQrcode.isRiskScan=!0,a.$refs.riskQrcode.dialogVisible=!0,a.$refs.riskQrcode.creatVerifyQRCode("1"),e.abrupt("return",!0);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e["catch"](2),e.next=25,Object(v["a"])(1);case 25:return e.abrupt("return",!0);case 26:case"end":return e.stop()}}),e,null,[[2,21]])})))()},riskOver:function(e,t){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return localStorage.setItem("token",r.nextRes.datagram.access_token),r.$cookie.set("token",r.nextRes.datagram.access_token),a={uid:r.nextRes.datagram.uid,fid:r.nextRes.datagram.fid,reg_number:r.nextRes.datagram.reg_number,relatedType:r.relatedType,qrCode_id:t},e.next=5,Object(R["c"])(a);case 5:return e.next=7,r.push_login();case 7:case"end":return e.stop()}}),e)})))()},tempRelatedType:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.relatedType=e.relatedType,t,"00"!=e.qrzt?t.$confirm("是否确认成为该企业的"+e.relatedTypeName+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(c["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={relatedType:e.relatedType,client_id:t.clientId,redirect_uri:t.redirectURI,uuid:t.uuid},Object(f["G"])(a).then(function(){var r=Object(c["a"])(regeneratorRuntime.mark((function r(a){var i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return setTimeout((function(){t.$store.dispatch("app/getIdentityLoad",!1)}),8e3),localStorage.setItem("token",a.datagram.access_token),t.$cookie.set("token",a.datagram.access_token),t.nextRes=a,r.next=6,t.checkRisk(e.relatedTypeName,a.datagram.fid,a.datagram.uid);case 6:if(i=r.sent,!i){r.next=9;break}return r.abrupt("return");case 9:if("N"!==a.datagram.sfsl){r.next=26;break}if("四级"==a.datagram.trusted_level||"五级"==a.datagram.trusted_level||"4"==a.datagram.trusted_level||"5"==a.datagram.trusted_level||"1"==a.datagram.overseas){r.next=17;break}localStorage.setItem("token",a.datagram.access_token),t.$cookie.set("token",a.datagram.access_token),t.checkTrustedLevel_=a.datagram,t.handle_authorize(),r.next=24;break;case 17:return localStorage.setItem("token",a.datagram.access_token),t.$cookie.set("token",a.datagram.access_token),n={uid:a.datagram.uid,fid:a.datagram.fid,reg_number:a.datagram.reg_number,relatedType:t.relatedType},r.next=22,Object(R["c"])(n);case 22:return r.next=24,t.push_login();case 24:r.next=37;break;case 26:if("Y"!==a.datagram.sfsl){r.next=36;break}return localStorage.setItem("token",a.datagram.access_token),t.$cookie.set("token",a.datagram.access_token),o={uid:a.datagram.uid,fid:a.datagram.fid,reg_number:a.datagram.reg_number,relatedType:t.relatedType},r.next=32,Object(R["c"])(o);case 32:return r.next=34,t.push_login();case 34:r.next=37;break;case 36:t.push_login();case 37:return r.abrupt("return");case 38:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})))).catch(Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:setTimeout((function(){t.$store.dispatch("app/getIdentityLoad",!1)}),8e3);case 1:case"end":return e.stop()}}),e)})))):t.push_login();case 3:case"end":return r.stop()}}),r)})))()},new_push_login:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(v["a"])(1);case 6:Object(f["v"])({client_id:e.clientId,redirect_uri:e.redirectURI,uuid:e.uuid}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(r){var a,i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1e3!==r.code){t.next=15;break}return t.next=3,Object(h["a"])(r.datagram.access_token);case 3:if(a=t.sent,i=a.userformInfo,n=a.pass,o=a.userInfo,!n){t.next=12;break}return e.handle_jump_before(r,o),t.abrupt("return");case 12:return e.$refs.fillformDialog.fillForm=i,e.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t)})))()},push_login:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(v["a"])(1);case 6:r=e,Object(f["B"])({client_id:r.clientId,redirect_uri:r.redirectURI,relatedType:e.relatedType,uuid:e.uuid}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){var i,n,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(setTimeout((function(){e.$store.dispatch("app/getIdentityLoad",!1)}),8e3),1e3!==a.code){t.next=16;break}return t.next=4,Object(h["a"])(a.datagram.access_token);case 4:if(i=t.sent,n=i.userformInfo,o=i.pass,s=i.userInfo,!o){t.next=13;break}return r.handle_jump_before(a,s),t.abrupt("return");case 13:return r.$refs.fillformDialog.fillForm=n,r.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e.$store.dispatch("app/getIdentityLoad",!1)}));case 8:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(S["h"])({}).then((function(t){e.relationTypes=t.datagram})).catch((function(){}));case 2:case"end":return t.stop()}}),t)})))()},showRelatedTypeName:function(e){for(var t=0;t<this.relationTypes.length;t++)if(this.relationTypes[t].relationTypeCode===e)return this.relationTypes[t].relationTypeName},NEWtempRelatedType:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("N"!==e.datagram.sfsl){r.next=7;break}localStorage.setItem("token",e.datagram.access_token),t.$cookie.set("token",e.datagram.access_token),t.checkTrustedLevel_=e.datagram,t.handle_authorize(),r.next=15;break;case 7:if("Y"!==e.datagram.sfsl){r.next=15;break}return localStorage.setItem("token",e.datagram.access_token),t.$cookie.set("token",e.datagram.access_token),a={uid:e.datagram.uid,fid:e.datagram.fid,reg_number:e.datagram.reg_number},r.next=13,Object($["c"])(a);case 13:return r.next=15,t.new_push_login();case 15:case"end":return r.stop()}}),r)})))()},singleHandleRes:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,i,n,o,s,l,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1e3!==e.code){r.next=39;break}if(!e.datagram.newEtaxFlag){r.next=6;break}return a=[],e.datagram.relationPoList.forEach((function(e){"00"!=e.qrzt&&a.push(t.showRelatedTypeName(e.zrrlx))})),t.$confirm("是否确认成为该企业的"+a.join("/")+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.uuid=e.datagram.uuid,t.newEtaxFlag=!0,t.NEWtempRelatedType(e);case 3:case"end":return r.stop()}}),r)})))),r.abrupt("return",!1);case 6:if(e.datagram.access_token){r.next=24;break}if(t.uuid=e.datagram.uuid,1!=e.datagram.relationPoList.length){r.next=13;break}return r.next=11,t.tempRelatedType({qrzt:e.datagram.relationPoList[0].qrzt,relatedType:e.datagram.relationPoList[0].zrrlx,relatedTypeName:t.showRelatedTypeName(e.datagram.relationPoList[0].zrrlx)});case 11:r.next=22;break;case 13:for(i=[],n=0;n<e.datagram.relationPoList.length;n++)i.push(e.datagram.relationPoList[n].zrrlx);return t.$refs.IDTypeShoose.showRelatedType=i,t.$refs.IDTypeShoose.relationPoList=e.datagram.relationPoList,t.$refs.IDTypeShoose.uuid=t.uuid,t.$refs.IDTypeShoose.relatedType=i[0],r.next=21,t.$refs.IDTypeShoose.init();case 21:t.$refs.IDTypeShoose.IDTypeVisible=!0;case 22:r.next=39;break;case 24:return t.bz="0"===e.datagram.bz,r.next=27,Object(h["a"])(e.datagram.access_token);case 27:if(o=r.sent,s=o.userformInfo,l=o.pass,u=o.userInfo,!l){r.next=36;break}return t.handle_jump_before(e,u),r.abrupt("return");case 36:return t.$refs.fillformDialog.fillForm=s,t.$refs.fillformDialog.fillFormVisible=!0,r.abrupt("return");case 39:case"end":return r.stop()}}),r)})))()},twinHandleRes:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===e.code&&(t.logConfig.firstStep.some((function(r){if(r.value==t.loginType)return e.datagram.secondStep=r.secondStep,!0})),""==e.datagram.mobile&&t.$message({duration:5e3,message:"您的手机号码为空，请您通过“找回手机号码”功能修改成正确的手机号码；或通过扫码验证方式登录系统，并在账户中心的手机号码修改菜单中添加默认手机号码。",type:"warning"}),t.setCreditCodeList(),d["a"].$emit("toStepTwo","1",e.datagram));case 1:case"end":return r.stop()}}),r)})))()},singlePwd:function(e){var t=this;Object(f["b"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),t.loginLoading=!1,t.validate_status=!1}),8e3),t.singleHandleRes(e)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),window.setTimeout((function(){t.loginLoading=!1,t.validate_status=!1}),100)}))},twinPwd:function(e){var t=this;Object(f["k"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),t.loginLoading=!1,t.validate_status=!1}),8e3),t.twinHandleRes(e)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),window.setTimeout((function(){t.loginLoading=!1,t.validate_status=!1}),100)}))},singleSms:function(e){var t=this;Object(f["a"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),t.loginLoading=!1,t.validate_status=!1}),8e3),t.singleHandleRes(e)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),clearInterval(t.interval),t.interval=null,t.getCodeDisabled=!1,t.buttonName="获取验证码",window.setTimeout((function(){t.loginLoading=!1,t.validate_status=!1}),100)}))},twinSms:function(){var e=this,t={smsCode:this.form.smscode,smscode_id:this.smscode_id};Object(f["m"])(t).then((function(t){setTimeout((function(){e.slideType&&e.$refs.sliderValidate.reset(),e.loginLoading=!1,e.validate_status=!1}),8e3),e.twinHandleRes(t)})).catch((function(){clearInterval(e.interval),e.interval=null,e.getCodeDisabled=!1,e.buttonName="获取验证码",window.setTimeout((function(){e.loginLoading=!1,e.validate_status=!1,e.slideType&&e.$refs.sliderValidate.reset()}),100)}))},login:function(){var e=this;this.loginLoading||(localStorage.removeItem("token"),this.$cookie.remove("token"),this.$refs.form.validate(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(r){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}if(e.validate_status||e.slideType){t.next=6;break}return e.$refs.slideVerify.visible=!0,t.abrupt("return");case 6:if(e.validate_status||!e.slideType){t.next=9;break}return e.$message.warning("请先进行滑块验证！"),t.abrupt("return");case 9:try{e.loginLoading=!0,localStorage.setItem("clientId",e.clientId),a={client_id:e.clientId,account:e.form.account,password:e.form.password,redirect_uri:e.redirectURI,creditCode:e.form.creditCode},i={uuid:e.uuid,client_id:e.clientId,smsCode:e.form.smscode,smscode_id:e.smscode_id,redirect_uri:e.redirectURI},e.loginLoading=!0,1==e.logConfig.isStepTwo?0==e.loginType?e.twinPwd(a):e.twinSms():0==e.loginType?e.singlePwd(a):e.singleSms(i)}catch(n){e.slideType&&e.$refs.sliderValidate.reset(),window.setTimeout((function(){e.loginLoading=!1,e.validate_status=!1}),100)}case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},handleChangeFlag:function(){this.showUpdatePwd=!0,this.form.creditCode&&this.form.creditCode.length>=8&&(this.oldPwd=this.form.creditCode.substring(this.form.creditCode.length-8))},handle_jump_before:function(e,t){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.setCreditCodeList(),r.$refs.signedagreement.handle_jump_before(e,t,"/userCenter/baseInfoEE");case 2:case"end":return a.stop()}}),a)})))()},setCreditCodeList:function(){var e=this,t=this.restaurants.some((function(t){if(t.value==e.form.creditCode)return!0}));t||(this.restaurants.push({value:this.form.creditCode}),u.a.set("E-QUICK-CCLIST",JSON.stringify(this.restaurants)))}},watch:{logConfig:{handler:function(e){e&&(this.loginType=e.firstStep[0].value)},deep:!0,immediate:!0},time:{handler:function(e){e<0&&(this.buttonName="重新发送",this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0},loginType:function(e){this.$refs.form.clearValidate(["smscode","password"])}},beforeDestroy:function(){clearInterval(this.interval),this.interval=null},mounted:function(){this.init(),"3100"===localStorage.getItem("areaPrefix")&&(this.is_TAB=!0),this.restaurants=u.a.get("E-QUICK-CCLIST")?JSON.parse(u.a.get("E-QUICK-CCLIST")):[]}},O=j,q=(r("e110"),r("2877")),L=Object(q["a"])(O,n,o,!1,null,"f9a627b4",null),A=L.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{prop:"cetifyType"}},[a("el-select",{staticClass:"zjTypeSelect",staticStyle:{width:"100%"},attrs:{placeholder:"请选择证书类型"},model:{value:e.form.cetifyType,callback:function(t){e.$set(e.form,"cetifyType",t)},expression:"form.cetifyType"}},e._l(e.cetifyTypeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"certificatePwd"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLock,expression:"showCapsLock"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-input",{staticClass:"certificatePwd",staticStyle:{width:"100%"},attrs:{maxlength:"20",type:e.eyesFlag?"text":"password",placeholder:"请输入证书密码"},on:{blur:e.capsBlurMixins},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.form.certificatePwd,callback:function(t){e.$set(e.form,"certificatePwd","string"===typeof t?t.trim():t)},expression:"form.certificatePwd"}},[e.eyesFlag?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"})])],1),a("el-row",[a("el-col",[a("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v("登录")])],1)],1)],1),"0"===e.form.cetifyType?a("div",{staticClass:"taxTips"},[a("span",{staticClass:"taxDownload"},[e._v("如未安装企业证书驱动，请先下载安装证书 ")]),a("el-button",{staticClass:"taxDriver",attrs:{type:"text"},on:{click:e.goToDrive}},[e._v("驱动")]),a("span",{staticClass:"taxDownload"},[e._v(" 并进行 ")]),a("el-button",{staticClass:"taxDriver",attrs:{type:"text",onclick:"window.open('/jiance/jiance.html', '_blank')"}},[e._v("环境检测 ")])],1):"1"===e.form.cetifyType?a("div",{staticClass:"taxTips"},[a("div",{domProps:{innerHTML:e._s(e.downUrlDizhi)}})]):e._e()],1)},P=[],N=r("2a11"),F=r("d7e0"),V=r("2b0f"),Q={mixins:[I["a"]],props:["logConfig"],data:function(){return{userinfo:{},areaCode:"",eyesFlag:!1,loginLoading:!1,form:{cetifyType:"",certificatePwd:""},rules:{cetifyType:[{required:!0,message:"请选择证书类型",trigger:"change"}],certificatePwd:[{required:!0,message:"请输入证书密码",trigger:"blur"}]},clientId:Object(m["b"])(),redirectURI:Object(m["j"])(),crosFlag:"1",authType:"1",strProvider:"",strContainer:"//SM2/SM2CONTAINER0002",strContainerSM2:"//SM2/SM2CONTAINER0002",strContainerRSA:"CTAS0002        ",dwProvType:"0x802",dwProvTypeSM2:"0x802",dwProvTypeRSA:"0x1",post_type:"0",user_type:"1",login_type:"0",cliVer:"",downUrlDizhi:""}},computed:{cetifyTypeList:function(){var e,t=[];return(null===(e=this.$store.state.settings.logConfig)||void 0===e?void 0:e.cetifyLoginTypeList)&&(t=this.$store.state.settings.logConfig.cetifyLoginTypeList),t&&1===t.length&&(this.form.cetifyType=t[0].value),t}},created:function(){this.areaCode=this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix,this.downUrlDizhi=this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.CcieDownUrl&&this.$store.state.settings.logConfig.CcieDownUrl[0]&&this.$store.state.settings.logConfig.CcieDownUrl[0].CcieUrlPath},methods:{goToDrive:function(){window.open("/#/driver")},goToCaDetect:function(){window.open("/#/caDetect")},downCaControl:function(){var e=localStorage.getItem("areaPrefix"),t=this.downUrlDizhi||N[e].downUrl;window.open(t,"_blank")},login:function(){var e=this;e.loginLoading||this.$refs.form.validate(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r&&(e.loginLoading=!0,"0"==e.form.cetifyType?e.taxCetifyLogin():"1"==e.form.cetifyType&&e.taxCetifyCALogin());case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},taxCetifyLogin:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a,i,n,o,c,l,u,m,f,g,p,h,v,b,w,_,y,x,C,T,k,S,R,$,I,j,O;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,"3100"!==r.areaCode&&"1500"!==r.areaCode){t.next=53;break}return t.prev=2,t.next=5,Object(F["i"])({crosFlag:r.crosFlag});case 5:return a=t.sent,r.cliVer=a.version,i={strProvider:r.strProvider,strContainer:r.strContainerSM2,dwProvType:r.dwProvTypeSM2,authType:r.authType,crosFlag:r.crosFlag},t.next=10,Object(F["d"])(Object(s["a"])({authType:r.authType},i));case 10:if(n=t.sent,0==n.code){t.next=25;break}return i=Object.assign(i,{strContainer:r.strContainerRSA,dwProvType:r.dwProvTypeRSA}),t.next=15,Object(F["d"])(Object(s["a"])({},i));case 15:if(n=t.sent,0==n.code){t.next=25;break}return i=Object.assign(i,{strContainer:"",dwProvType:"1"}),t.next=20,Object(F["d"])(Object(s["a"])({},i));case 20:if(n=t.sent,0==n.code){t.next=25;break}return r.$message({customClass:"el-icon-warning-color",message:n.msg,type:"warning"}),r.loginLoading=!1,t.abrupt("return");case 25:return o=n.clientHello,t.next=28,Object(F["h"])({server_client_hello:o});case 28:return c=t.sent,l=c.datagram.uuid,u=c.datagram.serverHelloResult,t.next=33,Object(F["c"])(Object(s["a"])({serverHello:u,password:r.form.certificatePwd},i));case 33:return m=t.sent,f=m.clientAuth,t.next=37,Object(F["g"])({client_id:r.clientId,redirect_uri:r.redirectURI,uuid:l,str_client_auth:f,post_type:r.post_type,user_type:r.user_type,login_type:r.login_type});case 37:return g=t.sent,p={cert:"",certInfoNo:"71",strProvider:"",strContainer:i.strContainer,dwProvType:i.dwProvType,crosFlag:"1",dwFlag:"0",dwCertNum:"2"},t.next=41,Object(F["k"])(p);case 41:h=t.sent,localStorage.setItem("code",g.datagram.code),g.datagram.secondStep=r.logConfig.secondStep,h?d["a"].$emit("toStepTwo","1",g.datagram,h.certInfo):d["a"].$emit("toStepTwo","1",g.datagram),r.loginLoading=!1,t.next=51;break;case 48:t.prev=48,t.t0=t["catch"](2),r.loginLoading=!1;case 51:t.next=115;break;case 53:return t.prev=53,t.next=56,Object(F["i"])({crosFlag:r.crosFlag});case 56:return v=t.sent,r.cliVer=v.version,b={strProvider:r.strProvider,strContainer:r.strContainerSM2,dwProvType:r.dwProvTypeSM2,crosFlag:r.crosFlag},w="//SM2/SM2CONTAINER0002",_="0x802",t.next=63,Object(F["b"])(Object(s["a"])({},b));case 63:if(y=t.sent,0==y.code){t.next=86;break}return b=Object.assign(b,{strContainer:r.strContainerRSA,dwProvType:r.dwProvTypeRSA}),t.next=68,Object(F["b"])(Object(s["a"])({},b));case 68:if(y=t.sent,0==y.code){t.next=84;break}return b=Object.assign(b,{strContainer:"",dwProvType:"1"}),t.next=73,Object(F["b"])(Object(s["a"])({},b));case 73:if(y=t.sent,0==y.code){t.next=80;break}return r.$message({customClass:"el-icon-warning-color",message:y.msg,type:"warning"}),r.loginLoading=!1,t.abrupt("return");case 80:w="",_="1";case 82:t.next=86;break;case 84:w="CTAS0002        ",_="1";case 86:return t.next=88,Object(F["d"])(Object(s["a"])({authType:r.authType},b));case 88:return x=t.sent,C=x.clientHello,t.next=92,Object(F["h"])({server_client_hello:C});case 92:return T=t.sent,k=T.datagram.uuid,S=T.datagram.serverHelloResult,t.next=97,Object(F["c"])(Object(s["a"])({serverHello:S,password:r.form.certificatePwd},b));case 97:return R=t.sent,$=R.clientAuth,t.next=101,Object(F["g"])({client_id:r.clientId,redirect_uri:r.redirectURI,uuid:k,str_client_auth:$,post_type:r.post_type,user_type:r.user_type,login_type:r.login_type});case 101:return I=t.sent,j={cert:"",certInfoNo:"71",strProvider:"",strContainer:w,dwProvType:_,crosFlag:"1",dwFlag:"0",dwCertNum:"2"},t.next=105,Object(F["k"])(j);case 105:O=t.sent,localStorage.setItem("code",I.datagram.code),I.datagram.secondStep=r.logConfig.secondStep,O?d["a"].$emit("toStepTwo","1",I.datagram,O.certInfo):d["a"].$emit("toStepTwo","1",I.datagram),r.loginLoading=!1,t.next=115;break;case 112:t.prev=112,t.t1=t["catch"](53),r.loginLoading=!1;case 115:case"end":return t.stop()}}),t,null,[[2,48],[53,112]])})))()},taxCetifyCALogin:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a,i,n,o,c,l,u,m,f,g,p,h,v,b,w,_,y,x;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e,t.prev=1,n="0x802",t.next=5,Object(V["a"])({strContainer:"",strProvider:"",dwProvType:n,crosFlag:r.crosFlag});case 5:if(o=t.sent,-1!=o.code){t.next=15;break}return n="1",t.next=10,Object(V["a"])({strContainer:"",strProvider:"",dwProvType:n,crosFlag:r.crosFlag});case 10:if(c=t.sent,-1!=c.code){t.next=15;break}return r.$message({customClass:"el-icon-warning-color",message:c.msg,type:"warning"}),r.loginLoading=!1,t.abrupt("return");case 15:return t.next=17,Object(V["e"])({crosFlag:r.crosFlag});case 17:return t.sent,t.next=20,Object(V["d"])();case 20:return l=t.sent,u=null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a[0].strProvider,m=null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i[0].strContainer,f={strProvider:u,strContainer:m,dwProvType:n,crosFlag:r.crosFlag},t.next=26,Object(V["i"])(Object(s["a"])({password:r.form.certificatePwd},f));case 26:return t.sent,t.next=29,Object(V["c"])(Object(s["a"])({authType:"1"},f));case 29:return g=t.sent,p=g.clientHello,t.next=33,Object(V["h"])({server_client_hello:p});case 33:return h=t.sent,v=h.datagram.uuid,b=h.datagram.serverHelloResult,t.next=38,Object(V["b"])(Object(s["a"])({serverHello:b,password:r.form.certificatePwd},f));case 38:return w=t.sent,_=w.clientAuth,t.next=42,Object(V["g"])({client_id:r.clientId,redirect_uri:r.redirectURI,uuid:v,str_client_auth:_,post_type:r.post_type,user_type:r.user_type,login_type:r.login_type});case 42:return y=t.sent,t.next=45,Object(V["f"])(Object(s["a"])({dwCertNum:"2",dwFlag:"0x410000",cert:"",certInfoNo:"71"},f));case 45:x=t.sent,localStorage.setItem("code",y.datagram.code),y.datagram.secondStep=r.logConfig.secondStep,x?d["a"].$emit("toStepTwo","1",y.datagram,x.certInfo):d["a"].$emit("toStepTwo","1",y.datagram),r.loginLoading=!1,t.next=55;break;case 52:t.prev=52,t.t0=t["catch"](1),r.loginLoading=!1;case 55:case"end":return t.stop()}}),t,null,[[1,52]])})))()}}},U=Q,E=(r("7976"),Object(q["a"])(U,D,P,!1,null,"62fe4f8a",null)),B=E.exports,z=r("3a15"),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{prop:"creditCode"}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-autocomplete",{staticClass:"creditCode",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,placeholder:e.$i18n.t("language_variable4")},model:{value:e.form.creditCode,callback:function(t){e.$set(e.form,"creditCode","string"===typeof t?t.trim():t)},expression:"form.creditCode"}})],1)],1),a("el-form-item",{attrs:{prop:"account"}},[a("el-row",{staticStyle:{width:"100%"}},[a("el-input",{staticClass:"mobileInp",staticStyle:{width:"100%"},attrs:{placeholder:e.$i18n.t("language_variable5")},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account","string"===typeof t?t.trim():t)},expression:"form.account"}})],1)],1),e.logConfig.firstStep.length>1?a("div",{staticClass:"justifyCenter"},[a("el-radio-group",{staticStyle:{"margin-bottom":"20px"},model:{value:e.loginType,callback:function(t){e.loginType=t},expression:"loginType"}},e._l(e.logConfig.firstStep,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.name))])})),1)],1):e._e(),0==e.loginType?a("div",[a("el-form-item",{staticStyle:{position:"relative"},attrs:{prop:"password"}},[a("caps-lock",{directives:[{name:"show",rawName:"v-show",value:e.showCapsLock,expression:"showCapsLock"}],staticStyle:{position:"absolute",top:"-29px",left:"34px"}}),a("el-row",{staticStyle:{width:"100%"}},[a("el-input",{staticClass:"pwdInp",staticStyle:{width:"100%"},attrs:{type:e.eyesFlag?"text":"password","auto-complete":"new-password",maxlength:"20",placeholder:e.placeHolderPwd},on:{blur:e.capsBlur,focus:function(t){e.showTemptip=!0}},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}},[e.eyesFlag?a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("00ee")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"}):a("img",{staticClass:"eyeAllClass",attrs:{slot:"suffix",src:r("5116")},on:{click:function(t){e.eyesFlag=!e.eyesFlag}},slot:"suffix"})])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTemptip,expression:"showTemptip"}],staticClass:"form-temp-tip"},[e._v(" "+e._s(e.$i18n.t("language_variable11"))+" ")])],1):1==e.loginType?a("div",[a("el-form-item",{attrs:{prop:"smscode"}},[a("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[a("el-input",{staticClass:"smsInp",attrs:{maxlength:"6",placeholder:"请输入短信验证码"},model:{value:e.form.smscode,callback:function(t){e.$set(e.form,"smscode","string"===typeof t?t.trim():t)},expression:"form.smscode"}}),a("el-button",{staticClass:"codeDivCls btnDisables",attrs:{type:"primary",disabled:e.getCodeDisabled},on:{click:e.getValidCode}},[e._v(e._s(e.buttonName))])],1)],1)],1):e._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.slideType,expression:"slideType"}]},[a("el-row",{staticStyle:{width:"100%"}},[a("el-col",[a("sliderValidate",{ref:"sliderValidate",attrs:{status:e.validate_status},on:{"update:status":function(t){e.validate_status=t}}})],1)],1)],1),a("el-row",{staticStyle:{width:"100%"}},[a("el-col",[a("el-button",{staticClass:"loginCls",attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v(e._s(e.$i18n.t("language_variable8")))])],1)],1)],1),a("el-dialog",{attrs:{title:e.agreementName,visible:e.dialogAgreement,"append-to-body":"","close-on-click-modal":!1,width:"813px"},on:{"update:visible":function(t){e.dialogAgreement=t}}},[a("div",{domProps:{innerHTML:e._s(e.agreementText)}}),a("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement=!1}}},[e._v(e._s(e.$i18n.t("language_variable88")))])],1)]),a("update-pwd-word",{attrs:{showUpdatePwd:e.showUpdatePwd,oldPwd:e.oldPwd},on:{closePwdDialog:e.closePwdDialog}}),a("IDTypeShoose",{ref:"IDTypeShoose",on:{tempRelatedType:e.tempRelatedType}}),a("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),a("signedagreement",{ref:"signedagreement",on:{handleChangeFlag:e.handleChangeFlag}}),a("qr-code",{ref:"qrCode",on:{handleServiceAgreement:e.handleServiceAgreement,submitA:e.submitA,handleClose:e.handleClose}}),e.slideType?e._e():a("slideVerify",{ref:"slideVerify",on:{handleStatus:e.handle_validate_status}})],1)},H=[],W={props:["logConfig"],mixins:[I["a"]],components:{QrCode:k["a"],sliderValidate:b["a"],slideVerify:w["a"],IDTypeShoose:y["a"],UpdatePwdWord:x["default"],fillForm:C["default"],signedagreement:T["default"]},data:function(){var e=this,t=function(t,r,a){Object(p["b"])(r)?a():a(new Error(e.$i18n.t("language_variable98")))};return{relatedType:"",showRelatedType:[],relationTypes:[],agreementText:"",agreementName:"",dialogAgreement:!1,checkTrustedLevel_:null,areaPrefix:"",is_TAB:!1,areaInfoData:[],areaName:"",showTemptip:!1,eyesFlag:!1,bz:!1,showUpdatePwd:!1,oldPwd:"",list:[],asddd:function(){},dialogVisible:!1,checked:!0,relatedTypes:_["e"],validate_status:!1,form:{creditCode:Object(m["d"])(),smscode:"",account:"",password:""},smscode_id:"",cliState:Object(m["l"])(),clientId:Object(m["b"])(),redirectURI:Object(m["j"])(),loginLoading:!1,value:!1,rules:{account:[{required:!0,message:this.$i18n.t("language_variable13"),trigger:"blur"}],smscode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}],creditCode:[{required:!0,message:this.$i18n.t("language_variable9")},{min:0,max:20,message:this.$i18n.t("language_variable10"),trigger:"blur"},{validator:t}],password:[{required:!0,message:this.$i18n.t("language_variable11"),trigger:"blur"}]},loginType:null,buttonName:this.$i18n.t("language_variable83"),getCodeDisabled:!1,time:119,interval:"",uuid:"",restaurants:[]}},computed:{tips:function(){var e,t="";return(null===(e=this.$store.state.settings.logConfig)||void 0===e?void 0:e.loginTips)&&(t=this.$store.state.settings.logConfig.loginTips[0].enterpriseQuickLogin.tips),t},slideType:function(){var e=!1;return this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.switch&&this.$store.state.settings.logConfig.switch[0].sliderValidateOld&&(e=this.$store.state.settings.logConfig.switch[0].sliderValidateOld),e},placeHolderPwd:function(){var e={5100:!0,3702:!0,1200:!0,2102:!0};return e[this.$store.state.settings.logConfig.areaInfoData[0].areaPrefix]?this.$i18n.t("language_variable7"):this.$i18n.t("language_variable6")}},methods:{handle_validate_status:function(e){this.validate_status=e,this.login()},handleClose:function(){localStorage.removeItem("token"),this.$cookie.remove("token"),location.reload()},querySearch:function(e,t){var r=this.restaurants,a=e?r.filter(this.createFilter(e)):r;t(a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},closeFillForm:function(){location.reload()},closePwdDialog:function(){this.slideType&&this.$refs.sliderValidate.reset(),this.$data.form=this.$options.data().form,this.loginLoading=!1,this.validate_status=!1,this.showUpdatePwd=!1,this.$emit("closePwdDialog")},getValidCode:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e,r.form.account&&r.form.creditCode){t.next=4;break}return e.$message.warning("请先填写正确的手机号码/居民身份证号码/用户名和统一社会信用代码"),t.abrupt("return");case 4:if(!r.getCodeDisabled){t.next=7;break}return e.$message.warning(e.$i18n.t("language_variable80")),t.abrupt("return");case 7:a={client_id:r.clientId,account:r.form.account,redirect_uri:r.redirectURI,creditCode:r.form.creditCode},r.getCodeDisabled=!0,r.time=119,r.buttonName="120s",r.interval=window.setInterval((function(){r.buttonName=r.time+"s",--r.time}),1e3),1==e.logConfig.isStepTwo?Object(f["l"])(a).then((function(t){1e3===t.code?(r.uuid=t.datagram.uuid,r.smscode_id=t.datagram.smscode_id,r.$message.success("短信验证码成功发送到"+t.datagram.mobile),r.bz=t.datagram.bz):(clearInterval(r.interval),r.getCodeDisabled=!1,r.buttonName=e.$i18n.t("language_variable83"))})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName=e.$i18n.t("language_variable83")})):Object(f["c"])(a).then((function(t){1e3===t.code?(r.uuid=t.datagram.uuid,r.smscode_id=t.datagram.smscode_id,r.$message.success("短信验证码成功发送到"+t.datagram.mobile),r.bz=t.datagram.bz):(clearInterval(r.interval),r.getCodeDisabled=!1,r.buttonName=e.$i18n.t("language_variable83"))})).catch((function(){clearInterval(r.interval),r.interval=null,r.getCodeDisabled=!1,r.buttonName=e.$i18n.t("language_variable83")}));case 13:case"end":return t.stop()}}),t)})))()},submitA:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={uid:e.checkTrustedLevel_.uid,fid:e.checkTrustedLevel_.fid,reg_number:e.checkTrustedLevel_.reg_number,relatedType:e.relatedType,qrCode_id:e.$refs.qrCode.qrCode_id},t.next=3,Object(R["e"])(r);case 3:return t.next=5,e.push_login();case 5:case"end":return t.stop()}}),t)})))()},handleServiceAgreement:function(){this.dialogAgreement=!0},handle_authorize:function(){var e=this,t=this;if(!this.is_TAB)return t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(this.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,void t.$refs.qrCode.creatVerifyQRCode("1");Object(g["f"])({uid:this.checkTrustedLevel_.uid,agreementCode:"03"}).then((function(r){"1000"==r.code&&(Object(g["e"])({agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(t){"1000"==t.code&&(e.agreementText=t.datagram.agreementText,e.agreementName=t.datagram.agreementName)})),"0"==r.datagram[0].signingStatus?(e.$alert('<p>您尚未签订<span style="color:#409EFF;cursor:pointer;" id="service_agreement">《'.concat(r.datagram[0].agreementName,"》</span>，请先阅读协议并确认是否同意签订。如果您不同意，您可持有效身份证件前往线下办税服务场所办理业务。</p>"),"提示",{dangerouslyUseHTMLString:!0,showCancelButton:!0,showConfirmButton:!0,cancelButtonText:"不同意",confirmButtonText:"同意",cancelButtonClass:"my_cancelButtonClass",confirmButtonClass:"my_confirmButtonClass"}).then((function(){Object(g["k"])({uid:e.checkTrustedLevel_.uid,agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(r){"1000"==r.code&&(t.$refs.qrCode.row2=t.form,t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(e.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,t.$refs.qrCode.creatVerifyQRCode("1"))}))})).catch((function(){t.$refs.qrCode.dialogVisible=!1})),e.$nextTick((function(){var t=document.querySelector("#service_agreement");t.onclick=e.handleServiceAgreement}))):"1"==r.datagram[0].signingStatus&&(t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(e.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,t.$refs.qrCode.creatVerifyQRCode("1")))}))},tempRelatedType:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.relatedType=e.relatedType,t,"00"!=e.qrzt?t.$confirm("是否确认成为该企业的"+e.relatedTypeName+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(c["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={relatedType:e.relatedType,client_id:t.clientId,redirect_uri:t.redirectURI,uuid:t.uuid},Object(f["G"])(a).then(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(r){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(setTimeout((function(){t.$store.dispatch("app/getIdentityLoad",!1)}),8e3),"N"!==r.datagram.sfsl){e.next=18;break}if("四级"==r.datagram.trusted_level||"五级"==r.datagram.trusted_level||"4"==r.datagram.trusted_level||"5"==r.datagram.trusted_level||"1"==r.datagram.overseas){e.next=9;break}localStorage.setItem("token",r.datagram.access_token),t.$cookie.set("token",r.datagram.access_token),t.checkTrustedLevel_=r.datagram,t.handle_authorize(),e.next=16;break;case 9:return localStorage.setItem("token",r.datagram.access_token),t.$cookie.set("token",r.datagram.access_token),a={uid:r.datagram.uid,fid:r.datagram.fid,reg_number:r.datagram.reg_number,relatedType:t.relatedType},e.next=14,Object(R["c"])(a);case 14:return e.next=16,t.push_login();case 16:e.next=29;break;case 18:if("Y"!==r.datagram.sfsl){e.next=28;break}return localStorage.setItem("token",r.datagram.access_token),t.$cookie.set("token",r.datagram.access_token),i={uid:r.datagram.uid,fid:r.datagram.fid,reg_number:r.datagram.reg_number,relatedType:t.relatedType},e.next=24,Object(R["c"])(i);case 24:return e.next=26,t.push_login();case 26:e.next=29;break;case 28:t.push_login();case 29:return e.abrupt("return");case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})))).catch(Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:setTimeout((function(){t.$store.dispatch("app/getIdentityLoad",!1)}),8e3);case 1:case"end":return e.stop()}}),e)})))):t.push_login();case 3:case"end":return r.stop()}}),r)})))()},push_login:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(v["a"])(1);case 6:r=e,Object(f["B"])({client_id:r.clientId,redirect_uri:r.redirectURI,relatedType:e.relatedType,uuid:e.uuid}).then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(a){var i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(setTimeout((function(){e.$store.dispatch("app/getIdentityLoad",!1)}),8e3),1e3!==a.code){t.next=9;break}return t.next=4,Object(h["a"])(a.datagram.access_token);case 4:i=t.sent,i.userformInfo,i.pass,n=i.userInfo,r.handle_jump_before(a,n);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e.$store.dispatch("app/getIdentityLoad",!1)}));case 8:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(S["h"])({}).then((function(t){e.relationTypes=t.datagram})).catch((function(){}));case 2:case"end":return t.stop()}}),t)})))()},showRelatedTypeName:function(e){for(var t=0;t<this.relationTypes.length;t++)if(this.relationTypes[t].relationTypeCode===e)return this.relationTypes[t].relationTypeName},singleHandleRes:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,i,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(1e3!==e.code){r.next=30;break}if(e.datagram.access_token){r.next=21;break}if(t.uuid=e.datagram.uuid,1!=e.datagram.relationPoList.length){r.next=10;break}return r.next=6,t.init();case 6:return r.next=8,t.tempRelatedType({qrzt:e.datagram.relationPoList[0].qrzt,relatedType:e.datagram.relationPoList[0].zrrlx,relatedTypeName:t.showRelatedTypeName(e.datagram.relationPoList[0].zrrlx)});case 8:r.next=19;break;case 10:for(a=[],i=0;i<e.datagram.relationPoList.length;i++)a.push(e.datagram.relationPoList[i].zrrlx);return t.$refs.IDTypeShoose.showRelatedType=a,t.$refs.IDTypeShoose.relationPoList=e.datagram.relationPoList,t.$refs.IDTypeShoose.uuid=t.uuid,t.$refs.IDTypeShoose.relatedType=a[0],r.next=18,t.$refs.IDTypeShoose.init();case 18:t.$refs.IDTypeShoose.IDTypeVisible=!0;case 19:r.next=30;break;case 21:return t.bz="0"===e.datagram.bz,r.next=24,Object(h["a"])(e.datagram.access_token);case 24:return n=r.sent,n.userformInfo,n.pass,o=n.userInfo,t.handle_jump_before(e,o),r.abrupt("return");case 30:case"end":return r.stop()}}),r)})))()},twinHandleRes:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:1e3===e.code&&(t.logConfig.firstStep.some((function(r){if(r.value==t.loginType)return e.datagram.secondStep=r.secondStep,!0})),""==e.datagram.mobile&&t.$message({duration:5e3,message:"您的手机号码为空，请您通过“找回手机号码”功能修改成正确的手机号码；或通过扫码验证方式登录系统，并在账户中心的手机号码修改菜单中添加默认手机号码。",type:"warning"}),t.setCreditCodeList(),d["a"].$emit("toStepTwo","1",e.datagram));case 1:case"end":return r.stop()}}),r)})))()},singlePwd:function(e){var t=this;Object(f["h"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),t.loginLoading=!1,t.validate_status=!1}),8e3),t.singleHandleRes(e)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),window.setTimeout((function(){t.loginLoading=!1,t.validate_status=!1}),100)}))},twinPwd:function(e){var t=this;Object(f["k"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),t.loginLoading=!1,t.validate_status=!1}),8e3),t.twinHandleRes(e)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),window.setTimeout((function(){t.loginLoading=!1,t.validate_status=!1}),100)}))},singleSms:function(e){var t=this;Object(f["a"])(e).then((function(e){setTimeout((function(){t.slideType&&t.$refs.sliderValidate.reset(),t.loginLoading=!1,t.validate_status=!1}),8e3),t.singleHandleRes(e)})).catch((function(){t.slideType&&t.$refs.sliderValidate.reset(),clearInterval(t.interval),t.interval=null,t.getCodeDisabled=!1,t.buttonName=t.$i18n.t("language_variable83"),window.setTimeout((function(){t.loginLoading=!1,t.validate_status=!1}),100)}))},twinSms:function(){var e=this,t={smsCode:this.form.smscode,smscode_id:this.smscode_id};Object(f["m"])(t).then((function(t){setTimeout((function(){e.slideType&&e.$refs.sliderValidate.reset(),e.loginLoading=!1,e.validate_status=!1}),8e3),e.twinHandleRes(t)})).catch((function(){e.slideType&&e.$refs.sliderValidate.reset(),clearInterval(e.interval),e.interval=null,e.getCodeDisabled=!1,e.buttonName=e.$i18n.t("language_variable83"),window.setTimeout((function(){e.loginLoading=!1,e.validate_status=!1}),100)}))},login:function(){var e=this;this.loginLoading||(localStorage.removeItem("token"),this.$cookie.remove("token"),this.$refs.form.validate(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=10;break}if(e.validate_status||e.slideType){t.next=6;break}return e.$refs.slideVerify.visible=!0,t.abrupt("return");case 6:if(e.validate_status||!e.slideType){t.next=9;break}return e.$message.warning("请先进行滑块验证！"),t.abrupt("return");case 9:try{e.loginLoading=!0,localStorage.setItem("clientId",e.clientId),a={client_id:e.clientId,email:e.form.account,password:e.form.password,redirect_uri:e.redirectURI,creditCode:e.form.creditCode},e.loginLoading=!0,e.singlePwd(a)}catch(i){e.slideType&&e.$refs.sliderValidate.reset(),window.setTimeout((function(){e.loginLoading=!1,e.validate_status=!1}),100)}case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},handleChangeFlag:function(){this.showUpdatePwd=!0,this.form.creditCode&&this.form.creditCode.length>=8&&(this.oldPwd=this.form.creditCode.substring(this.form.creditCode.length-8))},handle_jump_before:function(e,t){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.setCreditCodeList(),r.$refs.signedagreement.handle_jump_before(e,t,"/userCenter/baseInfoEE");case 2:case"end":return a.stop()}}),a)})))()},setCreditCodeList:function(){var e=this,t=this.restaurants.some((function(t){if(t.value==e.form.creditCode)return!0}));t||(this.restaurants.push({value:this.form.creditCode}),u.a.set("E-QUICK-CCLIST",JSON.stringify(this.restaurants)))}},watch:{logConfig:{handler:function(e){e&&(this.loginType=e.firstStep[0].value)},deep:!0,immediate:!0},time:{handler:function(e){e<0&&(this.buttonName=this.$i18n.t("language_variable82"),this.time=119,this.getCodeDisabled=!1,window.clearInterval(this.interval))},immediate:!0},loginType:function(e){this.$refs.form.clearValidate(["smscode","password"])}},beforeDestroy:function(){clearInterval(this.interval),this.interval=null},mounted:function(){"3100"===localStorage.getItem("areaPrefix")&&(this.is_TAB=!0),this.restaurants=u.a.get("E-QUICK-CCLIST")?JSON.parse(u.a.get("E-QUICK-CCLIST")):[]}},Z=W,Y=(r("2107"),Object(q["a"])(Z,M,H,!1,null,"598bb7b0",null)),J=Y.exports,K=r("a99c"),G={components:{quickLogin:A,SpecialMainLogin:z["default"],taxCertificateLogin:B,NonResidentLogin:J,loginsvg:K["a"]},props:{idSel:{type:String,default:function(){return""}}},computed:{enterpriseTabList:function(){var e,t,r=[];(null===(e=this.$store.state.settings.logConfig)||void 0===e?void 0:e.enterpriseTabList)&&(r="client"===Object(m["f"])("client_type")&&(null===(t=this.$store.state.settings.logConfig)||void 0===t?void 0:t.enterpriseTabListClient)?this.$store.state.settings.logConfig.enterpriseTabListClient:this.$store.state.settings.logConfig.enterpriseTabList,this.clientId&&this.clientId===(this.$store.state.settings.logConfig&&this.$store.state.settings.logConfig.dpptData&&this.$store.state.settings.logConfig.dpptData[0].clientId)&&(r=r.filter((function(e){return"isNonResidentLogin"!==e.value}))),this.activeLoginType=r[0].value,this.logConfig=r[0]);return r}},data:function(){return{sessionStorage:sessionStorage,logConfig:void 0,activeLoginType:"isActiveTaxC",curParams:Object(m["e"])(),clientId:Object(m["b"])()}},methods:{closePwdDialog:function(){this.$emit("backToFirst")},tabChange:function(e,t){"特定主体登录"==t.name?this.$emit("changeTitle","特定主体"):"非居民企业登录"==t.name?this.$emit("changeTitle","非居民企业"):this.$emit("changeTitle","企业业务"),this.logConfig=t,this.activeLoginType=e},toStepTwo:function(){this.isStepTwo=!0},regist:function(){this.$refs.registerDialog.registerDialog=!0},forgetBtn:function(){var e=this,t=!1,r=window.location.href.split("?")[1];r&&r.split("&").forEach((function(r){if("client_type=client"===r){var a=e.$router.resolve({path:"/forget",query:{client_id:e.clientId?e.clientId:"",client_type:"client",identity:"person"}});t=!0,window.open(a.href,"_blank")}})),t||(this.clientId?this.$router.push({path:"/forget",query:{client_id:this.clientId,identity:"person"}}):this.$router.push({path:"/forget",query:{identity:"person"}}))},findPhone:function(){var e=this,t=!1,r=window.location.href.split("?")[1];r&&r.split("&").forEach((function(r){if("client_type=client"===r){var a=e.$router.resolve({path:"/findPhoneNo",query:{client_id:e.clientId?e.clientId:"",client_type:"client"}});t=!0,window.open(a.href,"_blank")}})),t||(this.clientId?this.$router.push({path:"/findPhoneNo",query:{client_id:this.clientId}}):this.$router.push({path:"/findPhoneNo"}))}},watch:{activeLoginType:function(e){if(e)switch(e){case"isActiveQuick":this.$emit("quickLogin","isActiveQuick");break;case"isActiveQuick1":this.$emit("quickLogin","isActiveQuick");break;case"isActiveTaxC":this.$emit("taxCLogin","isActiveTaxC");break;case"isSpecialLogin":this.$emit("toSpecialLogin","isSpecialLogin");break}}}},X=G,ee=(r("8709"),Object(q["a"])(X,a,i,!1,null,"7b94615c",null));t["default"]=ee.exports},a99c:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",["账号密码登录"==e.type?r("svg",{attrs:{width:"22",height:"19",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("g",{attrs:{id:"kcmkcmk1"}},[r("path",{attrs:{id:"Vector",d:"M3 11H17.1365C17.6307 11 18.1047 11.1816 18.4542 11.5047C18.8037 11.8279 19 12.2662 19 12.7233V18.2767C19 18.7338 18.8037 19.1721 18.4542 19.4953C18.1047 19.8184 17.6307 20 17.1365 20H4.86591C4.62099 20.0003 4.37841 19.9559 4.15204 19.8695C3.92567 19.783 3.71995 19.6561 3.54666 19.496C3.37336 19.336 3.23588 19.1459 3.14208 18.9367C3.04828 18.7275 3 18.5032 3 18.2767V11Z",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),r("path",{attrs:{id:"Vector_2",d:"M3 11V9.23779C3 7.31834 3.80492 5.47749 5.23771 4.12017C6.67051 2.76284 8.61382 2.0002 10.6402 2H11.3598C13.3862 2.0002 15.3295 2.76284 16.7623 4.12017C17.8833 5.18211 18.6199 6.54003 18.8875 8",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])]):e._e(),"短信验证登录"==e.type?r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"19",viewBox:"0 0 22 22",fill:"none"}},[r("g",{attrs:{id:"asjdaojo1"}},[r("path",{attrs:{id:"Vector",d:"M4 4.40463L4 17.5954C4 18.9234 5.19126 20 6.66076 20H15.3392C16.8087 20 18 18.9234 18 17.5954V4.40463C18 3.07659 16.8087 2 15.3392 2H6.66076C5.19126 2 4 3.07659 4 4.40463Z",stroke:"#4285F4","stroke-width":"2","stroke-miterlimit":"10"}}),r("path",{attrs:{id:"Vector_2",d:"M10 17H12",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),r("path",{attrs:{id:"Vector_3",d:"M4 14H18",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])]):e._e(),"数字证书登录"==e.type?r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"19",viewBox:"0 0 22 22",fill:"none"}},[r("g",{attrs:{id:"apsojdpa4"}},[r("path",{attrs:{id:"Vector",d:"M17.2948 3H4.7052C3.21116 3 2 4.19065 2 5.6594V16.3406C2 17.8093 3.21116 19 4.7052 19H17.2948C18.7888 19 20 17.8093 20 16.3406V5.6594C20 4.19065 18.7888 3 17.2948 3Z",stroke:"#4285F4","stroke-width":"2","stroke-miterlimit":"10"}}),r("path",{attrs:{id:"Vector_2",d:"M11 12C12.6569 12 14 10.6569 14 9C14 7.34315 12.6569 6 11 6C9.34315 6 8 7.34315 8 9C8 10.6569 9.34315 12 11 12Z",stroke:"#4285F4","stroke-width":"2","stroke-miterlimit":"10"}}),r("path",{attrs:{id:"Vector_3",d:"M14 9V13.5V16L11.0009 14.7667L8 16V9",stroke:"#4285F4","stroke-width":"2","stroke-miterlimit":"10"}})])]):e._e(),"特定主体登录"==e.type?r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"19",viewBox:"0 0 22 22",fill:"none"}},[r("g",{attrs:{id:"aspjdaps3"}},[r("path",{attrs:{id:"Vector",d:"M17.2948 3H4.7052C3.21116 3 2 4.19065 2 5.6594V16.3406C2 17.8093 3.21116 19 4.7052 19H17.2948C18.7888 19 20 17.8093 20 16.3406V5.6594C20 4.19065 18.7888 3 17.2948 3Z",stroke:"#4285F4","stroke-width":"2","stroke-miterlimit":"10"}}),r("path",{attrs:{id:"Vector_2",d:"M11.0009 6L12.5458 9.29203L16 9.82005L13.5014 12.382L14.0907 16L11.0009 14.2901L7.91115 16L8.50045 12.382L6 9.82005L9.45603 9.29203L11.0009 6Z",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])]):e._e(),"境外自然人登录"==e.type||"非居民企业登录"==e.type?r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"19",viewBox:"0 0 22 23",fill:"none"}},[r("g",{attrs:{id:"oiudsndd1"}},[r("path",{attrs:{id:"Vector",d:"M8.96769 20H2.36433C2.2677 20 2.17503 19.962 2.10671 19.8944C2.03839 19.8267 2 19.735 2 19.6393V2.3607C2 2.26504 2.03839 2.17329 2.10671 2.10565C2.17503 2.038 2.2677 2 2.36433 2H11.6357C11.6835 2 11.7309 2.00933 11.7751 2.02745C11.8193 2.04558 11.8595 2.07215 11.8933 2.10565C11.9271 2.13914 11.954 2.1789 11.9723 2.22266C11.9906 2.26642 12 2.31333 12 2.3607V8.83921",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),r("path",{attrs:{id:"Vector_2",d:"M12 7H19.6367C19.7329 7.00039 19.8251 7.03599 19.8931 7.09907C19.9612 7.16214 19.9996 7.24757 20 7.33676V9",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),r("path",{attrs:{id:"Vector_3",d:"M16 17C17.6569 17 19 15.6569 19 14C19 12.3431 17.6569 11 16 11C14.3431 11 13 12.3431 13 14C13 15.6569 14.3431 17 16 17Z",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),r("path",{attrs:{id:"Vector_4",d:"M19.9999 20C20.0003 19.6284 19.9121 19.2605 19.7405 18.9173C19.6228 18.6818 19.4673 18.4611 19.2788 18.261",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),r("path",{attrs:{id:"Vector_5",d:"M12 20C12 19.2043 12.4214 18.4413 13.1716 17.8787C13.9217 17.3161 14.9391 17 16 17",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),r("path",{attrs:{id:"Vector_6",d:"M5 5H7",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),r("path",{attrs:{id:"Vector_7",d:"M5 10H8",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}}),r("path",{attrs:{id:"Vector_8",d:"M5 14H10",stroke:"#4285F4","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])]):e._e()])},i=[],n={name:"Slice1q",props:["type"]},o=n,s=(r("7d4f"),r("2877")),c=Object(s["a"])(o,a,i,!1,null,"462d3aeb",null);t["a"]=c.exports},abc3:function(e,t,r){"use strict";var a=r("95a1"),i=r.n(a);i.a},ac66:function(e,t,r){},afd7:function(e,t,r){},b06d:function(e,t,r){},b15e:function(e,t,r){"use strict";var a=r("754a"),i=r.n(a);i.a},b464:function(e,t,r){"use strict";var a=r("8e80"),i=r.n(a);i.a},b47d:function(e,t,r){"use strict";var a=r("b876"),i=r.n(a);i.a},b622f:function(e,t,r){"use strict";var a=r("951a"),i=r.n(a);i.a},b757:function(e,t,r){},b769:function(e,t,r){"use strict";var a=r("028ba"),i=r.n(a);i.a},b876:function(e,t,r){},ba64:function(e,t,r){"use strict";var a=r("4869"),i=r.n(a);i.a},bb4e:function(e,t,r){"use strict";var a=r("340c"),i=r.n(a);i.a},bdc1:function(e,t,r){},bfa8:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n})),r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"h",(function(){return c})),r.d(t,"i",(function(){return l})),r.d(t,"j",(function(){return u})),r.d(t,"s",(function(){return d})),r.d(t,"g",(function(){return m})),r.d(t,"m",(function(){return f})),r.d(t,"f",(function(){return g})),r.d(t,"l",(function(){return p})),r.d(t,"t",(function(){return h})),r.d(t,"r",(function(){return v})),r.d(t,"n",(function(){return b})),r.d(t,"o",(function(){return w})),r.d(t,"p",(function(){return _})),r.d(t,"q",(function(){return y})),r.d(t,"e",(function(){return x})),r.d(t,"k",(function(){return C}));var a=r("b775");function i(e){return Object(a["a"])({url:"/auth/specific/quickLogin",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/auth/specific/accountLogin",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/auth/specific/accountSendSmsCode",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/auth/specific/SmsMessageLogin",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/auth/specific/factorAccountLogin",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/auth/specific/factorAccountSendSmsCode",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/auth/specific/factorAccountVerifySmsCode",method:"post",data:e})}function d(e){return Object(a["a"])({url:"/auth/user/second/sendSmsCodeByUuid",method:"post",data:e})}function m(e){return Object(a["a"])({url:"/auth/qrcodeLogin/second/createQRcode",method:"post",data:e})}function f(e){return Object(a["a"])({url:"/auth/specific/qrcodeLogin",method:"post",data:e})}function g(e){return Object(a["a"])({url:"/auth/qrcodeAuth/second/createMulQRcode",method:"post",data:e})}function p(e){return Object(a["a"])({url:"/auth/specific/mulQrcodeLogin",method:"post",data:e})}function h(e){return Object(a["a"])({url:"/auth/specific/quick/zrrLogin",method:"post",data:e})}function v(e){return Object(a["a"])({url:"/auth/specific/selectRegNumber",method:"post",data:e})}function b(e){return Object(a["a"])({url:"/auth/specific/selectCrossInspectionListByUuidIsPage",method:"post",data:e})}function w(e){return Object(a["a"])({url:"/auth/specific/selectCrossInspectionListByUuidNoPage",method:"post",data:e})}function _(e){return Object(a["a"])({url:"/auth/specific/selectCrossTaxSourcelistByUuidIsPage",method:"post",data:e})}function y(e){return Object(a["a"])({url:"/auth/specific/selectCrossTaxSourcelistByUuidNoPage",method:"post",data:e})}function x(e){return Object(a["a"])({url:"/auth/qrcodeAuth/second/createItsQRcode",method:"post",data:e})}function C(e){return Object(a["a"])({url:"/auth/specific/itsQrcodeLogin",method:"post",data:e})}},c580:function(e,t,r){"use strict";var a=r("087d"),i=r.n(a);i.a},c75d:function(e,t,r){"use strict";var a=r("35cc"),i=r.n(a);i.a},c788:function(e,t,r){},c8ce:function(e,t,r){"use strict";var a=r("3e6f"),i=r.n(a);i.a},c961:function(e,t,r){},cb61:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:"用户信息完善",visible:e.fillFormVisible,width:"30%","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.fillFormVisible=t},close:e.closeDialog}},[r("el-row",[r("el-col",[r("el-form",{ref:"fillForm",staticStyle:{height:"100%"},attrs:{model:e.fillForm,"label-width":"120px",rules:e.rules,"label-position":"right"}},[r("el-row",[r("el-col",[r("el-form-item",{attrs:{prop:"fullName",label:"姓名"}},[r("el-input",{attrs:{placeholder:"请输入姓名",maxlength:"255"},model:{value:e.fillForm.fullName,callback:function(t){e.$set(e.fillForm,"fullName",t)},expression:"fillForm.fullName"}})],1)],1),r("el-col",[r("el-form-item",{attrs:{prop:"idCardType",label:"证件类型"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择证件类型",disabled:!0},model:{value:e.fillForm.idCardType,callback:function(t){e.$set(e.fillForm,"idCardType",t)},expression:"fillForm.idCardType"}},e._l(e.IDType,(function(e){return r("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),r("el-col",[r("el-form-item",{attrs:{prop:"idCard",label:"证件号码"}},[r("el-input",{attrs:{placeholder:"请输入证件号码",maxlength:"32",disabled:e.formDisable.idCard},model:{value:e.fillForm.idCard,callback:function(t){e.$set(e.fillForm,"idCard","string"===typeof t?t.trim():t)},expression:"fillForm.idCard"}})],1)],1),r("el-col",[r("el-form-item",{attrs:{prop:"gender",label:"性别"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.formDisable.gender,filterable:"",placeholder:"请选择性别"},model:{value:e.fillForm.gender,callback:function(t){e.$set(e.fillForm,"gender",t)},expression:"fillForm.gender"}},[r("el-option",{attrs:{label:"男",value:"1"}}),r("el-option",{attrs:{label:"女",value:"0"}})],1)],1)],1),r("el-col",[r("el-form-item",{attrs:{prop:"nationality",label:"国籍（地区）"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.formDisable.country,filterable:"",placeholder:"请选择国籍（地区）"},model:{value:e.fillForm.nationality,callback:function(t){e.$set(e.fillForm,"nationality",t)},expression:"fillForm.nationality"}},e._l(e.countryAreaData,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{staticClass:"button-row"},[r("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"nextCls",attrs:{type:"primary"},on:{click:e.submitAction}},[e._v("确认")]),r("el-button",{staticClass:"greyButton",staticStyle:{"margin-left":"60px"},on:{click:e.closeDialog}},[e._v("取消")])],1)],1)],1)],1)],1)],1)},i=[],n=(r("4de4"),r("c975"),r("96cf"),r("1da1")),o=r("7555"),s=r("8732"),c=r("abd2"),l=r("8013"),u=r("cf45"),d={data:function(){return{loading:!1,fillFormVisible:!1,fillForm:{fullName:"",idCardType:"",idCard:"",gender:"",nationality:"",startDate:"",endDate:"",cardValidType:"custom",idCard_full:""},IDType:[],formDisable:{gender:!1,country:!1,idCard:!0},rules:{idCardType:{required:!0,message:"请选择证件类型",trigger:["blur","change"]},idCard:[{required:!0,message:"请填写证件号码",trigger:"blur"}],idCardDate:[{required:!0,message:"请选择证件有效期",trigger:["blur","change"]}],startDate:[{required:!0,message:"请选择开始日期",trigger:"blur"}],endDate:[{required:!0,message:"请选择结束日期",trigger:"blur"}],fullName:[{required:!0,validator:s["a"].fullName,trigger:"blur"},{pattern:/^[^\s]+(\s+[^\s]+)*$/,message:"姓名首尾不能为空格",trigger:"blur"}],nationality:{required:!0,message:"请选择国籍（地区）",trigger:["blur","change"]},gender:[{required:!0,message:"请选择性别",trigger:"blur"}],cardValidType:[{required:!0,message:"请选择证件有效期",trigger:"blur"}]},expireTimeOption:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},startTimeOption:{disabledDate:function(e){return e.getTime()>Date.now()}}}},created:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,i,n,s,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!((null===(r=e.$store.state.settings.logConfig)||void 0===r||null===(a=r.registType)||void 0===a?void 0:a.length)&&(null===(i=e.$store.state.settings.logConfig)||void 0===i||null===(n=i.idTypeList)||void 0===n?void 0:n.length)&&(null===(s=e.$store.state.settings.logConfig)||void 0===s||null===(c=s.areaInfoData)||void 0===c?void 0:c.length))){t.next=4;break}e.IDType=null===(l=e.$store.state.settings.logConfig)||void 0===l?void 0:l.idTypeList,t.next=8;break;case 4:return t.next=6,Object(o["h"])();case 6:u=t.sent,e.IDType=u.datagram.idTypeList;case 8:case"end":return t.stop()}}),t)})))()},watch:{"fillForm.idCardType":function(){"201"==this.fillForm.idCardType&&18==this.fillForm.idCard.length?(this.fillForm.idCard[16]%2==0?this.fillForm.gender="0":this.fillForm.gender="1",this.formDisable.gender=!0):(this.formDisable.gender=!1,this.fillForm.gender=""),this.rules.idCard.length>1&&this.$set(this.rules,"idCard",[{required:!0,message:"请填写证件号码",trigger:"blur"}])}},computed:{countryAreaData:function(){var e=[];if("201"==this.fillForm.idCardType)this.fillForm.nationality="156",this.formDisable.country=!0;else{if("208"==this.fillForm.idCardType)return e=c["d"].filter((function(e){return"156"!=e.value&&"344"!=e.value&&"446"!=e.value&&"158"!=e.value})),this.formDisable.country=!1,this.fillForm.nationality="",e;"210"==this.fillForm.idCardType?(this.fillForm.idCard||(this.formDisable.idCard=!1,this.rules.idCard.push({validator:s["a"].HMCardNumber,trigger:"blur"})),"H"==this.fillForm.idCard[0]?(this.fillForm.nationality="344",this.formDisable.country=!0):"M"==this.fillForm.idCard[0]?(this.fillForm.nationality="446",this.formDisable.country=!0):this.fillForm.nationality=""):"213"==this.fillForm.idCardType?(this.formDisable.country=!0,this.fillForm.idCard||(this.formDisable.idCard=!1,this.rules.idCard.push({validator:s["a"].TWCardNumber,trigger:"blur"})),this.fillForm.nationality="158"):"237"==this.fillForm.idCardType?(this.formDisable.country=!0,this.fillForm.idCard||(this.formDisable.idCard=!1,this.rules.idCard.push({validator:s["a"].HMjzCardNumber,trigger:"blur"})),"810000"==this.fillForm.idCard.substring(0,6)?this.fillForm.nationality="344":"820000"==this.fillForm.idCard.substring(0,6)?this.fillForm.nationality="446":this.fillForm.nationality=""):"238"==this.fillForm.idCardType&&(this.formDisable.country=!0,this.fillForm.idCard||(this.formDisable.idCard=!1,this.rules.idCard.push({validator:s["a"].TWjzCardNumber,trigger:"blur"})),this.fillForm.nationality="158")}return c["d"]}},methods:{chooseValidType:function(e){"forever"==e?this.fillForm.endDate="20991231":(this.fillForm.startDate="",this.fillForm.endDate="")},submitAction:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.fillForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=6;break}return e.loading=!0,a={fullName:e.fillForm.fullName,idCardType:e.fillForm.idCardType,idCard:e.fillForm.idCard.indexOf("*")>-1?e.fillForm.idCard_full:e.fillForm.idCard,gender:e.fillForm.gender,nationality:e.fillForm.nationality},t.next=5,Object(u["a"])(1);case 5:Object(l["d"])(a).then((function(t){1e3==t.code?(e.loading=!1,e.$message.success("您的实名核验已通过，请重新登录"),setTimeout((function(){e.closeDialog()}),1500)):(e.loading=!1,e.$message.error("登录失败，您的实名核验未通过，请核实后重新录入。"))})).catch((function(){e.loading=!1}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},closeDialog:function(){this.$refs.fillForm.resetFields(),this.fillForm.idCard_full="",this.fillFormVisible=!1,this.$emit("cancel",!0)}}},m=d,f=(r("c75d"),r("2877")),g=Object(f["a"])(m,a,i,!1,null,"235eb5ab",null);t["default"]=g.exports},cdb8:function(e,t,r){"use strict";var a=r("07dd"),i=r.n(a);i.a},d204:function(e,t,r){"use strict";var a=r("355e"),i=r.n(a);i.a},d392:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"scanContainer"},[r("div",{staticClass:"text_title_top"},[e._v(" 打开"),"appScan"==e.name&&e.appScan_tips.tips?r("a",{staticStyle:{color:"#4285F4","font-weight":"bold",cursor:"pointer","font-size":"23px","border-bottom":"3px solid #4285F4"},attrs:{href:e.appScan_tips.tips,target:"_blank",rel:"nofollow noopener noreferrer",title:"点击下载"}},[e._v(e._s(e.name_))]):("appScan"!=e.name||e.appScan_tips.tips,r("span",{staticStyle:{color:"#4285F4","font-weight":"bold","font-size":"23px"}},[e._v(e._s(e.name_))])),e._v("扫一扫 ")]),r(e.name,{tag:"component",attrs:{tips:e.tips}}),r("div",{staticClass:"card",style:{"justify-content":1===e.scanCodeTabList.length?"center":"space-between"}},e._l(e.scanCodeTabList,(function(t){return r("div",{key:t.value,class:e.name==t.value?"selected":"unselected",on:{click:function(r){return e.tabChange(t)}}},[e._v(" "+e._s(t.name)+" ")])})),0)],1)},i=[],n=(r("4160"),r("b0c0"),r("ac1f"),r("1276"),r("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("div",{staticStyle:{height:"175px",width:"175px",margin:"0 auto"}},[a("div",{staticStyle:{position:"relative",height:"175px",width:"175px"}},[a("div",{staticClass:"my_border"}),e.codeShow?a("img",{staticClass:"centerLogo",attrs:{src:r("7e9b")}}):e._e(),a("div",{staticStyle:{width:"175px",height:"175px",display:"-webkit-box"},attrs:{id:"qrcodeDiv"}}),!0===e.expired?a("div",{staticClass:"cover",on:{click:e.refreshCode}},[e._m(0)]):e._e()])]),a("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),a("signedagreement",{ref:"signedagreement"})],1)}),o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v(" 请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"1.875rem","line-height":"1.4375rem"}}),e._v("刷新")])}],s=(r("c975"),r("96cf"),r("1da1")),c=r("7f20"),l=r("3352"),u=r("35e0"),d=(r("1115"),r("fc4b")),m=r("0a4f"),f=r("cb61"),g=r("37b6"),p={name:"appScan",components:{fillForm:f["default"],signedagreement:g["default"]},props:["tips"],data:function(){return{exit_variable:!0,list:[],asddd:function(){},dialogVisible:!1,checked:!0,state:!1,interval:null,timeout:null,codeShow:!1,expired:!1,clientId:Object(d["b"])(),redirectURI:Object(d["j"])(),relatedType:Object(d["k"])(),cliState:Object(d["l"])()}},watch:{tips:{handler:function(e){}}},mounted:function(){this.checklogin(1)},beforeDestroy:function(){this.exit_variable=!1},methods:{closeFillForm:function(){location.reload()},getRedirectURIP:function(){var e=Object(d["j"])();return e},checklogin:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t,Object(c["a"])({}).then((function(e){window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.showQRCode(e.datagram.qrcode),r.CheckState(e.datagram.qrcode_id),r.setQRCodeTimeout()})).catch((function(e){window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0}));case 2:case"end":return e.stop()}}),e)})))()},toRedirect:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t,r.next=3,Object(m["b"])();case 3:i=r.sent,i?(n=i.indexOf("?")>=0?"&code=":"?code=",window.location.href=i+n+e.datagram.code+(a.cliState?"&state="+a.cliState:"")):a.redirectURI?t.checkUrl(e):t.noRedirectUrl();case 5:case"end":return r.stop()}}),r)})))()},checkUrl:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t,r.prev=1,r.next=4,Object(u["a"])({redirect_uri:t.redirectURI});case 4:if(i=r.sent,!i||"0"!==i.datagram.yxbz){r.next=8;break}return t.noRedirectUrl(),r.abrupt("return");case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r["catch"](1),t.noRedirectUrl(),r.abrupt("return");case 14:n=a.redirectURI.indexOf("?")>=0?"&code=":"?code=",window.location.href=a.redirectURI+n+e.datagram.code+(a.cliState?"&state="+a.cliState:"");case 16:case"end":return r.stop()}}),r,null,[[1,10]])})))()},noRedirectUrl:function(){var e=this,t=localStorage.getItem("userType");1==t?e.$router.push("/userCenter/baseInfoP"):2==t&&e.$router.push("/userCenter/baseInfoEE")},CheckState:function(e){var t=this,r=this;r.expired||(r.interval=window.setTimeout((function(){if(t.$store.state.app.stop_QR)return r.expired=!0,void(t.exit_variable=!1);var a={qrcode_id:e};Object(c["c"])(a).then(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(i){var n,o,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1e3!=i.code||!i.datagram){a.next=29;break}if(2!=i.datagram.qrcode_status){a.next=26;break}return window.clearTimeout(r.interval),window.clearTimeout(r.timeout),localStorage.setItem("token",i.datagram.access_token),t.$cookie.set("token",i.datagram.access_token),localStorage.setItem("code",i.datagram.code),a.next=9,Object(m["a"])(i.datagram.access_token);case 9:if(n=a.sent,o=n.userformInfo,s=n.pass,c=n.userInfo,s){a.next=22;break}return r.$refs.fillformDialog.fillForm=o,r.$refs.fillformDialog.fillFormVisible=!0,window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,a.abrupt("return");case 22:return r.handle_jump_before(i,c),a.abrupt("return");case 24:a.next=27;break;case 26:1==i.datagram.qrcode_status?t.exit_variable&&r.CheckState(e):3==i.datagram.qrcode_status&&(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0);case 27:a.next=33;break;case 29:window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,i.msg&&r.$message({customClass:"el-icon-warning-color",message:i.msg,type:"warning"});case 33:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(r.interval),r.CheckState(e)):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0)}))}),4e3))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),window.clearTimeout(e.interval),e.expired=!0}),6e5)},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.checklogin(1)},loginTypeBtn:function(e){this.$emit("getType",e)},showQRCode:function(e){var t=document.getElementById("qrcodeDiv");t.innerHTML="";var r=new QRCode(t,{text:e,width:175,height:175});r._el.title="",this.codeShow=!0},handle_jump_before:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$refs.signedagreement.handle_jump_before(e,t,"twoPath");case 1:case"end":return a.stop()}}),a)})))()}}},h=p,v=(r("35e2"),r("2877")),b=Object(v["a"])(h,n,o,!1,null,"5aba0994",null),w=b.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("div",{staticStyle:{height:"175px",width:"175px",margin:"0 auto"}},[a("div",{staticStyle:{position:"relative",height:"175px",width:"175px"}},[a("div",{staticClass:"my_border"}),e.codeShow?a("img",{staticClass:"centerLogo",attrs:{src:r("7e9b")}}):e._e(),a("img",{attrs:{id:"qrcodeDiv1"}}),!0===e.expired?a("div",{staticClass:"cover",on:{click:e.refreshCode}},[e._m(0)]):e._e()])]),a("el-dialog",{attrs:{title:e.agreementName,visible:e.dialogAgreement,"append-to-body":"","close-on-click-modal":!1,width:"813px"},on:{"update:visible":function(t){e.dialogAgreement=t}}},[a("div",{domProps:{innerHTML:e._s(e.agreementText)}}),a("div",{staticClass:"button dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogAgreement=!1}}},[e._v("确 定")])],1)]),a("IDTypeShoose",{ref:"IDTypeShoose",on:{tempRelatedType:e.tempRelatedType}}),a("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),a("signedagreement",{ref:"signedagreement"}),a("qr-code",{ref:"qrCode",on:{handleServiceAgreement:e.handleServiceAgreement,submitA:e.submitA,handleClose:e.handleClose}})],1)},y=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v(" 请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"1.875rem","line-height":"1.4375rem"}}),e._v("刷新")])}],x=r("ade3"),C=r("8013"),T=r("17c9"),k=r("549d"),S=r("457b"),R=r("05ec"),$=r("c7e3"),I=r("cf45"),j={name:"dzlicenseScan",components:{QrCode:S["a"],IDTypeShoose:k["a"],fillForm:f["default"],signedagreement:g["default"]},props:["tips"],data:function(){var e;return e={uuid:"",relatedType:"",showRelatedType:[],relationTypes:[],agreementText:"",agreementName:"",dialogAgreement:!1,checkTrustedLevel_:null,areaPrefix:"",is_TAB:!1,areaInfoData:[],areaName:"",exit_variable:!0,temploginCode:"",state:!1,interval:null,timeout:null,codeShow:!1,expired:!1,clientId:Object(d["b"])(),redirectURI:Object(d["j"])()},Object(x["a"])(e,"relatedType",Object(d["k"])()),Object(x["a"])(e,"cliState",Object(d["l"])()),e},mounted:function(){"3100"===localStorage.getItem("areaPrefix")&&(this.is_TAB=!0),this.licenceCreateQRCode(1)},beforeDestroy:function(){this.exit_variable=!1},methods:{handleClose:function(){localStorage.removeItem("token"),this.$cookie.remove("token"),location.reload()},closeFillForm:function(){location.reload()},getRedirectURIP:function(){var e=Object(d["j"])();return e},submitA:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={uid:e.checkTrustedLevel_.uid,fid:e.checkTrustedLevel_.fid,relatedType:e.relatedType,reg_number:e.checkTrustedLevel_.reg_number,qrCode_id:e.$refs.qrCode.qrCode_id},t.next=3,Object($["e"])(r);case 3:return t.next=5,e.push_login();case 5:case"end":return t.stop()}}),t)})))()},handleServiceAgreement:function(){this.dialogAgreement=!0},handle_authorize:function(){var e=this,t=this;if(!this.is_TAB)return t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(this.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,void t.$refs.qrCode.creatVerifyQRCode("1");Object(l["f"])({uid:this.checkTrustedLevel_.uid,agreementCode:"03"}).then((function(r){"1000"==r.code&&(Object(l["e"])({agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(t){"1000"==t.code&&(e.agreementText=t.datagram.agreementText,e.agreementName=t.datagram.agreementName)})),"0"==r.datagram[0].signingStatus?(e.$alert('<p>您尚未签订<span style="color:#4285F4;cursor:pointer;" id="service_agreement">《'.concat(r.datagram[0].agreementName,"》</span>，请先阅读协议并确认是否同意签订。如果您不同意，您可持有效身份证件前往线下办税服务场所办理业务。</p>"),"提示",{dangerouslyUseHTMLString:!0,showCancelButton:!0,showConfirmButton:!0,cancelButtonText:"不同意",confirmButtonText:"同意",cancelButtonClass:"my_cancelButtonClass",confirmButtonClass:"my_confirmButtonClass"}).then((function(){Object(l["k"])({uid:e.checkTrustedLevel_.uid,agreementCode:"03",agreementVersion:r.datagram[0].agreementVersion}).then((function(r){"1000"==r.code&&(t.$refs.qrCode.row2=t.form,t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(e.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,t.$refs.qrCode.creatVerifyQRCode("1"))}))})).catch((function(){t.$refs.qrCode.dialogVisible=!1})),e.$nextTick((function(){var t=document.querySelector("#service_agreement");t.onclick=e.handleServiceAgreement}))):"1"==r.datagram[0].signingStatus&&(t.$refs.qrCode.title="确认授权",t.$refs.qrCode.tip="请您使用"+("4200"==localStorage.getItem("areaPrefix")?"楚税通":"".concat(e.areaName,"税务"))+"APP扫描下方二维码，完成关联关系确认",t.$refs.qrCode.dialogVisible=!0,t.$refs.qrCode.creatVerifyQRCode("1")))}))},tempRelatedType:function(e){var t=this;this.relatedType=e.relatedType;"00"!=e.qrzt?this.$confirm("是否确认成为该企业的"+e.relatedTypeName+"?","提示",{confirmButtonText:"确定",showCancelButton:!1}).then(Object(s["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a={relatedType:e.relatedType,client_id:t.clientId,redirect_uri:t.redirectURI,uuid:t.uuid},Object(T["G"])(a).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(r){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(setTimeout((function(){t.$store.dispatch("app/getIdentityLoad",!1)}),8e3),"N"!==r.datagram.sfsl){e.next=18;break}if("四级"==r.datagram.trusted_level||"五级"==r.datagram.trusted_level||"4"==r.datagram.trusted_level||"5"==r.datagram.trusted_level||"1"==r.datagram.overseas){e.next=9;break}localStorage.setItem("token",r.datagram.access_token),t.$cookie.set("token",r.datagram.access_token),t.checkTrustedLevel_=r.datagram,t.handle_authorize(),e.next=16;break;case 9:return localStorage.setItem("token",r.datagram.access_token),t.$cookie.set("token",r.datagram.access_token),a={uid:r.datagram.uid,fid:r.datagram.fid,reg_number:r.datagram.reg_number,relatedType:t.relatedType},e.next=14,Object($["c"])(a);case 14:return e.next=16,t.push_login();case 16:e.next=29;break;case 18:if("Y"!==r.datagram.sfsl){e.next=28;break}return localStorage.setItem("token",r.datagram.access_token),t.$cookie.set("token",r.datagram.access_token),i={uid:r.datagram.uid,fid:r.datagram.fid,reg_number:r.datagram.reg_number,relatedType:t.relatedType},e.next=24,Object($["c"])(i);case 24:return e.next=26,t.push_login();case 26:e.next=29;break;case 28:t.push_login();case 29:return e.abrupt("return");case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})))).catch(Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return setTimeout((function(){t.$store.dispatch("app/getIdentityLoad",!1)}),8e3),e.next=3,Object(I["a"])(1);case 3:case"end":return e.stop()}}),e)})))):this.push_login()},push_login:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,localStorage.removeItem("token");case 2:return t.next=4,e.$cookie.remove("token");case 4:return t.next=6,Object(I["a"])(1);case 6:r=e,Object(T["B"])({client_id:r.clientId,redirect_uri:r.redirectURI,relatedType:e.relatedType,uuid:e.uuid}).then(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(r){var a,i,n,o,s,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(1e3!==r.code){t.next=20;break}return a=e,localStorage.setItem("token",r.datagram.access_token),e.$cookie.set("token",r.datagram.access_token),localStorage.setItem("code",r.datagram.code),t.next=7,Object(m["a"])(r.datagram.access_token);case 7:if(i=t.sent,n=i.userformInfo,o=i.pass,s=i.userInfo,o){t.next=17;break}return a.$refs.fillformDialog.fillForm=n,a.$refs.fillformDialog.fillFormVisible=!0,t.abrupt("return");case 17:return a.handle_jump_before(r,s),t.abrupt("return");case 19:a.redirectURI?(c=Object(d["i"])(a.redirectURI),c?a.$router.push(c):(l=a.redirectURI.indexOf("?")>=0?"&code=":"?code=",window.location.href=a.redirectURI+l+r.datagram.code+(a.cliState?"&state="+a.cliState:""))):(u=localStorage.getItem("userType"),1==u?a.$router.push("/userCenter/baseInfoP"):2==u&&a.$router.push("/userCenter/baseInfoEE"));case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t)})))()},licenceCreateQRCode:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t,Object(C["f"])({client_id:r.clientId,redirect_uri:r.redirectURI}).then((function(e){window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.showQRCode(e.datagram.qrcode),r.CheckState(e.datagram.qrcode_id),r.setQRCodeTimeout()})).catch((function(e){window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0}));case 2:case"end":return e.stop()}}),e)})))()},init:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(R["h"])({}).then((function(t){e.relationTypes=t.datagram})).catch((function(){}));case 2:case"end":return t.stop()}}),t)})))()},showRelatedTypeName:function(e){for(var t=0;t<this.relationTypes.length;t++)if(this.relationTypes[t].relationTypeCode===e)return this.relationTypes[t].relationTypeName},toRedirect:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t,r.next=3,Object(m["b"])();case 3:i=r.sent,i?(n=i.indexOf("?")>=0?"&code=":"?code=",window.location.href=i+n+e.datagram.code+(a.cliState?"&state="+a.cliState:"")):a.redirectURI?t.checkUrl(e):t.noRedirectUrl();case 5:case"end":return r.stop()}}),r)})))()},checkUrl:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t,r.prev=1,r.next=4,Object(u["a"])({redirect_uri:t.redirectURI});case 4:if(i=r.sent,!i||"0"!==i.datagram.yxbz){r.next=8;break}return t.noRedirectUrl(),r.abrupt("return");case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r["catch"](1),t.noRedirectUrl(),r.abrupt("return");case 14:n=a.redirectURI.indexOf("?")>=0?"&code=":"?code=",window.location.href=a.redirectURI+n+e.datagram.code+(a.cliState?"&state="+a.cliState:"");case 16:case"end":return r.stop()}}),r,null,[[1,10]])})))()},noRedirectUrl:function(){var e=this,t=localStorage.getItem("userType");1==t?e.$router.push("/userCenter/baseInfoP"):2==t&&e.$router.push("/userCenter/baseInfoEE")},CheckState:function(e){var t=this,r=this;r.expired||(r.interval=window.setTimeout((function(){if(t.$store.state.app.stop_QR)return r.expired=!0,void(t.exit_variable=!1);var a={client_id:r.clientId,redirect_uri:r.redirectURI,qrcode_id:e};Object(C["a"])(a).then(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(i){var n,o,s,c,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1e3!=i.code||!i.datagram){a.next=46;break}if(t.uuid=i.datagram.code,2!=i.datagram.qrcode_status){a.next=43;break}if(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),i.datagram.access_token){a.next=24;break}if(1!==i.datagram.relationPoList.length){a.next=13;break}return a.next=9,t.init();case 9:return a.next=11,t.tempRelatedType({qrzt:i.datagram.relationPoList[0].qrzt,relatedType:i.datagram.relationPoList[0].zrrlx,relatedTypeName:t.showRelatedTypeName(i.datagram.relationPoList[0].zrrlx)});case 11:a.next=22;break;case 13:for(n=[],o=0;o<i.datagram.relationPoList.length;o++)n.push(i.datagram.relationPoList[o].zrrlx);return t.$refs.IDTypeShoose.showRelatedType=n,t.$refs.IDTypeShoose.relationPoList=i.datagram.relationPoList,t.$refs.IDTypeShoose.uuid=t.uuid,t.$refs.IDTypeShoose.relatedType=n[0],a.next=21,t.$refs.IDTypeShoose.init();case 21:t.$refs.IDTypeShoose.IDTypeVisible=!0;case 22:a.next=41;break;case 24:return localStorage.setItem("token",i.datagram.access_token),t.$cookie.set("token",i.datagram.access_token),localStorage.setItem("code",i.datagram.code),a.next=29,Object(m["a"])(i.datagram.access_token);case 29:if(s=a.sent,c=s.userformInfo,l=s.pass,s.userInfo,l){a.next=40;break}return r.$refs.fillformDialog.fillForm=c,r.$refs.fillformDialog.fillFormVisible=!0,window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,a.abrupt("return");case 40:t.toRedirect(i);case 41:a.next=44;break;case 43:1==i.datagram.qrcode_status?t.exit_variable&&r.CheckState(e):3==i.datagram.qrcode_status&&(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0);case 44:a.next=50;break;case 46:window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,i.msg&&r.$message({customClass:"el-icon-warning-color",message:i.msg,type:"warning"});case 50:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(r.interval),r.CheckState(e)):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0)}))}),4e3))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),window.clearTimeout(e.interval),e.expired=!0}),6e5)},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.licenceCreateQRCode(1)},loginTypeBtn:function(e){this.$emit("getType",e)},showQRCode:function(e){var t=document.getElementById("qrcodeDiv1");t.src="data:image/png;base64,"+e},handle_jump_before:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$refs.signedagreement.handle_jump_before(e,t,"twoPath");case 1:case"end":return a.stop()}}),a)})))()}}},O=j,q=(r("3c38"),Object(v["a"])(O,_,y,!1,null,"961c5ec4",null)),L=q.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[a("div",{staticStyle:{height:"175px",width:"175px",margin:"0 auto"}},[a("div",{staticStyle:{position:"relative",height:"175px",width:"175px"}},[a("div",{staticClass:"my_border"}),e.codeShow?a("img",{staticClass:"centerLogo",attrs:{src:r("7e9b")}}):e._e(),a("div",{staticStyle:{width:"175px",height:"175px",display:"-webkit-box"},attrs:{id:"qrcodeDiv"}}),!0===e.expired?a("div",{staticClass:"cover",on:{click:e.refreshCode}},[e._m(0)]):e._e()])]),a("div"),a("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),a("signedagreement",{ref:"signedagreement"})],1)},D=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v(" 请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"1.875rem","line-height":"1.4375rem"}}),e._v("刷新")])}],P={name:"govermentScan",components:{fillForm:f["default"],signedagreement:g["default"]},props:["tips"],data:function(){return{exit_variable:!0,state:!1,interval:null,timeout:null,codeShow:!1,expired:!1,clientId:Object(d["b"])(),creditCode:Object(d["d"])(),redirectURI:Object(d["j"])(),relatedType:Object(d["k"])(),cliState:Object(d["l"])()}},mounted:function(){this.goveCreateQrcode(1)},beforeDestroy:function(){this.exit_variable=!1},methods:{closeFillForm:function(){location.reload()},getRedirectURIP:function(){var e=Object(d["j"])();return e},goveCreateQrcode:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t,Object(C["b"])({client_id:t.clientId,redirect_uri:r.redirectURI,trust_code:r.creditCode,relatedType:r.relatedType}).then((function(e){window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.showQRCode(e.datagram.qrcode),r.CheckState(e.datagram.qrcode_id),r.setQRCodeTimeout()})).catch((function(e){window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0}));case 2:case"end":return e.stop()}}),e)})))()},toRedirect:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t,r.next=3,Object(m["b"])();case 3:i=r.sent,i?(n=i.indexOf("?")>=0?"&code=":"?code=",window.location.href=i+n+e.datagram.code+(a.cliState?"&state="+a.cliState:"")):a.redirectURI?t.checkUrl(e):t.noRedirectUrl();case 5:case"end":return r.stop()}}),r)})))()},checkUrl:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t,r.prev=1,r.next=4,Object(u["a"])({redirect_uri:t.redirectURI});case 4:if(i=r.sent,!i||"0"!==i.datagram.yxbz){r.next=8;break}return t.noRedirectUrl(),r.abrupt("return");case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r["catch"](1),t.noRedirectUrl(),r.abrupt("return");case 14:n=a.redirectURI.indexOf("?")>=0?"&code=":"?code=",window.location.href=a.redirectURI+n+e.datagram.code+(a.cliState?"&state="+a.cliState:"");case 16:case"end":return r.stop()}}),r,null,[[1,10]])})))()},noRedirectUrl:function(){var e=this,t=localStorage.getItem("userType");1==t?e.$router.push("/userCenter/baseInfoP"):2==t&&e.$router.push("/userCenter/baseInfoEE")},CheckState:function(e){var t=this,r=this;r.expired||(r.interval=window.setTimeout((function(){if(t.$store.state.app.stop_QR)return r.expired=!0,void(t.exit_variable=!1);var a={client_id:r.clientId,qrcode_id:e,redirect_uri:r.redirectURI};Object(C["c"])(a).then(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(i){var n,o,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1e3!=i.code||!i.datagram){a.next=29;break}if(2!=i.datagram.qrcode_status){a.next=26;break}return window.clearTimeout(r.interval),window.clearTimeout(r.timeout),localStorage.setItem("token",i.datagram.access_token),t.$cookie.set("token",i.datagram.access_token),localStorage.setItem("code",i.datagram.code),a.next=9,Object(m["a"])(i.datagram.access_token);case 9:if(n=a.sent,o=n.userformInfo,s=n.pass,c=n.userInfo,s){a.next=22;break}return r.$refs.fillformDialog.fillForm=o,r.$refs.fillformDialog.fillFormVisible=!0,window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,a.abrupt("return");case 22:return r.handle_jump_before(i,c),a.abrupt("return");case 24:a.next=27;break;case 26:1==i.datagram.qrcode_status?t.exit_variable&&r.CheckState(e):3==i.datagram.qrcode_status&&(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0);case 27:a.next=33;break;case 29:window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,i.msg&&r.$message({customClass:"el-icon-warning-color",message:i.msg,type:"warning"});case 33:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(r.interval),r.CheckState(e)):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0)}))}),4e3))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),window.clearTimeout(e.interval),e.expired=!0}),6e5)},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.goveCreateQrcode(1)},loginTypeBtn:function(e){this.$emit("getType",e)},showQRCode:function(e){var t=document.getElementById("qrcodeDiv");t.innerHTML="";var r=new QRCode(t,{text:e,width:175,height:175});r._el.title="",this.codeShow=!1},handle_jump_before:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$refs.signedagreement.handle_jump_before(e,t,"twoPath");case 1:case"end":return a.stop()}}),a)})))()}}},N=P,F=(r("4d03"),Object(v["a"])(N,A,D,!1,null,"a85ec046",null)),V=F.exports,Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{height:"100%",width:"100%",position:"relative"}},[r("div",{staticStyle:{height:"175px",width:"175px",margin:"0 auto",position:"relative"}},[r("div",{staticClass:"my_border"}),r("img",{attrs:{id:"qrcodeDiv",alt:""}}),!0===e.expired?r("div",{staticClass:"cover",on:{click:e.refreshCode}},[e._m(0)]):e._e()]),r("fill-form",{ref:"fillformDialog",on:{cancel:e.closeFillForm}}),r("signedagreement",{ref:"signedagreement"}),r("updatepwdword",{ref:"updatepwdword",attrs:{showUpdatePwd:e.showUpdatePwd},on:{xiugaimima:e.xiugaimima}})],1)},U=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{staticClass:"check"},[e._v(" 请点击"),r("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"1.875rem","line-height":"1.4375rem"}}),e._v("刷新")])}],E=r("1cb3"),B=r("a023"),z={name:"appScan",components:{signedagreement:g["default"],updatepwdword:B["default"],fillForm:f["default"]},props:["tips"],data:function(){return{exit_variable:!0,list:[],pageRes:null,asddd:function(){},dialogVisible:!1,checked:!0,state:!1,interval:null,timeout:null,codeShow:!1,expired:!1,clientId:Object(d["b"])(),redirectURI:Object(d["j"])(),relatedType:Object(d["k"])(),cliState:Object(d["l"])(),showUpdatePwd:!1}},mounted:function(){this.checklogin()},beforeDestroy:function(){this.exit_variable=!1},methods:{closeFillForm:function(){location.reload()},getRedirectURIP:function(){var e=Object(d["j"])();return e},checklogin:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t,Object(E["o"])({}).then((function(e){window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.showQRCode(e.datagram.qrcode),r.CheckState(e.datagram.qrcode_id),r.setQRCodeTimeout()})).catch((function(e){window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0}));case 2:case"end":return e.stop()}}),e)})))()},xiugaimima:function(){var e=this,t=localStorage.getItem("userType");if(e.redirectURI){2==t&&(e.redirectURI=Object(d["j"])());var r=Object(d["i"])(e.redirectURI);if(r)e.$router.push(r);else{var a=e.redirectURI.indexOf("?")>=0?"&code=":"?code=";window.location.href=e.redirectURI+a+this.pageRes.datagram.code+(e.cliState?"&state="+e.cliState:"")}}else 1==t?e.$router.push("/userCenter/baseInfoP"):2==t&&e.$router.push("/userCenter/baseInfoEE")},toRedirect:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t,r.next=3,Object(m["b"])();case 3:i=r.sent,i?(n=i.indexOf("?")>=0?"&code=":"?code=",window.location.href=i+n+e.datagram.code+(a.cliState?"&state="+a.cliState:"")):a.redirectURI?t.checkUrl(e):t.noRedirectUrl();case 5:case"end":return r.stop()}}),r)})))()},checkUrl:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=t,r.prev=1,r.next=4,Object(u["a"])({redirect_uri:t.redirectURI});case 4:if(i=r.sent,!i||"0"!==i.datagram.yxbz){r.next=8;break}return t.noRedirectUrl(),r.abrupt("return");case 8:r.next=14;break;case 10:return r.prev=10,r.t0=r["catch"](1),t.noRedirectUrl(),r.abrupt("return");case 14:n=a.redirectURI.indexOf("?")>=0?"&code=":"?code=",window.location.href=a.redirectURI+n+e.datagram.code+(a.cliState?"&state="+a.cliState:"");case 16:case"end":return r.stop()}}),r,null,[[1,10]])})))()},noRedirectUrl:function(){var e=this,t=localStorage.getItem("userType");1==t?e.$router.push("/userCenter/baseInfoP"):2==t&&e.$router.push("/userCenter/baseInfoEE")},CheckState:function(e){var t=this,r=this;r.expired||(r.interval=window.setTimeout((function(){if(t.$store.state.app.stop_QR)return r.expired=!0,void(t.exit_variable=!1);var a={client_id:r.clientId,redirect_uri:r.redirectURI,qrcode_id:e};Object(E["s"])(a).then(function(){var a=Object(s["a"])(regeneratorRuntime.mark((function a(i){var n,o,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1e3!=i.code||!i.datagram){a.next=33;break}if(2!=i.datagram.qrcode_status){a.next=30;break}return t.pageRes=i,window.clearTimeout(r.interval),window.clearTimeout(r.timeout),localStorage.setItem("token",i.datagram.access_token),t.$cookie.set("token",i.datagram.access_token),localStorage.setItem("code",i.datagram.code),a.next=10,Object(m["a"])(i.datagram.access_token);case 10:if(n=a.sent,o=n.userformInfo,s=n.pass,c=n.userInfo,s){a.next=23;break}return r.$refs.fillformDialog.fillForm=o,r.$refs.fillformDialog.fillFormVisible=!0,window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,a.abrupt("return");case 23:if("0"!=c.isHavePsw){a.next=26;break}return t.showUpdatePwd=!0,a.abrupt("return",!1);case 26:return r.handle_jump_before(i,c),a.abrupt("return");case 28:a.next=31;break;case 30:1==i.datagram.qrcode_status?t.exit_variable&&r.CheckState(e):3==i.datagram.qrcode_status&&(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0);case 31:a.next=37;break;case 33:window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0,i.msg&&r.$message({customClass:"el-icon-warning-color",message:i.msg,type:"warning"});case 37:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(t){t&&t.stack&&t.stack.indexOf("handleTimeout")>=0?(window.clearTimeout(r.interval),r.CheckState(e)):(window.clearTimeout(r.interval),window.clearTimeout(r.timeout),r.expired=!0)}))}),4e3))},setQRCodeTimeout:function(){var e=this;window.clearTimeout(e.timeout),e.timeout=window.setTimeout((function(){window.clearTimeout(e.timeout),window.clearTimeout(e.interval),e.expired=!0}),6e5)},refreshCode:function(){window.clearTimeout(this.interval),window.clearTimeout(this.timeout),this.expired=!1,this.checklogin(1)},loginTypeBtn:function(e){this.$emit("getType",e)},showQRCode:function(e){var t=document.getElementById("qrcodeDiv");t.src="data:image/jpg;base64,"+e,this.codeShow=!0},handle_jump_before:function(e,t){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$refs.signedagreement.handle_jump_before(e,t,"twoPath");case 1:case"end":return a.stop()}}),a)})))()}}},M=z,H=(r("3f41"),Object(v["a"])(M,Q,U,!1,null,"65cfcca2",null)),W=H.exports,Z=r("d5c2"),Y={components:{appScan:w,dzlicenseScan:L,govermentScan:V,personTaxScan:W,regist:Z["default"]},props:{},computed:{scanCodeTabList:function(){var e=this,t=[],r=window.location.href.split("?")[1];r?(r.split("&").forEach((function(r){"client_type=client"===r?t=e.$store.state.settings.logConfig.scanCodeTabListClient:"client_type=np"===r&&(t=e.$store.state.settings.logConfig.scanCodeTabListNp)})),t&&t.length||(t=this.$store.state.settings.logConfig.scanCodeTabList)):t=this.$store.state.settings.logConfig.scanCodeTabList,t.forEach((function(t){"appScan"==t.value&&(e.appScan_tips=t)}));var a=localStorage.getItem("areaPrefix");return"3100"==a?(this.name=t[2].value,this.name_=t[2].name,this.tips=t[2].tips):(this.name=t[0].value,this.name_=t[0].name,this.tips=t[0].tips),t}},data:function(){return{name:"",name_:"",tips:"",appScan_tips:{}}},methods:{tabChange:function(e){this.tips=e.tips,this.name=e.value,this.name_=e.name},regist:function(){var e=this,t=!1,r=window.location.href.split("?")[1];r&&r.split("&").forEach((function(r){if("client_type=client"===r){var a=e.$router.resolve({path:"/register",query:{client_id:e.clientId?e.clientId:"",client_type:"client"}});t=!0,window.open(a.href,"_blank")}})),t||(this.clientId?this.$router.push({path:"/register",query:{client_id:this.clientId}}):this.$router.push({path:"/register"}))},forgetBtn:function(){this.$refs.forgetDialog.forgetDialog=!0}}},J=Y,K=(r("497e"),Object(v["a"])(J,a,i,!1,null,"1786c092",null));t["default"]=K.exports},d4c3f:function(e,t,r){"use strict";var a=r("53f8"),i=r.n(a);i.a},d7e0:function(e,t,r){"use strict";r.d(t,"h",(function(){return u})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return m})),r.d(t,"i",(function(){return f})),r.d(t,"b",(function(){return g})),r.d(t,"d",(function(){return p})),r.d(t,"c",(function(){return h})),r.d(t,"l",(function(){return v})),r.d(t,"j",(function(){return y})),r.d(t,"k",(function(){return x})),r.d(t,"a",(function(){return C})),r.d(t,"e",(function(){return T}));r("d3b7");var a=r("53ca"),i=(r("c975"),r("bc3a")),n=r.n(i),o=r("5c96"),s=n.a.create({baseURL:"https://127.0.0.1:28000/api",timeout:1e5});s.interceptors.request.use((function(e){return e.headers["Content-Type"]="application/json",e}),(function(e){return Promise.reject(e)})),s.interceptors.response.use((function(e){var t=e.data;return 0!==t.code&&167!=t.code?(Object(o["Message"])({customClass:"el-icon-warning-color",message:t.msg||"Error",type:"warning",duration:5e3}),Promise.reject(new Error(t.msg||"Error"))):t}),(function(e){var t=!0;if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录";break;case 403:e.message="拒绝访问";break;case 404:e.message="请求地址出错: ".concat(e.response.config.url);break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持";break;default:break}else e&&e.stack&&e.stack.indexOf("handleTimeout")>=0?e.message="认证超时，请稍后重试":e.message="税务安全证书应用客户端未安装或未启动";return e&&e.config,t&&Object(o["Message"])({customClass:"el-icon-warning-color",message:res.message||"Error",type:"warning",duration:5e3}),Promise.reject(e)}));var c=s,l=r("b775");function u(e){return Object(l["a"])({url:"/auth/cert/serverHello",method:"post",data:e})}function d(e){return Object(l["a"])({url:"/auth/cert/loginServerHello",method:"post",data:e})}function m(e){return Object(l["a"])({url:"/auth/cert/serverAuth",method:"post",data:e})}function f(e){return b({url:"/getVersion",method:"post",data:e})}function g(e){return _({url:"/checkKey",method:"post",data:e})}function p(e){return _({url:"/clientHello",method:"post",data:e})}function h(e){return b({url:"/clientAuth",method:"post",data:e})}function v(e){return Object(l["a"])({url:"/auth/cert/serverAuthRandom",method:"post",data:e})}function b(e){return e&&e.data&&"1"==e.data.crosFlag?w(e):c(e)}function w(e){return new Promise((function(t,r){var i=e.method||"post";void 0!==e.url&&0!==e.url.length||r(new Error("URL参数错误"));var n="https://127.0.0.1:28000/api"+e.url,s=e.data,c=document.createElement("form");if(c.setAttribute("action",n),c.setAttribute("method",i),"object"===Object(a["a"])(s))for(var l in s){var u=document.createElement("input");u.setAttribute("name",l),u.setAttribute("value",s[l]),c.appendChild(u)}var d,m=document.querySelector("body"),f=document.createElement("iframe");f.setAttribute("height","0"),f.setAttribute("width","0"),f.setAttribute("border","0"),f.setAttribute("wmode","Opaque"),f.setAttribute("style","position:absolute;top:-999;left:-999;border: none;"),m.appendChild(f);try{var g=f.contentWindow||f.contentDocument||f,p=g.document||g.contentDocument||g,h="crossForm"+Math.floor(1e4*Math.random());c.setAttribute("id",h),p.write("<div>"+c.outerHTML+"</div>"),setTimeout((function(){window.removeEventListener("message",v),window.addEventListener("message",v);var e=p.getElementById(h);e.submit()}),100),d=setTimeout((function(){clearTimeout(d),window.removeEventListener("message",v),"function"===typeof f.remove?f.remove():m.removeChild(f);var e="访问超时，请检查客户端服务是否正常";Object(o["Message"])({customClass:"el-icon-warning-color",message:e,type:"warning",duration:5e3}),r(new Error(e))}),6e4)}catch(b){clearTimeout(d),window.removeEventListener("message",v),"function"===typeof f.remove?f.remove():m.removeChild(f),r(b)}function v(e){clearTimeout(d),window.removeEventListener("message",v),"function"===typeof f.remove?f.remove():m.removeChild(f);var a=e.data||"";"string"==typeof a&&(a=JSON.parse(a)),0!==a.code?(Object(o["Message"])({customClass:"el-icon-warning-color",message:a.msg||"Error",type:"warning",duration:5e3}),r(new Error(a.msg||"Error"))):t(a)}}))}function _(e){return new Promise((function(t,r){var i=e.method||"post";void 0!==e.url&&0!==e.url.length||r(new Error("URL参数错误"));var n="https://127.0.0.1:28000/api"+e.url,s=e.data,c=document.createElement("form");if(c.setAttribute("action",n),c.setAttribute("method",i),"object"===Object(a["a"])(s))for(var l in s){var u=document.createElement("input");u.setAttribute("name",l),u.setAttribute("value",s[l]),c.appendChild(u)}var d,m=document.querySelector("body"),f=document.createElement("iframe");f.setAttribute("height","0"),f.setAttribute("width","0"),f.setAttribute("border","0"),f.setAttribute("wmode","Opaque"),f.setAttribute("style","position:absolute;top:-999;left:-999;border: none;"),m.appendChild(f);try{var g=f.contentWindow||f.contentDocument||f,p=g.document||g.contentDocument||g,h="crossForm"+Math.floor(1e4*Math.random());c.setAttribute("id",h),p.write("<div>"+c.outerHTML+"</div>"),setTimeout((function(){window.removeEventListener("message",v),window.addEventListener("message",v);var e=p.getElementById(h);e.submit()}),100),d=setTimeout((function(){clearTimeout(d),window.removeEventListener("message",v),"function"===typeof f.remove?f.remove():m.removeChild(f);var e="访问超时，请检查客户端服务是否正常";Object(o["Message"])({customClass:"el-icon-warning-color",message:e,type:"warning",duration:5e3}),r(new Error(e))}),6e4)}catch(b){clearTimeout(d),window.removeEventListener("message",v),"function"===typeof f.remove?f.remove():m.removeChild(f),r(b)}function v(e){clearTimeout(d),window.removeEventListener("message",v),"function"===typeof f.remove?f.remove():m.removeChild(f);var r=e.data||"";"string"==typeof r&&(r=JSON.parse(r)),t(r)}}))}function y(e){return b({url:"/readCert",method:"post",data:e})}function x(e){return b({url:"/readCertInfo",method:"post",data:e})}function C(e){return b({url:"/changePin",method:"post",data:e})}function T(e){return b({url:"/getDeviceNum",method:"post",data:e})}},d95d:function(e,t,r){},dac8:function(e,t,r){"use strict";var a=r("7b77"),i=r.n(a);i.a},dcad:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"f",(function(){return n})),r.d(t,"a",(function(){return o})),r.d(t,"e",(function(){return s})),r.d(t,"d",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"g",(function(){return u}));var a=r("b775");function i(e){return Object(a["a"])({url:"/auth/entrance/agreementListQuery",method:"post",data:e})}function n(e){return Object(a["a"])({url:"/idm/internal/natural/resignAgreementNew",method:"post",data:e})}function o(e){return Object(a["a"])({url:"/idm/internal/natural/agreementInfoQuery",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/idm/internal/natural/resetPasswordForFirstLoginNew",method:"post",data:e})}function c(e){return Object(a["a"])({url:"/idm/internal/natural/authorizeRelationBatchByRealCheck",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/idm/internal/natural/authorizeRelationBatch",method:"post",data:e})}function u(e){return Object(a["a"])({url:"/auth/entrance/selectEnterpriseLogin",method:"post",data:e})}},dd1a:function(e,t,r){},e087:function(e,t,r){},e0b7:function(e,t,r){},e110:function(e,t,r){"use strict";var a=r("d95d"),i=r.n(a);i.a},e49f:function(e,t,r){"use strict";var a=r("dd1a"),i=r.n(a);i.a},e4a3:function(e,t,r){},e4cc:function(e,t,r){"use strict";var a=r("e857"),i=r.n(a);i.a},e857:function(e,t,r){},e8bf:function(e,t,r){},e931:function(e,t,r){},e9c7:function(e,t,r){},eb3b:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"left"}},[a("el-dialog",{staticClass:"choosedCls",attrs:{visible:e.dialogVisible,fullscreen:!0,showClose:!1,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleClose}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-background":"rgba(255, 255, 255, 0.6)"}},[a("div",{staticClass:"header"},[a("el-row",{staticClass:"formCss"},[a("el-form",{ref:"form",attrs:{model:e.formData}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"行政区划（省）","label-width":"7.1875rem"}},[a("el-select",{attrs:{disabled:""},model:{value:e.formData.administrativeAreaCode,callback:function(t){e.$set(e.formData,"administrativeAreaCode",t)},expression:"formData.administrativeAreaCode"}},e._l(e.administrativeAreaCodeProvinceList,(function(e){return a("el-option",{key:e.areaPrefix,attrs:{label:e.areaPreName,value:e.areaPrefix}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"（市）","label-width":"3.125rem"}},[a("el-select",{attrs:{clearable:"",disabled:e.singleCict},on:{change:e.selectCityList},model:{value:e.formData.administrativeAreaCityName,callback:function(t){e.$set(e.formData,"administrativeAreaCityName",t)},expression:"formData.administrativeAreaCityName"}},e._l(e.administrativeAreaCodeCityList,(function(e){return a("el-option",{key:e.administrativeAreaCode,attrs:{label:e.administrativeAreaName,value:e.administrativeAreaCode}})})),1)],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"（区）","label-width":"3.125rem"}},[a("el-select",{attrs:{clearable:"",disabled:e.disArea},on:{change:e.selectAreaList},model:{value:e.formData.administrativeAreaName,callback:function(t){e.$set(e.formData,"administrativeAreaName",t)},expression:"formData.administrativeAreaName"}},e._l(e.administrativeAreaCodeAreaList,(function(e){return a("el-option",{key:e.administrativeAreaCode,attrs:{label:e.administrativeAreaName,value:e.administrativeAreaCode}})})),1)],1)],1),a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"主管税务机关","label-width":"7.5rem"}},[a("el-select",{staticStyle:{"padding-left":"0.75rem"},attrs:{clearable:""},model:{value:e.formData.competentTaxAuthorityCode,callback:function(t){e.$set(e.formData,"competentTaxAuthorityCode",t)},expression:"formData.competentTaxAuthorityCode"}},e._l(e.competentTaxAuthorityList,(function(e){return a("el-option",{key:e.organizationCode,attrs:{label:e.organizationName,value:e.organizationCode}})})),1)],1)],1),a("el-col",{staticClass:"search-button",attrs:{span:1}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getTableList(1)}}},[e._v("查询")])],1)],1)],1),a("el-row",{staticClass:"second-search"},[a("el-form",{ref:"form",attrs:{model:e.formData}},[a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"跨区域涉税事项报验管理编号","label-width":"199px"}},[a("el-input",{staticStyle:{"padding-left":"0.85rem"},attrs:{placeholder:"跨区域涉税事项报验管理编号",clearable:""},model:{value:e.formData.crossInspectionNumber,callback:function(t){e.$set(e.formData,"crossInspectionNumber",t)},expression:"formData.crossInspectionNumber"}})],1)],1),e.enterpriseStatusList.length>0?a("el-col",{attrs:{span:7}},[a("el-form-item",{attrs:{label:"企业状态","label-width":"7.5rem"}},[a("el-select",{staticStyle:{"padding-left":"0.78rem"},attrs:{clearable:""},model:{value:e.formData.enterpriseStatus,callback:function(t){e.$set(e.formData,"enterpriseStatus",t)},expression:"formData.enterpriseStatus"}},e._l(e.enterpriseStatusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1):a("el-col",{staticStyle:{"min-height":"1px"},attrs:{span:7}}),a("el-col",{staticClass:"search-button",attrs:{span:1}},[a("el-button",{staticClass:"greyButton",on:{click:e.handleClose}},[e._v("返回")])],1)],1)],1)],1),a("el-table",{staticClass:"tableContent",staticStyle:{width:"100%"},attrs:{data:e.tableData,align:"center"}},[a("div",{attrs:{slot:"empty"},slot:"empty"},[a("img",{attrs:{src:r("275d")}}),a("div",{staticStyle:{color:"rgba(0,0,0,0.65)","font-size":"16px","font-weight":"Medium"}},[e._v(e._s(e.errorMsg))])]),a("el-table-column",{attrs:{type:"index",index:e.getIndex,label:"序号",width:"80",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"competentTaxAuthorityName",label:"主管税务机关",width:"360",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"crossInspectionNumber","min-width":"120",label:"跨区域涉税事项报验管理编号",align:"center","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"startDate",label:"有效期限起",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.startDate?e.formatTime(t.row.startDate):"")+" ")]}}])}),a("el-table-column",{attrs:{prop:"endDate",label:"有效期限止",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.endDate?e.formatTime(t.row.endDate):"")+" ")]}}])}),a("el-table-column",{attrs:{align:"center",width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"cz-box"},[a("el-button",{attrs:{type:"text",loading:e.loadingBtn},on:{click:function(r){return e.enterpriseSubmit(t.row)}}},[e._v("进入")])],1)]}}])})],1),e.hasMainReg?a("el-row",{staticClass:"page-bar",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticStyle:{display:"flex","justify-content":"flex-end",padding:"10px 0"}},[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,20,30,40],"page-size":e.pageSize,background:"",layout:"total,sizes, prev, pager, next,jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1):e._e()],1)])],1)},i=[],n=(r("4160"),r("c975"),r("ac1f"),r("1276"),r("159b"),r("96cf"),r("1da1")),o=(r("1115"),r("05ec"),r("79fa")),s=(r("c533"),r("fc4b")),c=(r("0a4f"),r("35e0"),r("bfa8")),l=(r("4e48"),{name:"register",components:{},props:{visibleApply:Boolean,initData:{type:Object}},data:function(){return{errorMsg:"暂无数据",disArea:!1,loadingBtn:!1,uuid:"",loading:!1,dialogVisible:this.visibleApply,isShowTooltip:!1,administrativeAreaCodeAreaList:[],administrativeAreaCodeProvinceList:[],administrativeAreaCodeCityList:[],competentTaxAuthorityList:[],userInfo:{},queryScene:"100",administrativeAreaCodeSearch:"",administrativeAreaCodeCityStore:"",formData:{administrativeAreaCode:"",competentTaxAuthorityCode:"",competentTaxAuthorityName:"",crossInspectionNumber:"",administrativeAreaCityName:"",administrativeAreaName:"",fid:"",enterpriseStatus:"09"},enterpriseStatusList:[],tableData:[],singleCict:!1,options:[],hasMainReg:!0,total:0,pageNum:1,pageSize:10,areaPrefix:"",manageArr:[],token:"",sqm:"",clientId:Object(s["b"])()}},created:function(){var e,t=window.location.href.split("?")[1];t&&t.split("&").forEach((function(e){if("client_type=client"===e){var t=new Image,r="http://127.0.0.1:18604";t.src=r+"?form_height=625&form_width=1366&newGet="+Math.floor(1e5*Math.random())}})),(null===(e=this.$store.state.settings.logConfig)||void 0===e?void 0:e.enterpriseStatusList)&&(this.enterpriseStatusList=this.$store.state.settings.logConfig.enterpriseStatusList,this.formData.enterpriseStatus="")},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$nextTick((function(){e.uuid=e.initData.uuid,e.tableData=e.initData.regNumberList,e.total=e.initData.total,void 0===e.total&&(e.hasMainReg=!1),"00"!=e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix.substring(2,4)?(e.areaPrefix=e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix.substring(0,2)+"0000",e.administrativeAreaCodeProvinceList.push({areaPreName:e.$store.state.settings.logConfig.areaInfoData[0].provincePreName,areaPrefix:e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix.substring(0,2)+"0000"}),e.formData.administrativeAreaCode=e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix.substring(0,2)+"0000",e.singleCict=!0,e.administrativeAreaCodeCityList.push({administrativeAreaName:e.$store.state.settings.logConfig.areaInfoData[0].areaPreName,administrativeAreaCode:e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix+"00"}),e.formData.administrativeAreaCityName=e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix+"00",e.selectCityList(e.formData.administrativeAreaCityName)):(e.areaPrefix=e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix+"00",e.administrativeAreaCodeProvinceList.push({areaPreName:e.$store.state.settings.logConfig.areaInfoData[0].areaPreName,areaPrefix:e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix+"00"}),e.formData.administrativeAreaCode=e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix+"00"),e.administrativeAreaCodeSearch=e.formData.administrativeAreaCode,"00"==e.$store.state.settings.logConfig.areaInfoData[0].areaPrefix.substring(2,4)&&Object(o["b"])({administrativeAreaCode:e.administrativeAreaCodeSearch}).then((function(t){1e3===t.code&&t.datagram.administrativeAreaCodeList&&(e.administrativeAreaCodeCityList=t.datagram.administrativeAreaCodeList)})),(!e.tableData||e.tableData&&0===e.tableData.length)&&e.getTableList(1)}));case 1:case"end":return t.stop()}}),t)})))()},methods:{handleClose:function(){var e=window.location.href.split("?")[1];e&&e.split("&").forEach((function(e){if("client_type=client"===e){var t=new Image,r="http://127.0.0.1:18604";t.src=r+"?form_height=556&form_width=674&newGet="+Math.floor(1e5*Math.random())}})),this.$emit("update:visible",!1),this.$emit("update:visibleApply",!1)},enterpriseSubmit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.loadingBtn=!0,Object(c["r"])({reg_number:e.reg_number,wcjyzmuuid:e.wcjyzmuuid,crossInspectionNumber:e.crossInspectionNumber,uuid:t.uuid}).then((function(e){setTimeout((function(){t.loadingBtn=!1}),8e3),t.$emit("getLoginNext",e)})).catch((function(){t.loadingBtn=!1}));case 2:case"end":return r.stop()}}),r)})))()},onMouseOver:function(e){this.isShowTooltip=this.$refs[e].value.length<=13},organizationData:function(e,t){this.manageArr=[],this.$set(this.formData,"competentTaxAuthorityCode",e),this.$set(this.formData,"competentTaxAuthorityName",t)},selectAreaList:function(e){var t=this;if(e){this.administrativeAreaCodeSearch=e;var r=e;Object(o["d"])({administrativeAreaCode:r}).then((function(e){1e3===e.code&&(t.competentTaxAuthorityList=e.datagram.organizationName)})),this.formData.competentTaxAuthorityCode=""}else this.administrativeAreaCodeSearch=this.administrativeAreaCodeCityStore,this.competentTaxAuthorityList=[],this.formData.competentTaxAuthorityCode=""},selectCityList:function(e){var t=this;this.formData.administrativeAreaName="",e?(this.administrativeAreaCodeCityStore=e,this.administrativeAreaCodeSearch=e,Object(o["b"])({administrativeAreaCode:e}).then((function(r){1e3===r.code&&r.datagram.administrativeAreaCodeList&&r.datagram.administrativeAreaCodeList.length>0?(t.disArea=!1,t.competentTaxAuthorityList=[],t.formData.competentTaxAuthorityCode="",t.administrativeAreaCodeAreaList=r.datagram.administrativeAreaCodeList):1e3===r.code&&0==r.datagram.administrativeAreaCodeList.length&&(t.disArea=!0,t.competentTaxAuthorityList=[],t.formData.competentTaxAuthorityCode="",t.selectAreaList(e))}))):(this.administrativeAreaCodeCityStore="",this.administrativeAreaCodeSearch=this.areaPrefix,this.administrativeAreaCodeAreaList=[],this.competentTaxAuthorityList=[],this.formData.competentTaxAuthorityCode="")},formatTime:function(e){return-1!=e.indexOf("-")?e:e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2)},getTableList:function(e){var t,r=this;if((null===(t=this.$store.state.settings.logConfig)||void 0===t?void 0:t.specialIsPage)&&"1"==this.$store.state.settings.logConfig.specialIsPage[0].isPage){if(!this.formData.competentTaxAuthorityCode)return void this.$message.warning("请选择行政区划和主管税务机关后再进行查询！");if(!this.formData.crossInspectionNumber)return void this.$message.warning("请选择跨区域涉税事项报验管理编号后再进行查询！")}e&&(this.pageNum=e),this.loading=!0,this.tableData=[],this.hasMainReg?Object(c["n"])({administrativeAreaCode:this.administrativeAreaCodeSearch,competentTaxAuthorityCode:this.formData.competentTaxAuthorityCode,crossInspectionNumber:this.formData.crossInspectionNumber,enterpriseStatus:this.formData.enterpriseStatus,pageNo:this.pageNum,pageSize:this.pageSize,uuid:this.uuid}).then((function(e){1e3===e.code&&e.datagram&&(r.tableData=e.datagram.regNumberList,r.total=e.datagram.total),2067==e.code?r.errorMsg=e.msg||e.message:r.errorMsg="暂无数据",r.loading=!1})).catch((function(e){r.loading=!1})):Object(c["o"])({administrativeAreaCode:this.administrativeAreaCodeSearch,competentTaxAuthorityCode:this.formData.competentTaxAuthorityCode,crossInspectionNumber:this.formData.crossInspectionNumber,enterpriseStatus:this.formData.enterpriseStatus,uuid:this.uuid}).then((function(e){1e3===e.code&&e.datagram&&(r.tableData=e.datagram.regNumberList),2067==e.code?r.errorMsg=e.msg||e.message:r.errorMsg="暂无数据",r.loading=!1})).catch((function(e){r.loading=!1}))},handleSizeChange:function(e){this.pageNum=1,this.pageSize=e,this.getTableList()},handleCurrentChange:function(e){this.pageNum=e,this.getTableList()},getIndex:function(e){return(this.pageNum-1)*this.pageSize+e+1}}}),u=l,d=(r("3245"),r("2877")),m=Object(d["a"])(u,a,i,!1,null,"b5b8b2ee",null);t["a"]=m.exports},ee6d:function(e,t,r){},f1a6:function(e,t,r){"use strict";var a=r("37e9"),i=r.n(a);i.a},f2e0:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a=[{value:"01",label:"受理"},{value:"02",label:"筹建期"},{value:"03",label:"正常"},{value:"04",label:"停业"},{value:"05",label:"非正常"},{value:"06",label:"清算"},{value:"07",label:"注销"},{value:"08",label:"非正常户注销"},{value:"09",label:"报验"},{value:"10",label:"核销报验"},{value:"11",label:"中断缴费"},{value:"12",label:"恢复缴费"},{value:"99",label:"其他"}]},f443:function(e,t,r){"use strict";var a=r("2580"),i=r.n(a);i.a},f735:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"用户体验调查问卷",visible:e.dialogVisible,width:"600px",center:"","close-on-click-modal":!1,"destroy-on-close":!0,"before-close":e.close},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"q-body"},[a("p",[e._v("尊敬的纳税人：")]),a("p",{staticStyle:{"line-height":"25px"}},[e._v(" 您好！为提供更为便捷流畅以及舒适的办税缴费体验，现通过问卷调查形式，向您征求优化意见建议，感谢您的支持和协助！ ")]),a("el-form",{ref:"questionform",attrs:{model:e.questionform,rules:e.rules}},[a("el-form-item",{attrs:{prop:"q1"}},[a("p",[e._v("1、您使用电子税务局的年限是？")]),a("el-radio-group",{staticClass:"mgt-md",model:{value:e.questionform.q1,callback:function(t){e.$set(e.questionform,"q1",t)},expression:"questionform.q1"}},[a("el-radio",{attrs:{label:1}},[e._v("1年以上")]),a("el-radio",{attrs:{label:2}},[e._v("1年以下")])],1)],1),a("el-form-item",{attrs:{prop:"q2"}},[a("p",[e._v("2、您觉得新版登录的界面与旧版相比属于以下哪种？您是否有修改建议？")]),a("el-radio-group",{staticClass:"mgt-md",model:{value:e.questionform.q2,callback:function(t){e.$set(e.questionform,"q2",t)},expression:"questionform.q2"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:1}},[e._v("界面清晰美观且易于使用")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:2}},[e._v("界面不清晰美观，但易于使用")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:3}},[e._v("都比较一般")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:4}},[e._v("界面有待改观，且操作繁琐,")])],1)],1)],1),a("div",{staticClass:"input-flex"},[a("div",{staticClass:"input-flex-label"},[e._v("补充建议：")]),a("el-input",{staticStyle:{width:"163px"},attrs:{maxlength:"300"},model:{value:e.questionform.q2txt,callback:function(t){e.$set(e.questionform,"q2txt",t)},expression:"questionform.q2txt"}}),a("div",{staticClass:"input-flex-label"},[e._v("（非必填）")])],1)],1),a("el-form-item",{attrs:{prop:"q3"}},[a("p",[e._v("3、您是否能通过新版登录页面登录电子税务局？")]),a("div",{staticStyle:{display:"flex"}},[a("el-radio-group",{staticClass:"mgt-md",model:{value:e.questionform.q3,callback:function(t){e.$set(e.questionform,"q3",t)},expression:"questionform.q3"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:2}},[e._v("否，补充原因：")])],1),a("div",{staticClass:"input-flex"},[a("el-input",{staticStyle:{width:"163px"},attrs:{maxlength:"300"},model:{value:e.questionform.q3txt,callback:function(t){e.$set(e.questionform,"q3txt",t)},expression:"questionform.q3txt"}}),a("div",{staticClass:"input-flex-label",staticStyle:{color:"#ff0000"}},[e._v("（必填）")])],1)],1)]),a("el-form-item",{attrs:{prop:"q4"}},[a("p",[e._v("4、您会使用新上线的扫码登录方式吗？")]),a("el-radio-group",{staticClass:"mgt-md",staticStyle:{width:"100%"},model:{value:e.questionform.q4,callback:function(t){e.$set(e.questionform,"q4",t)},expression:"questionform.q4"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:1}},[e._v("经常使用，很方便")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:2}},[e._v("作为体验仅使用过1次")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:3}},[e._v("没有使用过，登录过程繁琐")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:4}},[e._v("没有使用过，不知道有此功能")])],1)],1)],1)],1),a("el-form-item",{attrs:{prop:"q5"}},[a("p",[e._v("5、以下哪种登录认证组合是您最经常使用的？")]),a("el-radio-group",{staticClass:"mgt-md",staticStyle:{width:"100%"},model:{value:e.questionform.q5,callback:function(t){e.$set(e.questionform,"q5",t)},expression:"questionform.q5"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:1}},[e._v("密码+手机验证码")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:2}},[e._v("密码+扫脸认证")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:3}},[e._v("税务数字证书或CA")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:4}},[e._v("扫码登录")])],1)],1)],1)],1),a("el-form-item",{attrs:{prop:"q6"}},[a("p",[e._v("6、您在使用升级后的登录界面时是否流畅？")]),a("el-radio-group",{staticClass:"mgt-md",staticStyle:{width:"100%"},model:{value:e.questionform.q6,callback:function(t){e.$set(e.questionform,"q6",t)},expression:"questionform.q6"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:1}},[e._v("非常便利，页面跳转很快")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:2}},[e._v("一般，有5秒左右延迟")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:3}},[e._v("不顺畅，有15秒左右延迟")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:4}},[e._v("升级前可以登录，新版无法登录")])],1)],1)],1)],1),a("el-form-item",{attrs:{prop:"q7"}},[a("p",[e._v("7、您对登录方式的升级改造是否满意？")]),a("el-radio-group",{staticClass:"mgt-md",staticStyle:{width:"100%"},model:{value:e.questionform.q7,callback:function(t){e.$set(e.questionform,"q7",t)},expression:"questionform.q7"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:1}},[e._v("满意")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:2}},[e._v("一般")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:3}},[e._v("不满意，补充建议：")])],1)],1)],1),a("div",{staticClass:"input-flex",staticStyle:{position:"absolute",right:"115px",top:"63px"}},[a("el-input",{staticStyle:{width:"163px"},attrs:{maxlength:"300"},model:{value:e.questionform.q7txt,callback:function(t){e.$set(e.questionform,"q7txt",t)},expression:"questionform.q7txt"}}),a("div",{staticClass:"input-flex-label"},[e._v("（非必填）")])],1)],1),a("el-form-item",{attrs:{prop:"q8"}},[a("p",[e._v("8、以下新登录界面的设计风格，您是否能接受？")]),a("el-radio-group",{staticClass:"mgt-md",model:{value:e.questionform.q8,callback:function(t){e.$set(e.questionform,"q8",t)},expression:"questionform.q8"}},[a("img",{staticClass:"questionaire-img",attrs:{src:r("7018")}}),a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{prop:"q9"}},[a("div",{staticStyle:{"line-height":"25px"}},[e._v(" 9、您是否接受密码登录下统一设置四个登录页签，分别为“企业业务”、“自然人业务”、“代理业务”、“特定主体”？ ")]),a("el-radio-group",{staticClass:"mgt-md",model:{value:e.questionform.q9,callback:function(t){e.$set(e.questionform,"q9",t)},expression:"questionform.q9"}},[a("img",{staticClass:"questionaire-img",attrs:{src:r("561d")}}),a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{prop:"q10"}},[a("div",{staticStyle:{"line-height":"25px"}},[e._v(" 10、您是否接受登录界面“企业业务”和“代理业务”下取消快捷登录、证书登录按钮。证书登录统一放置“其他登录方式”下，分别设置为税务数字证书和其他数字证书？ ")]),a("el-radio-group",{staticClass:"mgt-md",model:{value:e.questionform.q10,callback:function(t){e.$set(e.questionform,"q10",t)},expression:"questionform.q10"}},[a("img",{staticClass:"questionaire-img",attrs:{src:r("8760")}}),a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{prop:"q11"}},[a("div",{staticStyle:{"line-height":"25px"}},[e._v(" 11、您是否接受登录界面“自然人业务”下取消手机号登录、证件登录、用户名登录按钮，对用户登录所需输入的手机号码、证件号码以及用户名进行三合一处理？ ")]),a("el-radio-group",{staticClass:"mgt-md",model:{value:e.questionform.q11,callback:function(t){e.$set(e.questionform,"q11",t)},expression:"questionform.q11"}},[a("img",{staticClass:"questionaire-img",attrs:{src:r("7520")}}),a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{prop:"q12"}},[a("div",{staticStyle:{"line-height":"25px"}},[e._v(" 12、您是否接受“其他登录方式”下设置手机短信登录,用户点击后输入密码栏自动切换为接收手机验证码？ ")]),a("el-radio-group",{staticClass:"mgt-md",model:{value:e.questionform.q12,callback:function(t){e.$set(e.questionform,"q12",t)},expression:"questionform.q12"}},[a("img",{staticClass:"questionaire-img",attrs:{src:r("7055")}}),a("el-radio",{attrs:{label:1}},[e._v("是")]),a("el-radio",{attrs:{label:2}},[e._v("否")])],1)],1),a("el-form-item",{attrs:{prop:"q13"}},[a("p",[e._v("13、在电子税务局账户中心已上线的功能中，您觉得哪种具体功能最需要改善？")]),a("el-radio-group",{staticClass:"mgt-md",staticStyle:{width:"50%"},model:{value:e.questionform.q13,callback:function(t){e.$set(e.questionform,"q13",t)},expression:"questionform.q13"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:1}},[e._v("企业信息管理")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:2}},[e._v("人员权限管理")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:3}},[e._v("用户信息维护")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:4}},[e._v("数字证书管理")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:5}},[e._v("我的代理")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:6}},[e._v("身份切换")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:7}},[e._v("日志管理")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:8}},[e._v("其他，补充建议：")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:9}},[e._v("无")])],1)],1)],1),a("div",{staticClass:"input-flex",staticStyle:{position:"absolute",right:"1px",bottom:"36px"}},[a("el-input",{staticStyle:{width:"163px"},attrs:{maxlength:"300"},model:{value:e.questionform.q13txt,callback:function(t){e.$set(e.questionform,"q13txt",t)},expression:"questionform.q13txt"}}),a("div",{staticClass:"input-flex-label"},[e._v("（非必填）")])],1)],1),a("el-form-item",{attrs:{prop:"q14"}},[a("p",[e._v("14、您对账户中心相关功能是否理解并能进行操作？")]),a("el-radio-group",{staticClass:"mgt-md",staticStyle:{width:"100%"},model:{value:e.questionform.q14,callback:function(t){e.$set(e.questionform,"q14",t)},expression:"questionform.q14"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:1}},[e._v("充分理解，熟练操作")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:2}},[e._v("部分理解，正常操作")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:3}},[e._v("不是很理解 ，能基本操作")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:4}},[e._v("不了解，不会操作，如：")])],1)],1)],1),a("div",{staticClass:"input-flex",staticStyle:{position:"absolute",right:"90px",bottom:"0px"}},[a("el-input",{staticStyle:{width:"163px"},attrs:{maxlength:"300"},model:{value:e.questionform.q14txt,callback:function(t){e.$set(e.questionform,"q14txt",t)},expression:"questionform.q14txt"}}),a("div",{staticClass:"input-flex-label"},[e._v("（非必填）")])],1)],1),a("el-form-item",{attrs:{prop:"q15"}},[a("p",[e._v("15、您认为账户中心的列表功能导航是否清晰，是否能快速找到您想要的功能？")]),a("el-radio-group",{staticClass:"mgt-md",staticStyle:{width:"100%"},model:{value:e.questionform.q15,callback:function(t){e.$set(e.questionform,"q15",t)},expression:"questionform.q15"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:1}},[e._v("是，能迅速找到功能")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:2}},[e._v("否，通过其他途径才能，补充建议：")])],1)],1)],1),a("div",{staticClass:"input-flex",staticStyle:{position:"absolute",right:"20px",bottom:"0px"}},[a("el-input",{staticStyle:{width:"163px"},attrs:{maxlength:"300"},model:{value:e.questionform.q15txt,callback:function(t){e.$set(e.questionform,"q15txt",t)},expression:"questionform.q15txt"}}),a("div",{staticClass:"input-flex-label"},[e._v("（非必填）")])],1)],1),a("el-form-item",{attrs:{prop:"q16"}},[a("p",[e._v("16、您在使用账户中心的过程中是否感觉功能菜单过多影响使用：")]),a("el-radio-group",{staticClass:"mgt-md",staticStyle:{width:"100%"},model:{value:e.questionform.q16,callback:function(t){e.$set(e.questionform,"q16",t)},expression:"questionform.q16"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:1}},[e._v("会，我经常无法找到我想用的功能")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:2}},[e._v("偶尔会，我时不时无法找到我想用的功能")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:3}},[e._v("还可以，我能快速找到一些常用功能")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:4}},[e._v("几乎不会，菜单设置不会影响我的日常使用")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:5}},[e._v("不会，功能设置十分便捷，一目了然")])],1)],1)],1)],1),a("el-form-item",{attrs:{prop:"q17"}},[a("p",[e._v("17、您觉得电子税务局账户中心最需要改善的地方是？")]),a("el-radio-group",{staticClass:"mgt-md",staticStyle:{width:"100%"},model:{value:e.questionform.q17,callback:function(t){e.$set(e.questionform,"q17",t)},expression:"questionform.q17"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:1}},[e._v("增加操作引导")])],1),a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:2}},[e._v("进一步简化操作")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:3}},[e._v("在操作过程中，增加或完善必要的告示，如操作成功、操作错误等")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:4}},[e._v("其他，补充建议：")])],1)],1)],1),a("div",{staticClass:"input-flex",staticStyle:{position:"absolute",right:"130px",bottom:"-1px"}},[a("el-input",{staticStyle:{width:"163px"},attrs:{maxlength:"300"},model:{value:e.questionform.q17txt,callback:function(t){e.$set(e.questionform,"q17txt",t)},expression:"questionform.q17txt"}}),a("div",{staticClass:"input-flex-label"},[e._v("（非必填）")])],1)],1),a("el-form-item",{attrs:{prop:"q18"}},[a("p",[e._v("18、您觉得账户中心界面是否清晰简洁、便于操作？")]),a("el-radio-group",{staticClass:"mgt-md",staticStyle:{width:"100%"},model:{value:e.questionform.q18,callback:function(t){e.$set(e.questionform,"q18",t)},expression:"questionform.q18"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:1}},[e._v("是")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:2}},[e._v("否，补充建议：")])],1)],1)],1),a("div",{staticClass:"input-flex",staticStyle:{position:"absolute",right:"150px",bottom:"0px"}},[a("el-input",{staticStyle:{width:"163px"},attrs:{maxlength:"300"},model:{value:e.questionform.q18txt,callback:function(t){e.$set(e.questionform,"q18txt",t)},expression:"questionform.q18txt"}}),a("div",{staticClass:"input-flex-label"},[e._v("（非必填）")])],1)],1),a("el-form-item",{attrs:{prop:"q19"}},[a("p",[e._v("19、您对账户中心总体使用感觉是？")]),a("el-radio-group",{staticClass:"mgt-md",staticStyle:{width:"100%"},model:{value:e.questionform.q19,callback:function(t){e.$set(e.questionform,"q19",t)},expression:"questionform.q19"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-radio",{attrs:{label:1}},[e._v("非常满意")])],1),a("el-col",{attrs:{span:8}},[a("el-radio",{attrs:{label:2}},[e._v("基本满意")])],1),a("el-col",{attrs:{span:8}},[a("el-radio",{attrs:{label:3}},[e._v("一般")])],1)],1),a("el-row",{staticClass:"bottom-radio-row"},[a("el-col",{attrs:{span:12}},[a("el-radio",{attrs:{label:4}},[e._v("较差，补充建议：")])],1)],1)],1),a("div",{staticClass:"input-flex",staticStyle:{position:"absolute",right:"140px",bottom:"-1px"}},[a("el-input",{staticStyle:{width:"163px"},attrs:{maxlength:"300"},model:{value:e.questionform.q19txt,callback:function(t){e.$set(e.questionform,"q19txt",t)},expression:"questionform.q19txt"}}),a("div",{staticClass:"input-flex-label"},[e._v("（非必填）")])],1)],1),a("el-form-item",[a("p",[e._v("20、请谈谈您对新版登录界面或账户中心的意见（非必填）")]),a("el-input",{attrs:{rows:2,maxlength:"300"},model:{value:e.questionform.q20txt,callback:function(t){e.$set(e.questionform,"q20txt",t)},expression:"questionform.q20txt"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"submit-button",attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提交")]),a("el-button",{staticClass:"greyButton",on:{click:e.close}},[e._v("取消")])],1)])},i=[],n=(r("4160"),r("a15b"),r("ac1f"),r("5319"),r("5530")),o=r("172b"),s={data:function(){var e=this,t=function(t,r,a){""===e.questionform.q3txt||null===e.questionform.q3txt?a(new Error("请填写建议")):a()};return{dialogVisible:!1,questionform:{q1:"",q2:"",q3:"",q4:"",q5:"",q6:"",q7:"",q8:"",q9:"",q10:"",q11:"",q12:"",q13:"",q14:"",q15:"",q16:"",q17:"",q18:"",q19:"",q2txt:"",q3txt:"",q7txt:"",q13txt:"",q14txt:"",q15txt:"",q17txt:"",q18txt:"",q19txt:"",q20txt:""},rules:{q1:[{required:!0,message:"请选择问题1答案",trigger:["blur","change"]}],q2:[{required:!0,message:"请选择问题2答案",trigger:["blur","change"]}],q3:[{required:!0,message:"请选择问题3答案",trigger:["blur","change"]}],q4:[{required:!0,message:"请选择问题4答案",trigger:["blur","change"]}],q5:[{required:!0,message:"请选择问题5答案",trigger:["blur","change"]}],q6:[{required:!0,message:"请选择问题6答案",trigger:["blur","change"]}],q7:[{required:!0,message:"请选择问题7答案",trigger:["blur","change"]}],q8:[{required:!0,message:"请选择问题8答案",trigger:["blur","change"]}],q9:[{required:!0,message:"请选择问题9答案",trigger:["blur","change"]}],q10:[{required:!0,message:"请选择问题10答案",trigger:["blur","change"]}],q11:[{required:!0,message:"请选择问题11答案",trigger:["blur","change"]}],q12:[{required:!0,message:"请选择问题12答案",trigger:["blur","change"]}],q13:[{required:!0,message:"请选择问题13答案",trigger:["blur","change"]}],q14:[{required:!0,message:"请选择问题14答案",trigger:["blur","change"]}],q15:[{required:!0,message:"请选择问题15答案",trigger:["blur","change"]}],q16:[{required:!0,message:"请选择问题16答案",trigger:["blur","change"]}],q17:[{required:!0,message:"请选择问题17答案",trigger:["blur","change"]}],q18:[{required:!0,message:"请选择问题18答案",trigger:["blur","change"]}],q19:[{required:!0,message:"请选择问题19答案",trigger:["blur","change"]}]},checkq3:t}},watch:{"questionform.q3":function(e){2==e&&""==this.questionform.q3txt?this.$set(this.rules,"q3",[{required:!0,validator:this.checkq3,message:"请填写建议",trigger:["blur","change"]}]):this.$set(this.rules,"q3",[{required:!0,message:"请选择问题3答案",trigger:["blur","change"]}])},"questionform.q3txt":function(e){2==this.questionform.q3&&""==e&&this.$set(this.rules,"q3",[{required:!0,validator:this.checkq3,message:"请填写建议",trigger:["blur","change"]}])}},methods:{submitForm:function(){var e=this;this.$refs.questionform.validate((function(t){if(t){for(var r={uuid:e.uuid(),questionnaireCode:"SWZJ_DCWJ_V20220628",questionnaireContent:[]},a=[],i=1;i<=20;i++)a.push({questionNumber:i,questionAnswer:e.questionform["q".concat(i)]?e.questionform["q".concat(i)]:"",individualOpinion:e.questionform["q".concat(i,"txt")]?e.questionform["q".concat(i,"txt")]:""});a.forEach((function(e,t){a[t]=Object(n["a"])(Object(n["a"])({},a[t]),{},{individualOpinion:a[t].individualOpinion.replace(/}/g,")")})})),r.questionnaireContent=a,Object(o["a"])(r).then((function(t){1e3==t.code&&(e.$message.success("您已成功提交了问卷，谢谢您的配合"),e.close())})).catch((function(e){}))}}))},uuid:function(){for(var e=[],t="0123456789abcdef",r=0;r<36;r++)e[r]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var a=e.join("");return a},close:function(){this.dialogVisible=!1,this.$refs.questionform.resetFields(),this.questionform={q1:"",q2:"",q3:"",q4:"",q5:"",q6:"",q7:"",q8:"",q9:"",q10:"",q11:"",q12:"",q13:"",q14:"",q15:"",q16:"",q17:"",q18:"",q19:"",q2txt:"",q3txt:"",q7txt:"",q13txt:"",q14txt:"",q15txt:"",q17txt:"",q18txt:"",q19txt:"",q20txt:""}}}},c=s,l=(r("3eb0"),r("17c5"),r("2877")),u=Object(l["a"])(c,a,i,!1,null,"c06bb1d8",null);t["default"]=u.exports},fa0a:function(e,t,r){"use strict";var a=r("7f77"),i=r.n(a);i.a},ff1e:function(e,t,r){},fffc:function(e,t,r){}}]);
